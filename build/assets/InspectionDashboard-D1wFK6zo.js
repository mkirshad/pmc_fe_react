import{r,W as _,l,j as t,A as i}from"./index-oDwQGYEA.js";import{S as w,B as d,M as R,E as j}from"./index.esm-C6T0MJvz.js";import{F as p}from"./FileDownload-Brut9iRO.js";import{I as v}from"./Autocomplete-Dg-hWFz0.js";import"./TextField-r5TNIsmD.js";import"./DefaultPropsProvider-CGomaEqC.js";import"./emotion-element-f0de968e.browser.esm-DX8E_o2N.js";import"./setPrototypeOf-C3V6guyq.js";import"./assertThisInitialized-Cle6jci9.js";import"./Modal-CFzYjZPq.js";import"./Box-CNakWzJu.js";import"./FormControlLabel-BQoHBKRj.js";import"./Divider-B6CetmYu.js";import"./index-CFuoc-5k.js";const A=()=>{const[m,f]=r.useState([]),[u,c]=r.useState(!1),h=_();r.useEffect(()=>{(async()=>{c(!0);try{const s=await i.get("/pmc/inspection-report/district_summary/");f(s.data)}catch(s){console.error("Error fetching reports:",s)}finally{c(!1)}})()},[]),l(e=>e.user.district_id);const n=l(e=>e.user.district_name)||"",x=e=>{h(`/edit-inspection/${e.id}`,{state:{reportData:e}})},b=[{accessorKey:"district",header:"District Name",size:200},{accessorKey:"total_inspections",header:"Total No. of Inspections",size:200},{accessorKey:"total_notices_issued",header:"Total No. of Notices Issued",size:200},{accessorKey:"total_plastic_bags_confiscated",header:"Total Kgs of Plastic Bags Confiscated",size:250},{accessorKey:"total_confiscated_plastic",header:`Total Kgs of confiscated Plastic
(Other than plastic bags)`,size:250},{accessorKey:"total_firs_registered",header:"Total No. of FIRs registered",size:200},{accessorKey:"total_premises_sealed",header:"No. of Premises Sealed",size:200},{accessorKey:"total_complaints_filed",header:`No. of Complaints filed before
the Environmental Magistrate`,size:300},{accessorKey:"total_fine_amount",header:"Total Fine Amount (PKR)",size:200},{accessorKey:"total_fine_recovered",header:"Total Fine Recovered (PKR)",size:200},{accessorKey:"pending_fine_amount",header:"Pending Fine Amount (PKR)",size:200},{accessorKey:"total_fines_pending",header:"Total Fines Pending",size:200},{accessorKey:"total_fines_partial",header:"Total Partially Paid Fines",size:200},{accessorKey:"total_fines_recovered",header:"Total Recovered Fines",size:200},{accessorKey:"total_de_sealed_premises",header:"Total De-Sealed Premises",size:200},{accessorKey:"edit",header:"Actions",size:100,Cell:({row:e})=>t.jsx(v,{onClick:()=>x(e.original),children:t.jsx(j,{})})}],y=async()=>{try{const e=await i.get("/pmc/inspection-report/export-district-summary-excel/",{responseType:"blob"}),s=new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),a=window.URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download="district_summary.xlsx",document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(a)}catch(e){console.error("Failed to download Excel file:",e)}},g=async()=>{try{const e=await i.get("/pmc/inspection-report/export-district-summary-pdf/",{responseType:"blob"}),s=new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),a=window.URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download="district_summary.pdf",document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(a)}catch(e){console.error("Failed to download Excel file:",e)}};return t.jsxs("div",{children:[t.jsxs("h2",{className:"text-lg font-bold mb-4",children:["Inspection Reports ",n!==""?" - ":""," ",n]}),u?t.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-50",children:[t.jsx("div",{className:"w-16 h-16 border-4 border-blue-400 border-t-transparent border-solid rounded-full animate-spin"}),t.jsx("p",{className:"mt-4 text-lg font-medium text-gray-600",children:"Loading data, please wait..."})]}):t.jsxs("div",{children:[t.jsxs(w,{direction:"row",spacing:2,className:"mb-4",children:[t.jsx(d,{variant:"contained",color:"success",startIcon:t.jsx(p,{}),onClick:y,children:"Export to Excel"}),t.jsx(d,{variant:"contained",color:"success",startIcon:t.jsx(p,{}),onClick:g,children:"Export to PDF"})]}),t.jsx(R,{columns:b,data:m,enableColumnResizing:!0,enablePagination:!0,initialState:{showColumnFilters:!1},muiTableHeadCellProps:{sx:{backgroundColor:"#f5f5f5",fontWeight:"bold",borderBottom:"2px solid #ccc",textAlign:"center"}},muiTableBodyCellProps:{sx:{borderRight:"1px solid #ddd",padding:"10px"}},muiTableBodyRowProps:{sx:{"&:nth-of-type(even)":{backgroundColor:"#f9f9f9"},"&:hover":{backgroundColor:"#e0f7fa"}}},enableZebraStripes:!0})]})]})};export{A as default};
