import{r as I,k as P,K as C,j as e,e as k,u as F,b as A}from"./index-JKYRZfnN.js";import{L as B}from"./Logo-CFpwrxxZ.js";import{u as U,A as L}from"./useTimeOutMessage-BMvYD7TL.js";import{I as q}from"./Input-BxpIUOPt.js";import{B as E}from"./Button-CHu7rY4Z.js";import{u as T,F as H,a as j,C as b}from"./index.esm-CKEYBAl2.js";import{P as W}from"./PasswordInput-Cbg7ua8B.js";import{t as _,z as u}from"./index-CtBt3eVr.js";import{A as w}from"./ActionLink-YjJJ4W2I.js";import"./StatusIcon-CROWfLlY.js";import"./CloseButton-BSkcEICr.js";import"./classNames-5DXVcwjn.js";import"./index-3y4IVLWu.js";const z=u.object({email:u.string({required_error:"Please enter your email"}).min(1,{message:"Please enter your email"}),password:u.string({required_error:"Please enter your password"}).min(1,{message:"Please enter your password"})}),D=l=>{var g,h,f;const[o,t]=I.useState(!1),n=P(a=>a.setUser),{disableSubmit:m=!1,className:d,setMessage:s,passwordHint:p}=l,{handleSubmit:S,formState:{errors:r},control:x}=T({defaultValues:{email:"",password:""},resolver:_(z)}),{signIn:v}=C(),N=async a=>{const{email:c,password:y}=a;if(!m){t(!0);const i=await v({username:c,password:y});(i==null?void 0:i.status)==="failed"?i.message.includes("400")?s==null||s("Invalid Credentials!"):s==null||s("Technical Error! please try again after sometime or email at fdm@epd.punjab.gov.pk"):n({email:c,userName:c.split("@")[0]})}t(!1)};return e.jsx("div",{className:d,children:e.jsxs(H,{onSubmit:S(N),children:[e.jsx(j,{label:"Username",invalid:!!r.email,errorMessage:(g=r.email)==null?void 0:g.message,children:e.jsx(b,{name:"email",control:x,render:({field:a})=>e.jsx(q,{type:"text",placeholder:"Username",autoComplete:"off",...a})})}),e.jsx(j,{label:"Password",invalid:!!r.password,errorMessage:(h=r.password)==null?void 0:h.message,className:k(p&&"mb-0",((f=r.password)==null?void 0:f.message)&&"mb-8"),children:e.jsx(b,{name:"password",control:x,rules:{required:!0},render:({field:a})=>e.jsx(W,{type:"text",placeholder:"Password",autoComplete:"off",...a})})}),p,e.jsx(E,{block:!0,loading:o,variant:"solid",type:"submit",children:o?"Signing in...":"Sign In"})]})})},K=({signUpUrl:l="/sign-up",forgetPasswordUrl:o="/forgot-password",disableSubmit:t})=>{const[n,m]=U(),d=F(s=>s.mode);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-8",children:e.jsx(A,{to:"/",children:e.jsx(B,{type:"streamline",mode:d,imgClass:"mx-auto",logoWidth:60})})}),e.jsxs("div",{className:"mb-10",children:[e.jsx("h2",{className:"mb-2",children:"Welcome back!"}),e.jsx("p",{className:"font-semibold heading-text",children:"Please enter your credentials to sign in!"})]}),n&&e.jsx(L,{showIcon:!0,className:"mb-4",type:"danger",children:e.jsx("span",{className:"break-all",children:n})}),e.jsx(D,{disableSubmit:t,setMessage:m,passwordHint:e.jsx("div",{className:"mb-7 mt-2",children:e.jsx(w,{to:o,className:"font-semibold heading-text mt-2 underline",themeColor:!1,children:"Forgot password"})})}),e.jsx("div",{children:e.jsxs("div",{className:"mt-6 text-center",children:[e.jsxs("span",{children:["Don't have an account yet?"," "]}),e.jsx(w,{to:l,className:"heading-text font-bold",themeColor:!1,children:"Sign up"})]})})]})},ae=()=>e.jsx(K,{});export{K as SignInBase,ae as default};
