import{r as i,W as T,j as d,A as S}from"./index-oDwQGYEA.js";import{M as A}from"./index.esm-C6T0MJvz.js";import"./TextField-r5TNIsmD.js";import"./DefaultPropsProvider-CGomaEqC.js";import"./emotion-element-f0de968e.browser.esm-DX8E_o2N.js";import"./setPrototypeOf-C3V6guyq.js";import"./assertThisInitialized-Cle6jci9.js";import"./Modal-CFzYjZPq.js";import"./Autocomplete-Dg-hWFz0.js";import"./Box-CNakWzJu.js";import"./FormControlLabel-BQoHBKRj.js";import"./Divider-B6CetmYu.js";import"./index-CFuoc-5k.js";const O=r=>r,w=r=>r.map(p=>{const a=O(p);return Object.keys(a).forEach(c=>{(a[c]===void 0||a[c]===null)&&(a[c]="N/A")}),a}),$=()=>{const[r,p]=i.useState([]),[a,c]=i.useState([]),[b,_]=i.useState([]),[j,h]=i.useState(0),[g,x]=i.useState(null),y=["APPLICANT","LSO","LSM","DO","LSM2","TL","DEO","DG","Download License"],C=(o,n,e)=>{const m=["id","license_number","date_of_issue","license_for","license_duration","owner_name","business_name","district_name","tehsil_name","city_name","address","types_of_plastics","particulars","fee_amount","is_active"],s=w(o),t=s[0];console.log(o);const l=[...Object.keys(t).filter(u=>m.includes(u)).map(u=>({accessorKey:u,header:u.replace(/_/g," ").replace(/\b\w/g,f=>f.toUpperCase()),Cell:({cell:f,row:z})=>d.jsx("span",{style:{cursor:"pointer",color:"blue",textDecoration:"underline"},onClick:()=>{const D=z.original.license_number,K=z.original.date_of_issue;window.location.href=`/generate-license-pdf?license_number=${D}&date_of_issue=${K}`},children:f.getValue()||"-"})}))];return{flattenedData:s,columns:l}};return T(),i.useEffect(()=>{(async()=>{try{let e=[];try{e=(await S.get("/pmc/user-groups/",{headers:{"Content-Type":"application/json"}})).data||[],_(e.map(l=>l.name))}catch(t){console.error("Error fetching user groups:",t),_([])}console.log("groupsResponse",e);const s=(await S.get("/pmc/license-by-user/",{headers:{"Content-Type":"multipart/form-data"}})).data;if(console.log(s),Array.isArray(s)&&s.length>0){const t=C(s,e.length>0&&e[0]!=="",e.map(l=>l.name)[0]);p(t.flattenedData),c(t.columns)}}catch(e){console.error("Error fetching data:",e)}})(),x(25);const n=y.indexOf("LSO");n!==-1&&h(n)},[]),console.log("flattenedData",r),d.jsx("div",{children:d.jsx(A,{columns:[{accessorKey:"license_number",header:"License Number",minSize:50,maxSize:500,size:150,Cell:({row:o})=>{const n=o.original.license_number,e=o.original.date_of_issue,m=`/api/pmc/license-pdf?license_number=${n}&date_of_issue=${e}`;return d.jsx("a",{style:{cursor:"pointer",color:"blue",textDecoration:"underline"},href:m,target:"_blank",rel:"noopener noreferrer",children:n})}},{accessorKey:"date_of_issue",header:"Date Of Issue",minSize:50,maxSize:500,size:150},{accessorKey:"license_for",header:"License For",minSize:50,maxSize:500,size:150},{accessorKey:"license_duration",header:"License Duration",minSize:50,maxSize:500,size:150},{accessorKey:"owner_name",header:"Owner Name",minSize:50,maxSize:500,size:200},{accessorKey:"business_name",header:"Business Name",minSize:50,maxSize:500,size:150},{accessorKey:"district_name",header:"District Name",minSize:50,maxSize:500,size:150},{accessorKey:"tehsil_name",header:"Tehsil Name",minSize:50,maxSize:500,size:150},{accessorKey:"city_name",header:"City Name",minSize:50,maxSize:500,size:150},{accessorKey:"address",header:"Address",minSize:50,maxSize:500,size:150},{accessorKey:"types_of_plastics",header:"Types Of Plastics",minSize:100,maxSize:500,size:500},{accessorKey:"particulars",header:"Particulars",minSize:100,maxSize:100,size:150},{accessorKey:"fee_amount",header:"Fee Amount",minSize:50,maxSize:500,size:150},{accessorKey:"is_active",header:"Is Active",minSize:50,maxSize:500,size:150}],data:r,enableColumnFilters:!0,enableSorting:!0,enableStickyHeader:!0,muiTableProps:{sx:{border:"1px solid #ddd"}},muiTableHeadCellProps:{sx:{backgroundColor:"#f5f5f5",fontWeight:"bold",borderBottom:"2px solid #ccc",textAlign:"center"}},muiTableBodyCellProps:{sx:{borderRight:"1px solid #ddd",padding:"10px"}},muiTableBodyRowProps:{sx:{"&:nth-of-type(even)":{backgroundColor:"#f9f9f9"},"&:hover":{backgroundColor:"#e0f7fa"}}},enableZebraStripes:!0,enableColumnResizing:!0,enableTopToolbar:b.length>0,enablePagination:!0},g)})};export{$ as default};
