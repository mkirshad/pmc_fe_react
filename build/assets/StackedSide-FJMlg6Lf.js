import{r as f,i as p,j as e,b as v,H as T,d as b,S as R,e as H,D as M,f as C,u as A,h as w,k as K,l as L,m as U,n as V}from"./index-Dei5semP.js";import{L as O}from"./Logo-BjVM6vvb.js";import{M as g,V as $}from"./VerticalMenuContent-DIUkzCgP.js";import{a as G,b as P,c as I,A as F,n as E,d as Y,u as _,e as B,H as W,N as q,S as z,U as J,M as Q}from"./Notification-DGta8HRN.js";import{H as X,a as Z}from"./CloseButton-tqpDo4ab.js";import{L as ee}from"./LayoutBase-BZzHyL_3.js";import"./toast-CMbKCx0n.js";import"./StatusIcon-Du8POF34.js";import"./index-D-TwfJm-.js";import"./index-MPMz43IR.js";import"./index-Baxtz9FV.js";import"./index-BJW8SmfY.js";import"./index-mCkvHgEl.js";import"./_getPrototype-BJO0QMiw.js";import"./classNames-ChKocHs_.js";import"./useControllableState-a7j904Wj.js";import"./Button-uRsccr4t.js";const te=l=>{const{onChange:n,routeKey:a,activeKeys:o,onSetActiveKey:u,direction:m,navigationTree:r,userAuthority:c,mode:h,selectedMenu:d,t:x,...j}=l,{includedRouteTree:i}=G(r,a),S=({key:t,title:s,menu:y,translateKey:D})=>{n({title:s,menu:y,translateKey:D}),u([t])},N=({key:t})=>{n({}),u([t])};f.useEffect(()=>{i.type!==P&&!p(i)&&n({key:i.key,title:i.title,menu:i.subMenu,translateKey:i.translateKey})},[i.key]);const k=o&&o.length>0?o:p(d)?[]:[i.key];return e.jsxs("div",{...j,children:[e.jsx(v,{to:b.authenticatedEntryPath,className:"stacked-mini-nav-header flex items-center justify-center",style:{height:T},children:e.jsx(O,{imgClass:"max-h-10",mode:h,type:"streamline",className:R})}),e.jsx(I,{autoHide:!0,direction:m,children:e.jsx(g,{className:"px-4 pb-4",defaultActiveKeys:k,children:r.map(t=>e.jsx(F,{authority:t.authority,userAuthority:c,children:e.jsx("div",{title:x(t.translateKey,t.title),children:t.subMenu&&t.subMenu.length>0?e.jsx(g.MenuItem,{eventKey:t.key,className:"mb-2",onSelect:()=>S({key:t.key,title:t.title,menu:t.subMenu,translateKey:t.translateKey}),children:e.jsx("div",{className:"text-2xl",children:E[t.icon]})}):e.jsx(v,{to:t.path,className:"flex items-center h-full w-full",onClick:()=>N({key:t.key}),children:e.jsx(g.MenuItem,{eventKey:t.key,className:"mb-2",children:e.jsx("div",{className:"text-2xl",children:E[t.icon]})})})})},t.key))})})]})},se=l=>{const{className:n,title:a,menu:o,routeKey:u,onCollapse:m,direction:r,translationSetup:c,userAuthority:h,...d}=l,x=()=>{m()};return e.jsxs("div",{className:H("h-full",n),...d,children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 pl-6 pr-4",style:{height:T},children:[e.jsx("h5",{className:"font-bold",children:a}),e.jsxs("button",{type:"button",className:"close-button",onClick:x,children:[r===M&&e.jsx(X,{}),r===C&&e.jsx(Z,{})]})]}),e.jsx(I,{autoHide:!0,direction:r,children:e.jsx($,{routeKey:u,navigationTree:o,translationSetup:c,userAuthority:h})})]})},ae={width:L},ie=({translationSetup:l=!0})=>{const{t:n}=Y(!l),[a,o]=f.useState({}),[u,m]=f.useState([]),r=A(s=>s.mode),c=A(s=>s.direction),h=w(s=>s.currentRouteKey),d=K(s=>s.user.authority),x=K(s=>s.fetchUserGroups);console.log("its here kkj-m"),f.useEffect(()=>{console.log("userAuthority",d),x()},[]);const{larger:j}=_(),i=(s,y)=>`${s}-${y}`,S=s=>{o(s)},N=()=>{o({}),m([])},k=s=>{m(s)},t=()=>{let s={};const y="-270px";return c===M&&(s={marginLeft:y}),c===C&&(s={marginRight:y}),s};return e.jsx(e.Fragment,{children:j.md&&e.jsxs("div",{className:"stacked-side-nav",children:[e.jsx(te,{className:`stacked-side-nav-mini ${i("stacked-side-nav-mini",r)}`,style:ae,routeKey:h,activeKeys:u,mode:r,direction:c,navigationTree:B,userAuthority:d||[],selectedMenu:a,t:n,onChange:S,onSetActiveKey:k}),e.jsx("div",{className:`stacked-side-nav-secondary ${i("stacked-side-nav-secondary",r)}`,style:{width:U,...p(a)?t():{}},children:!p(a)&&e.jsx(se,{title:n(a.translateKey,a.title),menu:a.menu,routeKey:h,direction:c,translationSetup:l,userAuthority:d||[],onCollapse:N})})]})})},ge=({children:l})=>{const{larger:n,smaller:a}=_();return e.jsx(ee,{type:V,className:"app-layout-stacked-side flex flex-auto flex-col",children:e.jsxs("div",{className:"flex flex-auto min-w-0",children:[n.lg&&e.jsx(ie,{}),e.jsxs("div",{className:"flex flex-col flex-auto min-h-screen min-w-0 relative w-full",children:[e.jsx(W,{className:"shadow dark:shadow-2xl",headerStart:e.jsx(e.Fragment,{children:a.lg&&e.jsx(Q,{})}),headerEnd:e.jsxs(e.Fragment,{children:[e.jsx(q,{}),e.jsx(z,{}),e.jsx(J,{hoverable:!1})]})}),e.jsx("div",{className:"h-full flex flex-auto flex-col",children:l})]})]})})};export{ge as default};
