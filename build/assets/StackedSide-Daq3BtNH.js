import{r as f,i as j,j as e,b as v,d as R,H as M,S as H,e as w,D as C,f as I,u as A,h as L,k as K,l as E,m as U,n as V}from"./index--alRKnuI.js";import{L as O}from"./Logo-3jW_YSTe.js";import{M as g,V as $}from"./VerticalMenuContent-SxyPh30t.js";import{a as G,b as P,c as _,A as F,n as T,d as Y,u as D,e as B,H as W,M as q,N as z,S as J,U as Q}from"./Notification-Bi0f0I-w.js";import{H as X,a as Z}from"./StatusIcon-BEqU0Qr1.js";import{L as ee}from"./LayoutBase-DYqSOnrU.js";import"./toast-DRp-4wnJ.js";import"./index-4MsWgL69.js";import"./index-G90e-Gzp.js";import"./proxy-Bgxzn6Nb.js";import"./_getPrototype-CUtVrB0Q.js";import"./Button-Cj1INb6r.js";const te=r=>{const{onChange:i,routeKey:a,activeKeys:o,onSetActiveKey:u,direction:m,navigationTree:l,userAuthority:c,mode:h,selectedMenu:d,t:x,...S}=r,{includedRouteTree:n}=G(l,a),p=({key:t,title:s,menu:y,translateKey:b})=>{i({title:s,menu:y,translateKey:b}),u([t])},N=({key:t})=>{i({}),u([t])};f.useEffect(()=>{n.type!==P&&!j(n)&&i({key:n.key,title:n.title,menu:n.subMenu,translateKey:n.translateKey})},[n.key]);const k=o&&o.length>0?o:j(d)?[]:[n.key];return e.jsxs("div",{...S,children:[e.jsx(v,{to:R.authenticatedEntryPath,className:"stacked-mini-nav-header flex items-center justify-center",style:{height:M},children:e.jsx(O,{imgClass:"max-h-10",mode:h,type:"streamline",className:H})}),e.jsx(_,{autoHide:!0,direction:m,children:e.jsx(g,{className:"px-4 pb-4",defaultActiveKeys:k,children:l.map(t=>e.jsx(F,{authority:t.authority,userAuthority:c,children:e.jsx("div",{title:x(t.translateKey,t.title),children:t.subMenu&&t.subMenu.length>0?e.jsx(g.MenuItem,{eventKey:t.key,className:"mb-2",onSelect:()=>p({key:t.key,title:t.title,menu:t.subMenu,translateKey:t.translateKey}),children:e.jsx("div",{className:"text-2xl",children:T[t.icon]})}):e.jsx(v,{to:t.path,className:"flex items-center h-full w-full",onClick:()=>N({key:t.key}),children:e.jsx(g.MenuItem,{eventKey:t.key,className:"mb-2",children:e.jsx("div",{className:"text-2xl",children:T[t.icon]})})})})},t.key))})})]})},se=r=>{const{className:i,title:a,menu:o,routeKey:u,onCollapse:m,direction:l,translationSetup:c,userAuthority:h,...d}=r,x=()=>{m()};return e.jsxs("div",{className:w("h-full",i),...d,children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 pl-6 pr-4",style:{height:M},children:[e.jsx("h5",{className:"font-bold",children:a}),e.jsxs("button",{type:"button",className:"close-button",onClick:x,children:[l===C&&e.jsx(X,{}),l===I&&e.jsx(Z,{})]})]}),e.jsx(_,{autoHide:!0,direction:l,children:e.jsx($,{routeKey:u,navigationTree:o,translationSetup:c,userAuthority:h})})]})},ae={width:U},ne=({translationSetup:r=!0})=>{const{t:i}=Y(!r),[a,o]=f.useState({}),[u,m]=f.useState([]),l=A(s=>s.mode),c=A(s=>s.direction),h=L(s=>s.currentRouteKey),d=K(s=>s.user.authority),x=K(s=>s.fetchUserGroups);console.log("its here kkj-m"),f.useEffect(()=>{console.log("userAuthority",d),x()},[]);const{larger:S}=D(),n=(s,y)=>`${s}-${y}`,p=s=>{o(s)},N=()=>{o({}),m([])},k=s=>{m(s)},t=()=>{let s={};const y=`${-E}px`;return c===C&&(s={marginLeft:y}),c===I&&(s={marginRight:y}),s};return e.jsx(e.Fragment,{children:S.md&&e.jsxs("div",{className:"stacked-side-nav",children:[e.jsx(te,{className:`stacked-side-nav-mini ${n("stacked-side-nav-mini",l)}`,style:ae,routeKey:h,activeKeys:u,mode:l,direction:c,navigationTree:B,userAuthority:d||[],selectedMenu:a,t:i,onChange:p,onSetActiveKey:k}),e.jsx("div",{className:`stacked-side-nav-secondary ${n("stacked-side-nav-secondary",l)}`,style:{width:E,...j(a)?t():{}},children:!j(a)&&e.jsx(se,{title:i(a.translateKey,a.title),menu:a.menu,routeKey:h,direction:c,translationSetup:r,userAuthority:d||[],onCollapse:N})})]})})},je=({children:r})=>{const{larger:i,smaller:a}=D();return e.jsx(ee,{type:V,className:"app-layout-stacked-side flex flex-auto flex-col",children:e.jsxs("div",{className:"flex flex-auto min-w-0",children:[i.lg&&e.jsx(ne,{}),e.jsxs("div",{className:"flex flex-col flex-auto min-h-screen min-w-0 relative w-full",children:[e.jsx(W,{className:"shadow dark:shadow-2xl",headerStart:e.jsx(e.Fragment,{children:a.lg&&e.jsx(q,{})}),headerEnd:e.jsxs(e.Fragment,{children:[e.jsx(z,{}),e.jsx(J,{}),e.jsx(Q,{hoverable:!1})]})}),e.jsx("div",{className:"h-full flex flex-auto flex-col",children:r})]})]})})};export{je as default};
