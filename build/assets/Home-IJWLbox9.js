import{r as c,j as r,A as w}from"./index-On9wuYtq.js";import{M as A}from"./index.esm-CiwZqeGb.js";import"./TextField-B3hvLfbt.js";import"./FormControlLabel-B36pZqYD.js";import"./Autocomplete-DaDqVQu6.js";import"./index-DYY8nRAr.js";const R=(u,d="",t={},n=[])=>{for(const[h,s]of Object.entries(u||{})){const i=d?`${d}.${h}`:h;n.some(D=>i.startsWith(D))||s&&typeof s=="object"&&!Array.isArray(s)||(t[i]=s??"N/A")}return t},_=u=>u.map(d=>{const t=R(d);return Object.keys(t).forEach(n=>{(t[n]===void 0||t[n]===null)&&(t[n]="N/A")}),t}),z=()=>{const[u,d]=c.useState([]),[t,n]=c.useState([]);c.useState([]);const[h,s]=c.useState(0),[i,D]=c.useState(null),[x,b]=c.useState({});console.log(i);const j=["APPLICANT","LSO","LSM","DO","LSM2","TL","DEO","Download License"],S={APPLICANT:"Applicant",LSO:"LSO",LSM:"LSM",DO:"DO",LSM2:"LSM",TL:"TL",DEO:"DEO","Download License":"Download License"},C=(e,p)=>{const f=["first_name","last_name","cnic","mobile_no","application_status","tracking_number","assigned_group","registration_for"],m=_(e),l=m[0],a=[...Object.keys(l).filter(o=>f.includes(o)).map(o=>({accessorKey:o,header:o.replace(/_/g," ").replace(/\b\w/g,g=>g.toUpperCase()),size:200,Cell:({cell:g,row:O})=>r.jsx("span",{style:{cursor:"pointer",color:"blue",textDecoration:"underline"},onClick:()=>{const L=O.original.id;console.log(`Clicked ${o}:`,g.getValue()),console.log(`Navigating with ID: ${L}`),window.location.href=`/spuid-signup/${L}`},children:g.getValue()||"-"})}))];return{flattenedData:m,columns:a}};return c.useEffect(()=>{(async()=>{try{const f=(await w.get("/pmc/applicant-detail/",{headers:{"Content-Type":"multipart/form-data"}})).data;if(Array.isArray(f)&&f.length>0){const l=C(f,!1);d(l.flattenedData),n(l.columns),console.log("Flattened Data:",l.flattenedData);const a=l.flattenedData[l.flattenedData.length-1];if(console.log("Last Row:",a),a&&a.id){D(a.id),console.log("Last Row ID:",a.id);const o=j.indexOf(a.assigned_group);o!==-1&&s(o)}}const m=await w.get("/pmc/fetch-statistics-view-groups/",{headers:{"Content-Type":"multipart/form-data"}});b(m.data)}catch(p){console.error("Error fetching data:",p)}})()},[]),console.log("selectedRowId:",i),console.log(i),r.jsxs("div",{children:[r.jsx("div",{className:"tiles-container",children:Object.entries(x).map(([e,p])=>r.jsxs("div",{className:"tile",children:[r.jsx("h3",{children:S[e]||e})," ",r.jsx("p",{children:p})]},e))}),r.jsx(A,{columns:[...t],data:u.map(e=>({...e,assigned_group_title:S[e.assigned_group]||e.assigned_group})),getRowId:e=>e.id,initialState:{showColumnFilters:!1},defaultColumn:{maxSize:420,minSize:1,size:100},enableColumnResizing:!0,columnResizeMode:"onChange",enableTopToolbar:!1,enablePagination:!1},i)]})};export{z as default};
