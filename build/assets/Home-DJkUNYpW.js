import{r as c,j as r,A as w}from"./index-Qg7v0A19.js";import{M as R}from"./index.esm-CZgLsTIk.js";import"./TextField-akmu0cl2.js";import"./FormControlLabel-DadstUbh.js";import"./Autocomplete-qAgSmkw_.js";import"./index-C8-Qu3wM.js";const _=(u,d="",e={},n=[])=>{for(const[h,s]of Object.entries(u||{})){const i=d?`${d}.${h}`:h;n.some(D=>i.startsWith(D))||s&&typeof s=="object"&&!Array.isArray(s)||(e[i]=s??"N/A")}return e},b=u=>u.map(d=>{const e=_(d);return Object.keys(e).forEach(n=>{(e[n]===void 0||e[n]===null)&&(e[n]="N/A")}),e}),z=()=>{const[u,d]=c.useState([]),[e,n]=c.useState([]);c.useState([]);const[h,s]=c.useState(0),[i,D]=c.useState(null),[x,j]=c.useState({});console.log(i);const C=["APPLICANT","LSO","LSM","DO","LSM2","TL","DEO","Download License"],S={APPLICANT:"Applicant",LSO:"LSO",LSM:"LSM",DO:"DO",LSM2:"LSM",TL:"TL",DEO:"DEO","Download License":"Download License"},O=(t,p)=>{const m=["first_name","last_name","cnic","mobile_no","application_status","tracking_number","assigned_group","registration_for"],f=b(t),l=f[0],a=[...Object.keys(l).filter(o=>m.includes(o)).map(o=>({accessorKey:o,header:o.replace(/_/g," ").replace(/\b\w/g,g=>g.toUpperCase()),size:200,Cell:({cell:g,row:A})=>r.jsx("span",{style:{cursor:"pointer",color:"blue",textDecoration:"underline"},onClick:()=>{const L=A.original.id;console.log(`Clicked ${o}:`,g.getValue()),console.log(`Navigating with ID: ${L}`),window.location.href=`/spuid-signup/${L}`},children:g.getValue()||"-"})}))];return{flattenedData:f,columns:a}};return c.useEffect(()=>{(async()=>{try{const m=(await w.get("/pmc/applicant-detail/",{headers:{"Content-Type":"multipart/form-data"}})).data;if(Array.isArray(m)&&m.length>0){const l=O(m,!1);d(l.flattenedData),n(l.columns),console.log("Flattened Data:",l.flattenedData);const a=l.flattenedData[l.flattenedData.length-1];if(console.log("Last Row:",a),a&&a.id){D(a.id),console.log("Last Row ID:",a.id);const o=C.indexOf(a.assigned_group);o!==-1&&s(o)}}const f=await w.get("/pmc/fetch-statistics-view-groups/",{headers:{"Content-Type":"multipart/form-data"}});j(f.data)}catch(p){console.error("Error fetching data:",p)}})()},[]),console.log("selectedRowId:",i),console.log(i),r.jsxs("div",{children:[r.jsx("div",{className:"tiles-container",children:Object.entries(x).map(([t,p])=>r.jsxs("div",{className:"tile",children:[r.jsx("h3",{children:S[t]||t})," ",r.jsx("p",{children:p})]},t))}),r.jsx(R,{columns:[...e],data:u.map(t=>({...t,assigned_group_title:S[t.assigned_group]||t.assigned_group})),getRowId:t=>t.id,initialState:{showColumnFilters:!1},defaultColumn:{maxSize:420,minSize:1,size:100},enableColumnResizing:!0,columnResizeMode:"onChange"},i)]})};export{z as default};
