import{j as e,r as d,i as fe,a0 as Z,A as L,e as qe,y as ca,at as da,U as ua}from"./index-4RLLXVPi.js";import{B as G}from"./Button-C7uPybCK.js";import{f as pe,t as pa,N as ma}from"./toast-BPcDjIZW.js";import{a as w,C as v,u as xe,F as be,d as Oe,b as ee}from"./index.esm-CM8oUn_E.js";import{C as X,S as Te,B as ge,a as S}from"./index-CftTUvbd.js";import{I as V}from"./Input-bmDs-i0v.js";import{I as $e,S as me}from"./index-Dknrm2ii.js";import{z as a,t as je}from"./index-BG6JaUqk.js";import{u as ie}from"./supidStore-794V-y_M.js";import{D as Ne}from"./Divider-CM2zM9r0.js";import{A as Ye,C as Ue}from"./Autocomplete-C-KpBT6P.js";import{T as Je}from"./TextField-CplAdzQS.js";import{a as ke,B as le,b as Ce,c as De}from"./index-WcdIxc0s.js";import{C as Ae}from"./ConfirmDialog--2d9CMk2.js";import{e as We}from"./index-DOOttA8v.js";import"./classNames-DZpD1-WH.js";import"./StatusIcon-BVF7qOA1.js";import"./CloseButton-DrweTL-e.js";import"./index-CD7-FYmD.js";import"./DefaultPropsProvider-DBrdpgGe.js";import"./index-DrOK29mn.js";import"./index-BxCdGLaZ.js";import"./_getPrototype-o5n2g0Wv.js";const Ge=[{label:"Male",value:"Male"},{label:"Female",value:"Female"},{label:"Rather not to say",value:"Rather not to say"}],ga=({control:t,errors:s,readOnly:i=!1})=>{var P,m,y,D,b,B,g;return e.jsxs(X,{children:[e.jsx("h4",{className:"mb-6",children:"Applicant Detail"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(w,{label:"First Name*",invalid:!!s.firstName,errorMessage:(P=s.firstName)==null?void 0:P.message,children:e.jsx(v,{name:"firstName",control:t,render:({field:C})=>e.jsx(V,{type:"text",autoComplete:"off",placeholder:"First Name",readOnly:i,...C})})}),e.jsx(w,{label:"Last Name*",invalid:!!s.lastName,errorMessage:(m=s.lastName)==null?void 0:m.message,children:e.jsx(v,{name:"lastName",control:t,render:({field:C})=>e.jsx(V,{type:"text",autoComplete:"off",placeholder:"Last Name",readOnly:i,...C})})}),e.jsx(w,{label:"Designation",invalid:!!s.applicantDesignation,errorMessage:(y=s.applicantDesignation)==null?void 0:y.message,children:e.jsx(v,{name:"applicantDesignation",control:t,render:({field:C})=>e.jsx(V,{type:"text",autoComplete:"off",placeholder:"Designation",readOnly:i,...C})})}),e.jsx(w,{label:"Gender*",invalid:!!s.gender,errorMessage:(D=s.gender)==null?void 0:D.message,children:e.jsx(v,{name:"gender",control:t,render:({field:C})=>e.jsx(Te,{options:Ge,value:Ge.filter(j=>j.value===C.value),isDisabled:i,onChange:j=>C.onChange(j==null?void 0:j.value)})})}),e.jsx(w,{label:"CNIC*",invalid:!!s.cnic,errorMessage:(b=s.cnic)==null?void 0:b.message,children:e.jsx(v,{name:"cnic",control:t,render:({field:C})=>e.jsx($e,{mask:"99999-9999999-9",placeholder:"99999-9999999-9",value:C.value,readOnly:i,onChange:j=>C.onChange(j.target.value),children:j=>e.jsx(V,{type:"text",autoComplete:"off",placeholder:"CNIC",readOnly:i,...j})})})}),e.jsx(w,{label:"Email",invalid:!!s.email,errorMessage:(B=s.email)==null?void 0:B.message,children:e.jsx(v,{name:"email",control:t,render:({field:C})=>e.jsx(V,{type:"email",autoComplete:"off",placeholder:"Email",readOnly:i,...C})})}),e.jsx(w,{label:"Mobile Number*",className:"w-full",invalid:!!s.phoneNumber||!!s.mobileOperator,errorMessage:(g=s.phoneNumber)==null?void 0:g.message,children:e.jsx(v,{name:"phoneNumber",control:t,render:({field:C})=>e.jsx($e,{mask:"3999999999",placeholder:"3999999999",value:C.value,readOnly:i,onChange:j=>C.onChange(j.target.value),children:j=>e.jsx(V,{type:"text",autoComplete:"off",placeholder:"Mobile Number",readOnly:i,...j})})})})]})]})},ha=a.object({firstName:a.string().min(1,{message:"First name required"}),lastName:a.string().min(1,{message:"Last name required"}),email:a.string().optional(),phoneNumber:a.string().regex(/^3\d{2}\d{7}$/,{message:"Mobile number must be in the format 3999999999"}).refine(t=>t.length===10,{message:"Mobile number must be complete and in the format 3999999999"}),cnic:a.string().regex(/^\d{5}-\d{7}-\d{1}$/,{message:"CNIC must be in the format 99999-9999999-9"}).refine(t=>t.length===15,{message:"CNIC must be complete and in the format 99999-9999999-9"}),gender:a.string().min(1,{message:"Gender is required"}),applicantDesignation:a.string()}),_a=t=>{const{onFormSubmit:s,defaultValues:i={},newCustomer:P=!1,children:m,readOnly:y}=t,{handleSubmit:D,reset:b,formState:{errors:B},control:g}=xe({defaultValues:{banAccount:!1,accountVerified:!0,...i},resolver:je(ha)});d.useEffect(()=>{fe(i)||b(i),console.log("its in useEffect")},[JSON.stringify(i)]);const C=j=>{console.log("its here k1"),s==null||s(j)};return e.jsxs(be,{className:"flex w-full h-full",containerClassName:"flex flex-col w-full justify-between",onSubmit:D(C),children:[e.jsx(Z,{children:e.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:e.jsx("div",{className:"gap-4 flex flex-col flex-auto",children:e.jsx(ga,{control:g,errors:B,readOnly:y})})})}),e.jsx(ge,{children:m})]})},fa=[{value:"Individual",label:"Individual"},{value:"Company",label:"Company / Corporation / Partnership"}],xa=({control:t,errors:s,readOnly:i=!1,readOnlyDistrict:P=!1})=>{var N,F,q,I,u,h;const[m,y]=d.useState([]),[D,b]=d.useState([]),[B,g]=d.useState(null),{updateBusinessEntity:C,businessEntity:j,completedSections:T,businessDetailIndividual:_,markSectionAsCompleted:l}=ie();return d.useEffect(()=>{l("businessDetailIndividual",!0),L.get("/pmc/districts/",{headers:{"Content-Type":"multipart/form-data"}}).then(p=>{const f=[{value:0,label:"Please select district"},...p.data.map(o=>({value:o.district_id,label:o.district_name}))];y(f)}).catch(p=>{console.error("Error fetching districts:",p)}),L.get(`/pmc/tehsils?district_id=${_.district||0}`,{headers:{"Content-Type":"multipart/form-data"}}).then(p=>{const f=p.data.map(o=>({value:o.tehsil_id,label:o.tehsil_name}));b(f)}).catch(p=>{console.error("Error fetching districts:",p)})},[]),d.useEffect(()=>{B&&L.get(`/pmc/tehsils/?district_id=${B}`,{headers:{"Content-Type":"multipart/form-data"}}).then(p=>{const f=p.data.map(o=>({value:o.tehsil_id,label:o.tehsil_name}));b(f)}).catch(p=>{console.error("Error fetching tehsils:",p)})},[B]),console.log(m),e.jsxs(X,{children:[e.jsx("h4",{className:"mb-6",children:"Business Detail"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(w,{label:"Business Entity Type*",invalid:!!s.businessEntityType,errorMessage:(N=s.businessEntityType)==null?void 0:N.message,children:e.jsx(v,{name:"businessEntityType",control:t,render:({field:p})=>e.jsx("div",{className:"flex flex-col gap-2",children:fa.map(f=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",value:f.value,checked:p.value===f.value,disabled:P&&p.value!==void 0,onChange:()=>{p.onChange(f.value),C({businessEntityType:f.value}),l("businessEntity",!0)}}),f.label]},f.value))})})}),e.jsx(w,{label:"Name of business*",invalid:!!s.name,errorMessage:(F=s.name)==null?void 0:F.message,children:e.jsx(v,{name:"name",control:t,render:({field:p})=>e.jsx(V,{type:"text",autoComplete:"off",placeholder:"Name",readOnly:i,...p})})}),e.jsx(w,{label:"District*",invalid:!!s.district,errorMessage:(q=s.district)==null?void 0:q.message,children:e.jsx(v,{name:"district",control:t,render:({field:p})=>e.jsx(Te,{options:m,placeholder:"Select District",value:m.find(f=>f.value===p.value),isDisabled:P&&p.value,onChange:f=>{p.onChange(f==null?void 0:f.value),g(f==null?void 0:f.value)}})})}),e.jsx(w,{label:"Tehsil*",invalid:!!s.tehsil,errorMessage:(I=s.tehsil)==null?void 0:I.message,children:e.jsx(v,{name:"tehsil",control:t,render:({field:p})=>e.jsx(Te,{options:D,placeholder:"Select Tehsil",value:D.find(f=>f.value===p.value),isDisabled:i,onChange:f=>p.onChange(f==null?void 0:f.value)})})}),e.jsx(w,{label:"City/Town/Village",invalid:!!s.city,errorMessage:(u=s.city)==null?void 0:u.message,children:e.jsx(v,{name:"city",control:t,render:({field:p})=>e.jsx(V,{type:"text",autoComplete:"off",placeholder:"City/Town/Village",readOnly:i,...p})})}),e.jsx(w,{label:"Address*",invalid:!!s.postalAddress,errorMessage:(h=s.postalAddress)==null?void 0:h.message,children:e.jsx(v,{name:"postalAddress",control:t,render:({field:p})=>e.jsx(V,{type:"text",autoComplete:"off",placeholder:"Postal Address",readOnly:i,...p})})})]})]})},ba=a.object({businessEntityType:a.string().min(1,{message:"Business Entity Type is required"})}),ja=a.object({businessEntityType:a.string().min(1,{message:"Business Entity Type is required"}),businessName:a.string().min(1,{message:"Business Name is required"}).max(100,{message:"Business Name cannot exceed 100 characters"}),registrationNo:a.string().min(1,{message:"Business Registration Number is required"}).max(50,{message:"Business Registration Number cannot exceed 50 characters"}).optional(),workingDays:a.number().min(1,{message:"Working Days must be at least 1"}).max(365,{message:"Working Days cannot exceed 365"}).optional(),commencementDate:a.string().refine(t=>!isNaN(Date.parse(t)),{message:"Commencement Date must be a valid date"}).optional(),district:a.number().min(1,{message:"District is required"}).optional(),tehsil:a.number().min(1,{message:"Tehsil is required"}).optional(),postalAddress:a.string().min(1,{message:"Postal Address is required"}).max(200,{message:"Postal Address cannot exceed 200 characters"}).optional(),postalCode:a.string().regex(/^\d{5}$/,{message:"Postal Code must be a valid 5-digit number"}).optional(),website:a.string().url({message:"Website Address must be a valid URL"}).optional()}),va=a.object({businessEntityType:a.string().min(1,{message:"Business Entity Type is required"}),name:a.string().min(1,{message:"Name is required"}),district:a.number().min(1,{message:"District selection is required"}),tehsil:a.number().min(1,{message:"Tehsil selection is required"}),city:a.string().optional(),postalAddress:a.string().min(1,{message:"Postal Address is required"})}),ya=t=>{const{applicantDetail:s,updateApplicantDetail:i,resetApplicantDetail:P,businessDetail:m,updateBusinessDetail:y,resetBusinessDetail:D,businessDetailIndividual:b,updateBusinessDetailIndividual:B,resetBusinessDetailIndividual:g,businessEntity:C,updateBusinessEntity:j,resetBusinessEntity:T,resetAll:_,completedSections:l,getValuesFromStateBusinessEntity:N,markSectionAsCompleted:F}=ie(),{onFormSubmit:q,defaultValues:I={},newCustomer:u=!1,children:h,readOnly:p,readOnlyDistrict:f}=t,{handleSubmit:o,reset:k,formState:{errors:$},control:O}=xe({defaultValues:{banAccount:!1,accountVerified:!0,...I},resolver:je(l.includes("businessDetail")?ja:l.includes("businessDetailIndividual")?va:ba)});d.useEffect(()=>{fe(I)||k(I),console.log("its in useEffect")},[JSON.stringify(I)]);const ae=re=>{console.log("its here k1"),q==null||q(re)};return e.jsxs(be,{className:"flex w-full h-full",containerClassName:"flex flex-col w-full justify-between",onSubmit:o(ae),children:[e.jsx(Z,{children:e.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:e.jsx("div",{className:"gap-4 flex flex-col flex-auto",children:e.jsx(xa,{control:O,errors:$,readOnly:p,readOnlyDistrict:f})})})}),e.jsx(ge,{children:h})]})},Ca=[{value:"Producer",label:"Producer"},{value:"Consumer",label:"Stockist/Distributor/Supplier"},{value:"Collector",label:"Collector"},{value:"Recycler",label:"Recycler"}],Da=({control:t,errors:s,readOnly:i=!1})=>{var y;const{updateLicenseDetail:P,markSectionAsCompleted:m}=ie();return e.jsxs(X,{children:[e.jsx("h4",{className:"mb-6",children:"License Type"}),e.jsx("div",{className:"grid md:grid-cols-1 gap-4",children:e.jsx(w,{label:"License Type",invalid:!!s.licenseType,errorMessage:(y=s.licenseType)==null?void 0:y.message,children:e.jsx(v,{name:"licenseType",control:t,render:({field:D})=>e.jsxs("div",{className:"flex flex-row gap-4",children:[" ",Ca.map(b=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",value:b.value,checked:D.value===b.value,disabled:i,onChange:()=>{D.onChange(b.value),P({licenseType:b.value}),m("licenseDetail",!0),b.value==="Producer"?(m("licenseDetailProducer",!0),m("licenseDetailConsumer",!1),m("licenseDetailCollector",!1),m("licenseDetailRecycler",!1)):b.value==="Consumer"&&(m("licenseDetailProducer",!1),m("licenseDetailConsumer",!0),m("licenseDetailCollector",!1),m("licenseDetailRecycler",!1)),b.value==="Collector"&&(m("licenseDetailProducer",!1),m("licenseDetailConsumer",!1),m("licenseDetailCollector",!0),m("licenseDetailRecycler",!1)),b.value==="Recycler"&&(m("licenseDetailProducer",!1),m("licenseDetailConsumer",!1),m("licenseDetailCollector",!1),m("licenseDetailRecycler",!0))}}),b.label]},b.value))]})})})})]})},Na=[{value:"Recycler",label:"Recycler"},{value:"Landfill Site",label:"Landfill Site"},{value:"Incinerators",label:"Incinerators"}],Sa=({control:t,errors:s,readOnly:i=!1})=>{var B,g,C,j,T,_;const{fields:P,append:m,remove:y}=Oe({control:t||{},name:"selectedCategoriesCollector"}),D=(l,N)=>{if(l)m({category:N,address:""});else{const F=P.findIndex(q=>q.category===N);F!==-1&&y(F)}},b=ee({control:t,name:"registration_required_for_other",defaultValue:[]});return e.jsxs(X,{children:[e.jsx("h4",{className:"mb-6",children:"Detail - Collector"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(w,{label:"Categories of Single Use Plastics*",invalid:!!s.registration_required_for,errorMessage:(B=s.registration_required_for)==null?void 0:B.message,children:e.jsx(v,{name:"registration_required_for",control:t,render:({field:l})=>e.jsxs(S.Group,{value:l.value||[],onChange:N=>l.onChange(N),className:"flex flex-col gap-2",children:[e.jsx(S,{value:"Carry bags",children:"Carry Bags (having thickness not less than 75 micron and not less than 12 x 16 inch in size)"}),e.jsx(S,{value:"Packaging except food",children:"Packaging (Multilayered and others) except food and pharmaceutical products (having thickness not less than 40 micron)"}),e.jsx(S,{value:"Hospital Products",children:"Hospital Products & Waste Disposal Bags (Non-Risk) (having thickness not less than 15 micron)"})]})})}),e.jsx(w,{label:"Categories for Other Plastics",invalid:!!s.registration_required_for_other,errorMessage:(g=s.registration_required_for_other)==null?void 0:g.message,children:e.jsx(v,{name:"registration_required_for_other",control:t,render:({field:l})=>e.jsxs(S.Group,{value:l.value||[],onChange:N=>l.onChange(N),className:"flex flex-col gap-2",children:[e.jsx(S,{value:"Plastic Utensils",children:"Plastic Utensils (Box, Bottle, Bin, Bowel, Tray etc.)"}),e.jsx(S,{value:"Plastic Pipes & Fittings",children:"Plastic Pipes (Flexible, Rigid, etc.) & Fittings"}),e.jsx(S,{value:"PET Bottles",children:"PET Bottles"}),e.jsx(S,{value:"Plastic Furniture",children:"Plastic Furnitures (Chair, Table etc.)"}),e.jsx(S,{value:"Plastic Sheet",children:"Plastic Sheets & Films"}),e.jsx(S,{value:"Others",children:"Others"}),b.includes("Others")&&e.jsx(v,{name:"registration_required_for_other_other_text",control:t,render:({field:N})=>e.jsx(V,{...N,type:"text",placeholder:"Enter other categories",onChange:F=>N.onChange(F.target.value)})})]})})})]}),e.jsx("div",{className:"mb-4",children:e.jsx(Ne,{textAlign:"left"})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(w,{label:"Average Collection (Kg per day)*",invalid:!!s.total_capacity_value_collector,errorMessage:(C=s.total_capacity_value_collector)==null?void 0:C.message,children:e.jsx(v,{name:"total_capacity_value_collector",control:t,render:({field:l})=>e.jsx(V,{...l,type:"number",placeholder:"Enter Average Collection in numbers (Kg per day)",onChange:N=>l.onChange(N.target.value)})})}),e.jsx(w,{label:"No. of vehicles for Collection",invalid:!!s.number_of_vehicles,errorMessage:(j=s.number_of_vehicles)==null?void 0:j.message,children:e.jsx(v,{name:"number_of_vehicles",control:t,render:({field:l})=>e.jsx(V,{...l,type:"number",placeholder:"Enter No. of vehicles in numbers",onChange:N=>l.onChange(N.target.value)})})}),e.jsx(w,{label:"No. of persons for Collection",invalid:!!s.number_of_persons,errorMessage:(T=s.number_of_persons)==null?void 0:T.message,children:e.jsx(v,{name:"number_of_persons",control:t,render:({field:l})=>e.jsx(V,{...l,type:"number",placeholder:"Enter No. of persons for Collection in numbers",onChange:N=>l.onChange(N.target.value)})})})]}),e.jsx("div",{className:"grid md:grid-cols-1 gap-4",children:e.jsx(w,{label:"Source of Disposal",invalid:!!s.selectedCategoriesCollector,errorMessage:(_=s.selectedCategoriesCollector)==null?void 0:_.message,children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 w-full",children:Na.map(l=>{var q;const N=P.findIndex(I=>I.category===l.value),F=N!==-1;return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(S,{value:l.value,checked:F,onChange:I=>D(I,l.value),className:"flex-shrink-0",children:l.label}),F&&e.jsx("div",{className:"flex-1",children:e.jsx(v,{name:`selectedCategoriesCollector.${N}.address`,control:t,defaultValue:((q=P[N])==null?void 0:q.address)||"",render:({field:I})=>e.jsx(V,{...I,placeholder:"Address",className:"flex-1 min-w-0"})})})]},l.value)})})})})]})},Ke=d.createContext({}),wa=Ke.Provider,ze=d.forwardRef((t,s)=>{const{name:i,disabled:P,value:m,onChange:y,radioClass:D}=d.useContext(Ke),{children:b,className:B,checked:g,radioClass:C,defaultChecked:j,disabled:T=P,labelRef:_,name:l=i,onChange:N,readOnly:F,value:q,...I}=t,u=()=>typeof m<"u"?m===q:g,[h,p]=d.useState(u()),f=D||"text-primary",o=d.useMemo(()=>typeof m<"u"?{checked:h}:{checked:g,defaultChecked:j},[h,g,j,m]),k=d.useCallback(Q=>{T||F||(y==null||y(q,Q),N==null||N(q,Q))},[T,p,N,q,y,m,F]);d.useEffect(()=>{const Q=u();h!==Q&&p(Q)},[q,g,m]);const $=`radio peer ${f}`,O=T&&"disabled",re=qe("radio-label",T&&"disabled",B);return e.jsxs("label",{ref:_,className:re,children:[e.jsxs("span",{className:"radio-wrapper relative",children:[e.jsx("input",{ref:s,type:"radio",className:qe($,O,C),disabled:T,value:q,name:l,readOnly:F,onChange:k,...o,...I}),e.jsx("svg",{viewBox:"0 0 16 16",className:"h-4 w-4 stroke-neutral fill-neutral opacity-0 peer-checked:opacity-100 pointer-events-none absolute top-2/4 left-2/4 -translate-y-2/4 -translate-x-2/4 mt-[0.75px]",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("circle",{cx:"8",cy:"8",r:"3"})})]}),b?e.jsx("span",{className:qe(T?"opacity-50":""),children:b}):null]})});ze.displayName="Radio";const He=d.forwardRef((t,s)=>{const{radioClass:i,disabled:P,name:m,onChange:y,value:D,vertical:b=!1,className:B,...g}=t,[C,j]=d.useState(D);d.useEffect(()=>{D!==C&&j(D)},[D]);const T=d.useCallback((N,F)=>{j(N),y==null||y(N,F)},[y,j]),_=d.useMemo(()=>({vertical:b,name:m,value:typeof C>"u"?null:C,radioClass:i,disabled:P,onChange:T}),[P,T,b,m,i,C]),l=ca("radio-group",b&&"vertical",B);return e.jsx(wa,{value:_,children:e.jsx("div",{ref:s,className:l,...g,children:t.children})})});He.displayName="RadioGroup";const H=ze;H.Group=He;const Pa=({control:t,errors:s,readOnly:i=!1})=>{var T,_,l,N,F,q,I,u;const[P,m]=d.useState([]),[y,D]=d.useState([]),b=ee({control:t,name:"registration_required_for",defaultValue:[]}),B=ee({control:t,name:"registration_required_for_other",defaultValue:[]}),g=ee({control:t,name:"provision_waste_disposal_bins",defaultValue:""}),C=(h,p)=>{D(p);const f=p.filter(o=>!P.includes(o));f.length>0&&m(o=>[...o,...f])},j=ee({control:t,name:"PackagingItems",defaultValue:[]});return d.useEffect(()=>{Array.isArray(j)?(m(j),D(j)):console.warn("PackagingItems is not an array:",j)},[j]),console.log("w_waste_disposal_provision",g),e.jsxs(X,{children:[e.jsx("h4",{className:"mb-6",children:"Detail - Stockist/Distributor/Supplier"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(w,{label:"Categories of Single Use Plastics*",invalid:!!s.registration_required_for,errorMessage:(T=s.registration_required_for)==null?void 0:T.message,children:e.jsx(v,{name:"registration_required_for",control:t,render:({field:h})=>e.jsxs(S.Group,{value:h.value||[],onChange:p=>h.onChange(p),className:"flex flex-col gap-2",children:[e.jsx(S,{value:"Carry bags",readOnly:i,children:"Carry Bags (having thickness not less than 75 micron and not less than 12 x 16 inch in size)"}),e.jsx(S,{value:"Packaging except food",readOnly:i,children:"Packaging (Multilayered and others) except food and pharmaceutical products (having thickness not less than 40 micron)"}),e.jsx(S,{value:"Hospital Products",readOnly:i,children:"Hospital Products & Waste Disposal Bags (Non-Risk) (having thickness not less than 15 micron)"})]})})}),e.jsx(w,{label:"Categories for Other Plastics",invalid:!!s.registration_required_for_other,errorMessage:(_=s.registration_required_for_other)==null?void 0:_.message,children:e.jsx(v,{name:"registration_required_for_other",control:t,render:({field:h})=>e.jsxs(S.Group,{value:h.value||[],onChange:p=>h.onChange(p),className:"flex flex-col gap-2",children:[e.jsx(S,{value:"Plastic Utensils",readOnly:i,children:"Plastic Utensils (Box, Bottle, Bin, Bowel, Tray etc.)"}),e.jsx(S,{value:"Plastic Pipes & Fittings",readOnly:i,children:"Plastic Pipes (Flexible, Rigid, etc.) & Fittings"}),e.jsx(S,{value:"PET Bottles",readOnly:i,children:"PET Bottles"}),e.jsx(S,{value:"Plastic Furniture",readOnly:i,children:"Plastic Furnitures (Chair, Table etc.)"}),e.jsx(S,{value:"Plastic Sheet",readOnly:i,children:"Plastic Sheets & Films"}),e.jsx(S,{value:"Others",readOnly:i,children:"Others"}),B.includes("Others")&&e.jsx(v,{name:"registration_required_for_other_other_text",control:t,render:({field:p})=>e.jsx(V,{...p,type:"text",placeholder:"Enter other categories",readOnly:i,onChange:f=>p.onChange(f.target.value)})})]})})}),b.includes("Packaging except food")?e.jsxs("div",{children:[e.jsx(w,{label:"Additional Options for Packaging",invalid:!!s.plain_plastic_Sheets_for_food_wrapping,errorMessage:(l=s.plain_plastic_Sheets_for_food_wrapping)==null?void 0:l.message,children:e.jsx(v,{name:"plain_plastic_Sheets_for_food_wrapping",control:t,render:({field:h})=>e.jsxs(S.Group,{value:h.value||[],onChange:p=>h.onChange(p),children:[e.jsx(S,{value:"Plain Plastic Sheets for food wrapping",readOnly:i,children:"Plain Plastic Sheets for food wrapping"}),e.jsx(S,{value:"Other",readOnly:i,children:"Any Others"})]})})}),e.jsx("div",{}),e.jsx(w,{label:"Add List + (If desired item is not in the list, then type and press enter to add)",invalid:!!s.PackagingItems,errorMessage:(N=s.PackagingItems)==null?void 0:N.message,children:e.jsx(v,{name:"PackagingItems",control:t,render:({field:h})=>e.jsx(Ye,{multiple:!0,freeSolo:!0,options:P,value:y,readOnly:i,onChange:(p,f)=>{h.onChange(f),C(p,f)},renderTags:(p,f)=>p.map((o,k)=>e.jsx(Ue,{variant:"outlined",label:o,...f({index:k})})),renderInput:p=>e.jsx(Je,{...p,variant:"outlined",label:"Options",placeholder:"Add or select options"})})})})]}):null]}),e.jsx("div",{className:"mb-4",children:e.jsx(Ne,{textAlign:"left"})}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:e.jsx(w,{label:"Average Sale (Kg per day)*",invalid:!!s.consumption,errorMessage:(F=s.consumption)==null?void 0:F.message,children:e.jsx(v,{name:"consumption",control:t,render:({field:h})=>e.jsx(V,{type:"number",placeholder:"Average Sale in numbers (Kg per day)",readOnly:i,...h})})})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(w,{label:"Provision of Waste Disposal Bins*",invalid:!!s.provision_waste_disposal_bins,errorMessage:(q=s.provision_waste_disposal_bins)==null?void 0:q.message,children:e.jsx(v,{name:"provision_waste_disposal_bins",control:t,render:({field:h})=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx(H,{...h,checked:h.value==="Yes",value:"Yes",readOnly:i,onChange:()=>h.onChange("Yes"),children:"Yes"}),e.jsx(H,{...h,checked:h.value==="No",value:"No",readOnly:i,onChange:()=>h.onChange("No"),children:"No"})]})})}),g==="Yes"&&e.jsx(w,{label:"No. of Waste Disposibal Bins",invalid:!!s.no_of_waste_disposible_bins,errorMessage:(I=s.no_of_waste_disposible_bins)==null?void 0:I.message,children:e.jsx(v,{name:"no_of_waste_disposible_bins",control:t,render:({field:h})=>e.jsx(V,{type:"number",placeholder:"No. of Waste Disposibal Bins",readOnly:i,...h})})}),e.jsx(w,{label:"Whether Segregated Plastics are being handed over to registered Re-Cyclers or Collectors?*",invalid:!!s.segregated_plastics_handed_over_to_registered_recyclers,errorMessage:(u=s.segregated_plastics_handed_over_to_registered_recyclers)==null?void 0:u.message,children:e.jsx(v,{name:"segregated_plastics_handed_over_to_registered_recyclers",control:t,render:({field:h})=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx(H,{...h,checked:h.value==="Yes",value:"Yes",readOnly:i,onChange:()=>h.onChange("Yes"),children:"Yes"}),e.jsx(H,{...h,checked:h.value==="No",value:"No",readOnly:i,onChange:()=>h.onChange("No"),children:"No"})]})})})]})]})},Ba=({control:t,errors:s,readOnly:i=!1})=>{var _,l,N,F,q,I,u,h,p,f;d.useState(""),d.useState([]),d.useState(["Kg Per Day","Liters Per Day","Tons Per Month"]),d.useState(""),d.useState(["Kg Per Day","Liters Per Day","Tons Per Month"]),d.useState(""),d.useState([]),d.useState([]),d.useState(["By-product X","By-product Y"]),d.useState([]);const P=ee({control:t,name:"registration_required_for",defaultValue:[]}),m=ee({control:t,name:"registration_required_for_other",defaultValue:[]}),y=ee({control:t,name:"PackagingItems",defaultValue:[]}),[D,b]=d.useState([]),[B,g]=d.useState([]);d.useEffect(()=>{Array.isArray(y)?(b(y),g(y)):console.warn("PackagingItems is not an array:",y)},[y]);const C=(o,k)=>{g(k);const $=k.filter(O=>!D.includes(O));$.length>0&&b(O=>[...O,...$])},j=o=>{if(!o)return"";const[k,$,O]=o.split("-");return`${O}/${$}/${k}`},T=o=>{const[k,$,O]=o.split("/");return`${O}-${$}-${k}`};return e.jsxs(X,{children:[e.jsx("h4",{className:"mb-6",children:"Detail - Producer"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(w,{label:"Categories of Single Use Plastics*",invalid:!!s.registration_required_for,errorMessage:(_=s.registration_required_for)==null?void 0:_.message,children:e.jsx(v,{name:"registration_required_for",control:t,render:({field:o})=>e.jsxs(S.Group,{value:o.value||[],onChange:k=>o.onChange(k),className:"flex flex-col gap-2",children:[e.jsx(S,{value:"Carry bags",readOnly:i,children:"Carry Bags (having thickness not less than 75 micron and not less than 12 x 16 inch in size)"}),e.jsx(S,{value:"Packaging except food",readOnly:i,children:"Packaging (Multilayered and others) except food and pharmaceutical products (having thickness not less than 40 micron)"}),e.jsx(S,{value:"Hospital Products",readOnly:i,children:"Hospital Products & Waste Disposal Bags (Non-Risk) (having thickness not less than 15 micron)"})]})})}),e.jsx(w,{label:"Categories for Other Plastics",invalid:!!s.registration_required_for_other,errorMessage:(l=s.registration_required_for_other)==null?void 0:l.message,children:e.jsx(v,{name:"registration_required_for_other",control:t,render:({field:o})=>e.jsxs(S.Group,{value:o.value||[],onChange:k=>o.onChange(k),className:"flex flex-col gap-2",children:[e.jsx(S,{value:"Plastic Utensils",readOnly:i,children:"Plastic Utensils (Box, Bottle, Bin, Bowel, Tray etc.)"}),e.jsx(S,{value:"Plastic Pipes & Fittings",readOnly:i,children:"Plastic Pipes (Flexible, Rigid, etc.) & Fittings"}),e.jsx(S,{value:"PET Bottles",readOnly:i,children:"PET Bottles"}),e.jsx(S,{value:"Plastic Furniture",readOnly:i,children:"Plastic Furnitures (Chair, Table etc.)"}),e.jsx(S,{value:"Plastic Sheet",readOnly:i,children:"Plastic Sheets & Films"}),e.jsx(S,{value:"Others",readOnly:i,children:"Others"}),m.includes("Others")&&e.jsx(v,{name:"registration_required_for_other_other_text",control:t,render:({field:k})=>e.jsx(V,{...k,type:"text",placeholder:"Enter other categories",readOnly:i,onChange:$=>k.onChange($.target.value)})})]})})}),P.includes("Packaging except food")?e.jsxs("div",{children:[e.jsx(w,{label:"Additional Options for Packaging",invalid:!!s.plain_plastic_Sheets_for_food_wrapping,errorMessage:(N=s.plain_plastic_Sheets_for_food_wrapping)==null?void 0:N.message,children:e.jsx(v,{name:"plain_plastic_Sheets_for_food_wrapping",control:t,render:({field:o})=>e.jsxs(S.Group,{value:o.value||[],onChange:k=>o.onChange(k),children:[e.jsx(S,{value:"Plain Plastic Sheets for food wrapping",readOnly:i,children:"Plain Plastic Sheets for food wrapping"}),e.jsx(S,{value:"Other",readOnly:i,children:"Any Others"})]})})}),e.jsx("div",{}),e.jsx(w,{label:"Add List + (If desired item is not in the list, then type and press enter to add)",invalid:!!s.PackagingItems,errorMessage:(F=s.PackagingItems)==null?void 0:F.message,children:e.jsx(v,{name:"PackagingItems",control:t,render:({field:o})=>e.jsx(Ye,{multiple:!0,freeSolo:!0,options:D,value:B,readOnly:i,onChange:(k,$)=>{o.onChange($),C(k,$)},renderTags:(k,$)=>k.map((O,ae)=>e.jsx(Ue,{variant:"outlined",label:O,...$({index:ae})})),renderInput:k=>e.jsx(Je,{...k,variant:"outlined",label:"Options",placeholder:"Add or select options"})})})})]}):null]}),e.jsx("div",{className:"mb-4",children:e.jsx(Ne,{textAlign:"left"})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(w,{label:"Number of Machines*",invalid:!!s.number_of_machines,errorMessage:(q=s.number_of_machines)==null?void 0:q.message,children:e.jsx(v,{name:"number_of_machines",control:t,render:({field:o})=>e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(H,{...o,value:"5",checked:o.value==="5",readOnly:i,onChange:()=>o.onChange("5"),children:"Upto 5 machines"}),e.jsx(H,{...o,value:"10",checked:o.value==="10",readOnly:i,onChange:()=>o.onChange("10"),children:"From 6 to 10 machines"}),e.jsx(H,{...o,value:"11",checked:o.value==="11",readOnly:i,onChange:()=>o.onChange("11"),children:"More than 10 machines"})]})})}),e.jsx(w,{label:"Average Production Capacity (Kg per day)*",invalid:!!s.total_capacity_value,errorMessage:(I=s.total_capacity_value)==null?void 0:I.message,children:e.jsx(v,{name:"total_capacity_value",control:t,render:({field:o})=>e.jsx(V,{...o,type:"number",placeholder:"Enter Average Production Capacity in numbers (Kg per day)",readOnly:i,onChange:k=>o.onChange(k.target.value)})})}),e.jsx(w,{label:"Date of Business Setting Up",invalid:!!s.date_of_setting_up,errorMessage:(u=s.date_of_setting_up)==null?void 0:u.message,children:e.jsx(v,{name:"date_of_setting_up",control:t,render:({field:o})=>e.jsx(V,{...o,type:"date",value:o.value?T(j(o.value)):"",readOnly:i,onChange:k=>o.onChange(k.target.value),placeholder:"DD/MM/YYYY"})})}),e.jsx(w,{label:"Averrage Waste Generated (Kg per day)",invalid:!!s.total_waste_generated_value,errorMessage:(h=s.total_waste_generated_value)==null?void 0:h.message,children:e.jsx(v,{name:"total_waste_generated_value",control:t,render:({field:o})=>e.jsx(V,{...o,type:"number",placeholder:"Enter Waste Generated in numbers",readOnly:i,onChange:k=>o.onChange(k.target.value)})})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(w,{label:"Waste Storage Capacity*",invalid:!!s.has_waste_storage_capacity,errorMessage:(p=s.has_waste_storage_capacity)==null?void 0:p.message,children:e.jsx(v,{name:"has_waste_storage_capacity",control:t,rules:{required:"Waste storage capacity is required"},render:({field:o})=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx(H,{...o,checked:o.value==="Available",value:"Available",readOnly:i,onChange:()=>o.onChange("Available"),children:"Available"}),e.jsx(H,{...o,checked:o.value==="Not Available",value:"Not Available",readOnly:i,onChange:()=>o.onChange("Not Available"),children:"Not Available"})]})})}),e.jsx(w,{label:"Waste Disposal Provision*",invalid:!!s.waste_disposal_provision,errorMessage:(f=s.waste_disposal_provision)==null?void 0:f.message,children:e.jsx(v,{name:"waste_disposal_provision",control:t,rules:{required:"Waste storage capacity is required"},render:({field:o})=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx(H,{...o,checked:o.value==="Available",value:"Available",readOnly:i,onChange:()=>o.onChange("Available"),children:"Available"}),e.jsx(H,{...o,checked:o.value==="Not Available",value:"Not Available",readOnly:i,onChange:()=>o.onChange("Not Available"),children:"Not Available"})]})})})]})]})},qa=[{value:"Carry bags",label:"Carry Bags"},{value:"Packaging except food",label:"Packaging"},{value:"Plastic Utensils",label:"Plastic Utensils (Box, Bottle, Bin, Bowl, Tray etc.)"},{value:"Plastic Pipes & Fittings",label:"Plastic Pipes (Flexible, Rigid, etc.) & Fittings"},{value:"PET Bottles",label:"PET Bottles"},{value:"Plastic Furniture",label:"Plastic Furniture (Chair, Table etc.)"},{value:"Plastic Sheet",label:"Plastic Sheets & Films"},{value:"Others",label:"Others"}],ka=({control:t,errors:s,readOnly:i=!1})=>{var g,C,j,T;const{fields:P,append:m,remove:y}=Oe({control:t||{},name:"selectedCategories"}),D=(_,l)=>{if(_)m({category:l,wasteCollection:0,wasteDisposal:0});else{const N=P.findIndex(F=>F.category===l);N!==-1&&y(N)}},b=ee({control:t,name:"has_adequate_pollution_control_systems",defaultValue:"No"}),B=ee({control:t,name:"selectedCategories",defaultValue:[]});return e.jsxs(X,{children:[e.jsx("h4",{className:"mb-6",children:"Detail - Recycler"}),e.jsx("div",{className:"w-full",children:e.jsxs(w,{label:"Categories of plastic collected for recycling*",invalid:!!s.selectedCategories,errorMessage:(g=s.selectedCategories)==null?void 0:g.message,className:"w-full",children:[qa.map(_=>e.jsxs("div",{className:"flex items-center gap-4 mb-5 w-full",children:[e.jsx(S,{value:_.value,checked:P.some(l=>l.category===_.value),readOnly:i,onChange:l=>D(l,_.value),className:"flex-grow w-1/2",children:_.label}),P.some(l=>l.category===_.value)&&e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("label",{className:"text-sm text-gray-700",children:"Average Waste Collection (Kg per day)"}),e.jsx(v,{name:`selectedCategories.${P.findIndex(l=>l.category===_.value)}.wasteCollection`,control:t,render:({field:l})=>e.jsx(V,{type:"number",placeholder:"Enter Average Waste Collection in numbers (Kg per day)",readOnly:i,...l,className:"w-1/2"})})]}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("label",{className:"text-sm text-gray-700",children:"Average Waste Disposal (Kg per day)"}),e.jsx(v,{name:`selectedCategories.${P.findIndex(l=>l.category===_.value)}.wasteDisposal`,control:t,render:({field:l})=>e.jsx(V,{type:"number",placeholder:"Enter Average Waste Disposal in numbers (Kg per day)",readOnly:i,...l,className:"w-1/2"})})]})]})]},_.value)),B.some(_=>_.category==="Others")&&e.jsx(v,{name:"registration_required_for_other_other_text",control:t,render:({field:_})=>e.jsx(V,{..._,type:"text",className:"flex flex-col w-1/2",placeholder:"Enter other categories",onChange:l=>_.onChange(l.target.value)})})]})}),e.jsx("div",{className:"mb-4",children:e.jsx(Ne,{textAlign:"left"})}),e.jsx("div",{className:"grid md:grid-cols-1 gap-4",children:e.jsx(w,{label:"Plastic waste acquired through",invalid:!!s.registration_required_for_other,errorMessage:(C=s.registration_required_for_other)==null?void 0:C.message,children:e.jsx(v,{name:"plastic_waste_acquired_through",control:t,render:({field:_})=>e.jsxs(S.Group,{value:_.value||[],onChange:l=>_.onChange(l),className:"flex  gap-2",children:[e.jsx(S,{value:"Collector",readOnly:i,children:"Collector"}),e.jsx(S,{value:"Auction",readOnly:i,children:"Auction"}),e.jsx(S,{value:"Contract",readOnly:i,children:"Contract"}),e.jsx(S,{value:"Import",readOnly:i,children:"Import"})]})})})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(w,{label:"Has adequate pollution control systems or equipment to meet the standards of emission or effluent?*",invalid:!!s.has_adequate_pollution_control_systems,errorMessage:(j=s.has_adequate_pollution_control_systems)==null?void 0:j.message,children:e.jsx(v,{name:"has_adequate_pollution_control_systems",control:t,render:({field:_})=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx(H,{..._,checked:_.value==="Yes",value:"Yes",readOnly:i,onChange:()=>_.onChange("Yes"),children:"Yes"}),e.jsx(H,{..._,checked:_.value==="No",value:"No",readOnly:i,onChange:()=>_.onChange("No"),children:"No"})]})})}),b==="Yes"&&e.jsx(w,{label:"Details",invalid:!!s.pollution_control_details,errorMessage:(T=s.pollution_control_details)==null?void 0:T.message,children:e.jsx(v,{name:"pollution_control_details",control:t,render:({field:_})=>e.jsx(V,{..._,type:"text",placeholder:"Details",readOnly:i,onChange:l=>_.onChange(l.target.value)})})})]})]})},Aa=a.object({licenseType:a.string().min(1,{message:"License Type is required"})});a.object({licenseType:a.string().min(1,{message:"License Type is required"})});const Ta=a.object({registration_required_for:a.array(a.string()).optional(),registration_required_for_other:a.array(a.string()).optional(),plain_plastic_Sheets_for_food_wrapping:a.array(a.string()).optional(),PackagingItems:a.array(a.string()).optional(),consumption:a.string(),provision_waste_disposal_bins:a.enum(["Yes","No"],{errorMap:()=>({message:"Please specify provision of waste disposal bins."})}),segregated_plastics_handed_over_to_registered_recyclers:a.enum(["Yes","No"],{errorMap:()=>({message:"Please specify if segregated plastics are handed over to recyclers or collectors."})}),registration_required_for_other_other_text:a.string().optional(),no_of_waste_disposible_bins:a.coerce.number().optional()}).refine(t=>{var s,i;return console.log(t.registration_required_for),!(((s=t.registration_required_for)==null?void 0:s.length)===0&&((i=t.registration_required_for_other)==null?void 0:i.length)===0)},{message:"You must provide either Categories of Single Use Plastics or Categories for Other Plastics.",path:["registration_required_for"]}),Fa=a.object({licenseType:a.string().min(1,{message:"License Type is required"}),registration_required_for:a.array(a.string()).optional(),registration_required_for_other:a.array(a.string()).optional(),selectedCategoriesCollector:a.array(a.object({category:a.string().optional(),address:a.string().optional()}).optional()).optional(),total_capacity_value_collector:a.coerce.number().positive({message:"Collection (Kg per day) must be a positive number"}),number_of_vehicles:a.coerce.number().optional(),number_of_persons:a.coerce.number().optional(),registration_required_for_other_other_text:a.string().optional()}).refine(t=>{var s,i;return console.log(t.registration_required_for),!(((s=t.registration_required_for)==null?void 0:s.length)===0&&((i=t.registration_required_for_other)==null?void 0:i.length)===0)},{message:"You must provide either Categories of Single Use Plastics or Categories for Other Plastics.",path:["registration_required_for"]}),Ia=a.object({registration_required_for:a.array(a.string()).optional(),registration_required_for_other:a.array(a.string()).optional(),plain_plastic_Sheets_for_food_wrapping:a.array(a.string()).optional(),PackagingItems:a.array(a.string()).optional(),single_use_plastic_items:a.array(a.string()).optional(),total_capacity_value:a.string().refine(t=>!isNaN(parseFloat(t))&&parseFloat(t)>0,{message:"Total Capacity Value must be a positive number."}),number_of_machines:a.string().min(1,{message:"Number of Machines are required."}),total_capacity_unit:a.string().optional(),registration_number:a.string().optional(),registration_date:a.string().optional(),date_of_setting_up:a.string().optional(),date_of_commencement_of_production:a.string().optional(),flow_diagram:a.union([a.instanceof(File),a.null(),a.undefined()]).optional().refine(t=>t==null?!0:t.size<=10*1024*1024,{message:"Flow Diagram must be a file smaller than 10 MB."}).optional(),is_compliance_with_rules:a.boolean().optional(),valid_consent_permit:a.boolean().optional(),consent_permit:a.union([a.instanceof(File),a.null(),a.undefined()]).optional().refine(t=>t==null?!0:t.size<=10*1024*1024,{message:"Consent Permit must be a file smaller than 10 MB."}).optional(),total_waste_generated_value:a.string().optional(),has_waste_storage_capacity:a.string().min(1,{message:"Waste Storage Capacity is required"}),waste_disposal_provision:a.string().min(1,{message:"Waste Disposal Provision is required"}),action_plan:a.union([a.instanceof(File),a.null(),a.undefined()]).optional().refine(t=>t==null?!0:t.size<=10*1024*1024,{message:"Action Plan must be a file smaller than 10 MB."}).optional(),products_list:a.array(a.string()).optional(),by_products_list:a.array(a.string()).optional(),registration_required_for_other_other_text:a.string().optional()}).refine(t=>{var s,i;return console.log(t.registration_required_for),!(((s=t.registration_required_for)==null?void 0:s.length)===0&&((i=t.registration_required_for_other)==null?void 0:i.length)===0)},{message:"You must provide either Categories of Single Use Plastics or Categories for Other Plastics.",path:["registration_required_for"]}),Ea=a.object({licenseType:a.enum(["Producer","Consumer","Recycler","Collector"],{errorMap:()=>({message:"License Type is required"})}),selectedCategories:a.array(a.object({category:a.string().min(1,{message:"Category is required"}),wasteCollection:a.string().min(1,{message:"Waste Collection is required"}),wasteDisposal:a.string().min(1,{message:"Waste Disposal is required"})})).min(1,{message:"At least one category must be selected"}),plastic_waste_acquired_through:a.array(a.string()).optional(),has_adequate_pollution_control_systems:a.enum(["Yes","No"],{errorMap:()=>({message:"Please specify whether pollution control systems are adequate"})}),pollution_control_details:a.string().optional(),registration_required_for_other_other_text:a.string().optional()}),Ma=t=>{const{applicantDetail:s,updateApplicantDetail:i,resetApplicantDetail:P,businessDetail:m,updateBusinessDetail:y,resetBusinessDetail:D,businessDetailIndividual:b,updateBusinessDetailIndividual:B,resetBusinessDetailIndividual:g,businessEntity:C,updateBusinessEntity:j,resetBusinessEntity:T,resetAll:_,completedSections:l,getValuesFromStateBusinessEntity:N,markSectionAsCompleted:F}=ie();console.log(l);const{onFormSubmit:q,defaultValues:I={},newCustomer:u=!1,children:h,readOnly:p}=t,{handleSubmit:f,reset:o,formState:{errors:k},control:$}=xe({defaultValues:{banAccount:!1,accountVerified:!0,...I},resolver:je(l.includes("licenseDetailProducer")?Ia:l.includes("licenseDetailConsumer")?Ta:l.includes("licenseDetailCollector")?Fa:l.includes("licenseDetailRecycler")?Ea:Aa)});d.useEffect(()=>{fe(I)||o(I),console.log("its in useEffect")},[JSON.stringify(I)]);const O=ae=>{console.log("its here k1"),q==null||q(ae)};return e.jsxs(be,{className:"flex w-full h-full",containerClassName:"flex flex-col w-full justify-between",onSubmit:f(O),children:[e.jsx(Z,{children:e.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:e.jsxs("div",{className:"gap-4 flex flex-col flex-auto",children:[e.jsx(Da,{control:$,errors:k,readOnly:p}),l.includes("licenseDetailProducer")&&e.jsx(Ba,{control:$,errors:k,readOnly:p}),l.includes("licenseDetailConsumer")&&e.jsx(Pa,{control:$,errors:k,readOnly:p}),l.includes("licenseDetailRecycler")&&e.jsx(ka,{control:$,errors:k,readOnly:p}),l.includes("licenseDetailCollector")&&e.jsx(Sa,{control:$,errors:k,readOnly:p})]})})}),e.jsx(ge,{children:h})]})},La=({control:t,errors:s,readOnly:i=!1})=>{var u,h;d.useState(""),d.useState([]),d.useState(["Kg Per Day","Liters Per Day","Tons Per Month"]),d.useState(""),d.useState(["Kg Per Day","Liters Per Day","Tons Per Month"]),d.useState(""),d.useState(["Product A","Product B","Product C"]),d.useState([]),d.useState(["By-product X","By-product Y"]),d.useState([]),d.useState([]),d.useState([]);const{applicantDetail:P,updateApplicantDetail:m,resetApplicantDetail:y,businessDetail:D,updateBusinessDetail:b,resetBusinessDetail:B,businessDetailIndividual:g,updateBusinessDetailIndividual:C,resetBusinessDetailIndividual:j,businessEntity:T,updateBusinessEntity:_,resetBusinessEntity:l,resetAll:N,completedSections:F,getValuesFromStateBusinessEntity:q,markSectionAsCompleted:I}=ie();return console.log("has_identity_document"),console.log("has_identity_document",P.has_identity_document),e.jsxs(X,{children:[e.jsx("h4",{className:"mb-6",children:"Document"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(w,{label:"CNIC (Front side + Back side) / Utiility Bills / Passport / Driving License (Any document indicating name & address)*",invalid:!!s.flow_diagram,errorMessage:(u=s.flow_diagram)==null?void 0:u.message,children:e.jsx(v,{name:"flow_diagram",control:t,render:({field:p})=>e.jsx(V,{type:"file",accept:".pdf,.png,.jpg,.jpeg",disabled:i,onChange:f=>p.onChange(f.target.files[0]||null)})})}),e.jsx("div",{}),e.jsx("label",{children:"If both front side and back side of CNIC are not uploaded, then please upload Back Side of CNIC as well"}),e.jsx("div",{}),e.jsx(w,{label:"CNIC (Back side)",invalid:!!s.flow_diagram,errorMessage:(h=s.flow_diagram)==null?void 0:h.message,children:e.jsx(v,{name:"flow_diagram2",control:t,render:({field:p})=>e.jsx(V,{type:"file",accept:".pdf,.png,.jpg,.jpeg",disabled:i,onChange:f=>p.onChange(f.target.files[0]||null)})})})]}),e.jsx("div",{children:P.has_identity_document&&e.jsx("label",{children:"Identity Document is already Uploaded!"})})]})},Ra=a.object({flow_diagram:a.instanceof(File).refine(t=>t.size<=10*1024*1024,{message:"File must be smaller than 10 MB."}).optional(),flow_diagram2:a.instanceof(File).refine(t=>t.size<=10*1024*1024,{message:"File must be smaller than 10 MB."}).optional()}),Va=t=>{const{onFormSubmit:s,defaultValues:i={},newCustomer:P=!1,children:m,readOnly:y}=t,{handleSubmit:D,reset:b,formState:{errors:B},control:g}=xe({defaultValues:{banAccount:!1,accountVerified:!0,...i},resolver:je(Ra)});d.useEffect(()=>{fe(i)||b(i),console.log("its in useEffect")},[JSON.stringify(i)]);const C=j=>{console.log("its here k1"),s==null||s(j)};return e.jsxs(be,{className:"flex w-full h-full",containerClassName:"flex flex-col w-full justify-between",onSubmit:D(C),children:[e.jsx(Z,{children:e.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:e.jsx("div",{className:"gap-4 flex flex-col flex-auto",children:e.jsx(La,{control:g,errors:B,readOnly:y})})})}),e.jsx(ge,{children:m})]})},$a=({control:t,errors:s,register:i,readOnly:P=!1})=>{var ve;d.useState(""),d.useState([]),d.useState(["Kg Per Day","Liters Per Day","Tons Per Month"]),d.useState(""),d.useState(["Kg Per Day","Liters Per Day","Tons Per Month"]),d.useState(""),d.useState(["Product A","Product B","Product C"]),d.useState([]),d.useState(["By-product X","By-product Y"]),d.useState([]),d.useState([]),d.useState([]);const[m,y]=d.useState(!1),{applicantDetail:D,updateApplicantDetail:b,resetApplicantDetail:B,businessDetail:g,updateBusinessDetail:C,resetBusinessDetail:j,businessDetailIndividual:T,updateBusinessDetailIndividual:_,resetBusinessDetailIndividual:l,businessEntity:N,updateBusinessEntity:F,resetBusinessEntity:q,resetAll:I,completedSections:u,getValuesFromStateBusinessEntity:h,getValuesFromLicenseDetail:p,updateLicenseDetail:f,updateLicenseDetailCollector:o,updateLicenseDetailConsumer:k,updateLicenseDetailProducer:$,updateLicenseDetailRecycler:O,resetLicenseDetail:ae,resetLicenseDetailProducer:re}=ie(),Q=async()=>{const Y=await L.get(`/pmc/chalan-pdf?ApplicantId=${D.id}`,{responseType:"blob"}),K=window.URL.createObjectURL(new Blob([Y.data])),M=document.createElement("a");M.href=K,M.setAttribute("download","Fee Challan.pdf"),document.body.appendChild(M),M.click(),document.body.removeChild(M);const se=new FormData;se.append("application_status","Fee Challan"),await L.patch(`/pmc/applicant-detail/${D.id}/`,se,{headers:{"Content-Type":"multipart/form-data"}}),b({applicationStatus:"Fee Challan"})},Se=async()=>{const Y=await L.get(`/pmc/receipt-pdf?ApplicantId=${D.id}`,{responseType:"blob"}),K=window.URL.createObjectURL(new Blob([Y.data])),M=document.createElement("a");M.href=K,M.setAttribute("download","Receipt.pdf"),document.body.appendChild(M),M.click(),document.body.removeChild(M)},Fe=async()=>{y(!0);try{const K=(await L.get(`/pmc/generate-psid?applicant_id=${D.id}`,{responseType:"text"})).data,M=window.open("","_blank");M.document.write(K),M.document.close(),b({applicationStatus:"Fee Challan"})}catch(Y){if(console.error(Y),Y.response&&Y.response.data){const K=Y.response.data,M=window.open("","_blank");M.document.write(K),M.document.close()}else alert("An unexpected error occurred. Please try again.")}finally{y(!1)}},te=async()=>{y(!0);try{const K=(await L.get(`/pmc/check-psid-status?applicant_id=${D.id}`,{responseType:"text"})).data,M=window.open("","_blank");M.document.write(K),M.document.close()}catch(Y){if(console.error(Y),Y.response&&Y.response.data){const K=Y.response.data,M=window.open("","_blank");M.document.write(K),M.document.close()}else alert("An unexpected error occurred. Please try again.")}finally{y(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs(X,{hidden:!0,children:[e.jsx("h4",{className:"mb-4",children:"Payment"}),e.jsxs("div",{className:"grid md:grid-cols-1 gap-4 mb-1",children:[e.jsx("div",{style:{color:"blue",fontWeight:"bold",margin:"10px 0"},children:"Please have a look at your application detail prior to generation of fee challan. Once your fee challan is generated, this application will not be amended."}),e.jsx("div",{style:{color:"blue",fontWeight:"bold",margin:"10px 0"},children:"Please submit fee challan within 7 days."})]}),e.jsxs("div",{className:"grid md:grid-cols-2 mb-1 gap-4",children:[e.jsx("div",{children:e.jsx(G,{icon:e.jsx(ke,{}),className:"ltr:mr-3 rtl:ml-3",variant:"solid",type:"button",loading:m,onClick:Q,children:"Download Fee Challan"})}),e.jsx("div",{}),e.jsx("div",{})]})]}),e.jsxs(X,{children:[e.jsx("h4",{className:"mb-4",children:"Submission of Application (Applicable only for previously generated and paid Fee Challans)"}),e.jsxs("div",{className:"grid md:grid-cols-1 gap-4 mb-1",children:[e.jsx("div",{style:{color:"red",fontWeight:"bold",margin:"10px 0"},children:"Warning: If any document other than the generated and paid challan is uploaded, it would lead to registration of FIR & arrest of applicant."}),e.jsx("img",{src:"/img/others/warning-urdu3.png",alt:"Warning Icon"})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-2",children:e.jsxs("div",{children:[e.jsx("input",{type:"hidden",...i("existingFileId"),value:String(D.has_fee_challan??"")}),e.jsx(w,{label:"Upload Paid Fee Challan Image and Submit Application*",invalid:!!s.flow_diagram,errorMessage:(ve=s.flow_diagram)==null?void 0:ve.message,children:e.jsx(v,{name:"flow_diagram",control:t,render:({field:Y})=>e.jsx(V,{type:"file",accept:"image/*",disabled:!D.is_downloaded_fee_challan,onChange:K=>{var se;const M=(se=K.target.files)==null?void 0:se[0];M?M.type.startsWith("image/")?Y.onChange(M):(alert("Please upload a valid image file (e.g., .jpg, .png)"),K.target.value=""):Y.onChange(null)}})})})]})})]}),e.jsxs(X,{children:[e.jsx("h4",{className:"mb-4",children:"Payment"}),e.jsxs("div",{className:"border border-gray-300 bg-gray-50 p-4 rounded-lg shadow-md mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-700",children:"Important Note:"}),e.jsxs("p",{className:"mt-2 text-gray-700",children:["Click the ",e.jsx("strong",{className:"text-blue-600",children:"Generate GoP PSID"})," button to obtain the PSID. After getting the PSID, follow these steps:"]}),e.jsxs("ol",{className:"list-decimal list-inside mt-3 text-gray-600",children:[e.jsx("li",{children:"Open your mobile banking app or mobile payment app."}),e.jsxs("li",{children:["Click on ",e.jsx("strong",{className:"text-blue-600",children:"Bill Payment"}),", ",e.jsx("strong",{className:"text-blue-600",children:"Add Payee"}),", then select ",e.jsx("strong",{className:"text-blue-600",children:"GoP"}),"."]}),e.jsxs("li",{children:["Enter the generated ",e.jsx("strong",{className:"text-blue-600",children:"Consumer Number / PSID"})," by this portal."]}),e.jsxs("li",{children:["Review your details carefully, save the Payee, and click ",e.jsx("strong",{className:"text-blue-600",children:"Payment"}),"."]})]}),e.jsxs("p",{className:"mt-3 text-gray-700",children:["After completing the payment, the payment status will be ",e.jsx("strong",{className:"text-blue-600",children:"automatically updated"})," in this portal. If the status is not updated, you can click the ",e.jsx("strong",{className:"text-blue-600",children:"Check PSID Payment Status"})," button to manually verify."]}),e.jsxs("p",{className:"mt-3 text-gray-700",children:["Once the payment verification is successful, the application will be ",e.jsx("strong",{className:"text-blue-600",children:"automatically submitted"}),". Go to  ",e.jsx("strong",{className:"text-blue-600",children:"My Applications"})," and come back to this application and page and you can download receipt of submission for your record."]}),e.jsxs("p",{className:"mt-3 text-gray-700",children:["Note: If you have paid fee challan, please don't generate ",e.jsx("strong",{className:"text-blue-600",children:"GoP PSID"}),", after generation of ",e.jsx("strong",{className:"text-blue-600",children:"GoP PSID"})," you will not be able to upload existing fee challan."]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 mb-1 gap-4",children:[e.jsx("div",{children:e.jsx(G,{icon:e.jsx(ke,{}),className:"ltr:mr-3 rtl:ml-3 mb-4",variant:"solid",type:"button",loading:m,onClick:Fe,children:"Generate GoP PSID"})}),D.has_fee_challan&&e.jsx("div",{children:e.jsx(G,{icon:e.jsx(le,{}),className:"ltr:mr-3 rtl:ml-3 mb-4",variant:"solid",type:"button",loading:m,onClick:Se,children:"Download Receipt"})})]})]}),e.jsxs(X,{hidden:!0,children:[e.jsx("h4",{className:"mb-4",children:"Submission of Application"}),e.jsx(G,{icon:e.jsx(ke,{}),className:"ltr:mr-3 rtl:ml-3",variant:"solid",type:"button",loading:m,onClick:te,children:"Check GoP PSID Payment Status"})]})]})},Wa=a.object({existingFileId:a.string().optional(),flow_diagram:a.instanceof(File,{message:"Document is required."}).optional().refine(t=>!t||t.size<=10*1024*1024,{message:"File must be smaller than 10 MB."})});a.object({licenseType:a.string().min(1,{message:"License Type is required"})});a.object({licenseType:a.string().min(1,{message:"License Type is required"}),productsCapacity:a.string().min(1,{message:"Products Capacity is required"}),wasteGenerated:a.string().min(1,{message:"Waste Generated is required"}),plasticWasteAcquired:a.string().min(1,{message:"Plastic Waste Acquired is required"})});a.object({licenseType:a.string().min(1,{message:"License Type is required"}),collectorName:a.string().min(1,{message:"Collector Name is required"}),collectorCapacity:a.coerce.number().positive({message:"Collector Capacity must be a positive number"})});a.object({registration_required_for:a.array(a.string()).min(1,{message:"At least one registration type is required."}),registration_required_for_other:a.array(a.string()),single_use_plastic_items:a.array(a.string()).optional(),total_capacity_value:a.string().min(1,{message:"Total Capacity Value is required."}).refine(t=>!isNaN(parseFloat(t))&&parseFloat(t)>0,{message:"Total Capacity Value must be a positive number."}).optional(),total_capacity_unit:a.string().min(1,{message:"Total Capacity Unit is required."}).optional(),registration_number:a.string().min(1,{message:"Registration Number is required."}).optional(),registration_date:a.string().min(1,{message:"Registration Date is required."}).optional(),date_of_setting_up:a.string().min(1,{message:"Date of Setting Up is required."}).optional(),date_of_commencement_of_production:a.string().min(1,{message:"Date of Commencement of Production is required."}).optional(),flow_diagram:a.union([a.instanceof(File),a.null(),a.undefined()]).optional().refine(t=>t==null?!0:t.size<=10*1024*1024,{message:"Flow Diagram must be a file smaller than 10 MB."}).optional(),is_compliance_with_rules:a.boolean().optional(),valid_consent_permit:a.boolean().optional(),consent_permit:a.union([a.instanceof(File),a.null(),a.undefined()]).optional().refine(t=>t==null?!0:t.size<=10*1024*1024,{message:"Consent Permit must be a file smaller than 10 MB."}).optional(),total_waste_generated_value:a.string().min(1,{message:"Total Waste Generated Value is required."}).refine(t=>!isNaN(parseFloat(t))&&parseFloat(t)>0,{message:"Total Waste Generated Value must be a positive number."}).optional(),total_waste_generated_unit:a.string().min(1,{message:"Total Waste Generated Unit is required."}).optional(),is_waste_storage_capacity:a.boolean().optional(),is_waste_disposal_provision:a.boolean().optional(),personnel_or_consumers_list:a.union([a.instanceof(File),a.null(),a.undefined()]).optional().refine(t=>t==null?!0:t.size<=10*1024*1024,{message:"Personnel or Consumers List must be a file smaller than 10 MB."}).optional(),action_plan:a.union([a.instanceof(File),a.null(),a.undefined()]).optional().refine(t=>t==null?!0:t.size<=10*1024*1024,{message:"Action Plan must be a file smaller than 10 MB."}).optional(),products_list:a.array(a.string()).optional(),by_products_list:a.array(a.string()).optional()});a.object({licenseType:a.string().min(1,{message:"License Type is required"}),registrationNumber:a.string().min(1,{message:"Registration Number is required"}),totalCapacity:a.coerce.number().positive({message:"Total Capacity must be a positive number"}),complianceStatus:a.enum(["compliant","non_compliant"],{errorMap:()=>({message:"Compliance Status is required"})})});const Ga=t=>{ie();const{onFormSubmit:s,defaultValues:i={},newCustomer:P=!1,children:m,readOnly:y}=t,{handleSubmit:D,reset:b,formState:{errors:B},register:g,control:C}=xe({defaultValues:{banAccount:!1,accountVerified:!0,...i},resolver:je(Wa)});d.useEffect(()=>{fe(i)||b(i),console.log("its in useEffect")},[JSON.stringify(i)]);const j=T=>{console.log("its here k1"),s==null||s(T)};return e.jsxs(be,{className:"flex w-full h-full",containerClassName:"flex flex-col w-full justify-between",onSubmit:D(j),children:[e.jsx(Z,{children:e.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:e.jsx("div",{className:"gap-4 flex flex-col flex-auto",children:e.jsx($a,{control:C,errors:B,register:g,readOnly:y})})})}),e.jsx(ge,{children:m})]})},Oa=t=>{const{applicantDetail:s,businessDetail:i,businessDetailIndividual:P,businessEntity:m,licenseDetailConsumer:y,licenseDetailCollector:D,licenseDetailProducer:b,licenseDetailRecycler:B,completedSections:g}=ie(),{children:C}=t,j=_=>_.replace(/([A-Z])/g," $1").toLowerCase().replace(/\b\w/g,l=>l.toUpperCase());console.log("business Entity fields and values",m);const T=_=>Object.keys(_).map(l=>{const N=j(l),F=_[l];return F&&F!=="N/A"?e.jsxs("div",{className:"mb-2",children:[e.jsxs("strong",{children:[N,":"]})," ",F]},l):null});return e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Review Your Information"}),g.includes("applicantDetail")&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Applicant Details"}),T(s)]}),g.includes("businessDetailIndividual")&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Business Details Individual"}),T(P)]}),g.includes("businessDetail")&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Business Details"}),T(i)]}),g.includes("licenseDetailConsumer")&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"License Detail - Consumer"}),T(y)]}),g.includes("licenseDetailProducer")&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"License Detail - Producer"}),T(b)]}),g.includes("licenseDetailRecycler")&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"License Detail - Recycler"}),T(B)]}),g.includes("licenseDetailCollector")&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"License Detail - Collector"}),T(D)]}),e.jsx(ge,{children:C})]})},gt=()=>{const{id:t}=da(),s=ua(),[i,P]=d.useState(0);console.log("id is:",t);const[m,y]=d.useState(!1),[D,b]=d.useState(!1),[B,g]=d.useState(!1),[C,j]=d.useState(!1),[T,_]=d.useState(""),[l,N]=d.useState("success"),F=n=>{n<0?P(0):n>6?P(6):P(n)},q=()=>F(i+1),I=()=>F(i-1),{applicantDetail:u,updateApplicantDetail:h,resetApplicantDetail:p,businessDetail:f,updateBusinessDetail:o,resetBusinessDetail:k,businessDetailIndividual:$,updateBusinessDetailIndividual:O,resetBusinessDetailIndividual:ae,businessEntity:re,updateBusinessEntity:Q,resetBusinessEntity:Se,resetAll:Fe,completedSections:te,getValuesFromStateBusinessEntity:ve,getValuesFromLicenseDetail:Y,updateLicenseDetail:K,updateLicenseDetailCollector:M,updateLicenseDetailConsumer:se,updateLicenseDetailProducer:we,updateLicenseDetailRecycler:Pe,resetLicenseDetail:Xe,resetLicenseDetailProducer:Ze,resetLicenseDetailConsumer:Qe,resetLicenseDetailCollector:ea,resetLicenseDetailRecycler:aa,licenseDetailProducer:Ie,licenseDetailConsumer:Ee,licenseDetailCollector:Me,licenseDetailRecycler:Le}=ie(),oe=u.applicationStatus!=="Created",he=u.assignedGroup!=="APPLICANT",U=u.assignedGroup==="APPLICANT";d.useEffect(()=>{(async()=>{var r,J;try{const c=await L.get("/pmc/ping/",{headers:{"Content-Type":"application/json"}})}catch(c){const E={status:(r=c.response)==null?void 0:r.status,data:(J=c.response)==null?void 0:J.data,message:c.message};s("/error",{state:{error:E}})}})(),t&&t!=="0"?Re(t):(p(),k(),ae(),Se(),Xe(),Ze(),Qe(),aa(),ea(),P(0))},[t]);const Re=n=>{L.get(`/pmc/applicant-detail/${n}/`,{headers:{"Content-Type":"multipart/form-data"}}).then(r=>{var c,E;console.log("Data:",r.data);const J={firstName:r.data.first_name,lastName:r.data.last_name,applicantDesignation:r.data.applicant_designation,gender:r.data.gender,cnic:r.data.cnic,email:r.data.email,phoneNumber:r.data.mobile_no,id:r.data.id,has_identity_document:r.data.has_identity_document,has_fee_challan:r.data.has_fee_challan,applicationStatus:r.data.application_status,assignedGroup:r.data.assigned_group,is_downloaded_fee_challan:r.data.is_downloaded_fee_challan};if(h(J),r.data.businessprofile){{const R={applicant:r.data.id,name:r.data.businessprofile.name,district:r.data.businessprofile.district,tehsil:r.data.businessprofile.tehsil,city:r.data.businessprofile.city_town_village,postalAddress:r.data.businessprofile.postal_address,mobileNumber:r.data.businessprofile.mobile_no,id:r.data.businessprofile.id};O(R)}Q({businessEntityType:r.data.businessprofile.entity_type})}if(K({licenseType:r.data.registration_for}),r.data.producer&&r.data.registration_for==="Producer"){const R={tracking_number:r.data.producer.tracking_number||"",registration_required_for:r.data.producer.registration_required_for||[],registration_required_for_other:r.data.producer.registration_required_for_other||[],registration_required_for_other_other_text:r.data.producer.registration_required_for_other_other_text||"",plain_plastic_Sheets_for_food_wrapping:r.data.producer.plain_plastic_sheets_for_food_wrapping||[],PackagingItems:r.data.producer.packaging_items||[],number_of_machines:r.data.producer.number_of_machines||"",total_capacity_value:((c=r.data.producer.total_capacity_value)==null?void 0:c.toString())||"",date_of_setting_up:r.data.producer.date_of_setting_up||"",total_waste_generated_value:((E=r.data.producer.total_waste_generated_value)==null?void 0:E.toString())||"",has_waste_storage_capacity:r.data.producer.has_waste_storage_capacity||"",waste_disposal_provision:r.data.producer.waste_disposal_provision||"",applicant:r.data.producer.applicant||"",id:r.data.producer.id||null};we(R)}if(r.data.consumer&&r.data.registration_for==="Consumer"){const R={registration_required_for:r.data.consumer.registration_required_for||[],registration_required_for_other:r.data.consumer.registration_required_for_other||[],registration_required_for_other_other_text:r.data.consumer.registration_required_for_other_other_text||"",plain_plastic_Sheets_for_food_wrapping:r.data.consumer.plain_plastic_sheets_for_food_wrapping||[],PackagingItems:r.data.consumer.packaging_items||[],consumption:r.data.consumer.consumption||"",provision_waste_disposal_bins:r.data.consumer.provision_waste_disposal_bins||"No",no_of_waste_disposible_bins:r.data.consumer.no_of_waste_disposable_bins||"",segregated_plastics_handed_over_to_registered_recyclers:r.data.consumer.segregated_plastics_handed_over_to_registered_recyclers||"No",applicant:r.data.consumer.applicant||"",id:r.data.consumer.id||null};se(R)}if(r.data.recycler&&r.data.registration_for==="Recycler"){const R={selectedCategories:r.data.recycler.selected_categories||[],plastic_waste_acquired_through:r.data.recycler.plastic_waste_acquired_through||[],has_adequate_pollution_control_systems:r.data.recycler.has_adequate_pollution_control_systems||"No",pollution_control_details:r.data.recycler.pollution_control_details||"",applicant:r.data.recycler.applicant||"",registration_required_for_other_other_text:r.data.recycler.registration_required_for_other_other_text||"",id:r.data.recycler.id||null};Pe(R)}if(r.data.collector&&r.data.registration_for==="Collector"){const R={registration_required_for:r.data.collector.registration_required_for||[],registration_required_for_other:r.data.collector.registration_required_for_other||[],registration_required_for_other_other_text:r.data.collector.registration_required_for_other_other_text||"",selectedCategoriesCollector:r.data.collector.selected_categories||[],total_capacity_value_collector:r.data.collector.total_capacity_value||"",number_of_vehicles:r.data.collector.number_of_vehicles||"",number_of_persons:r.data.collector.number_of_persons||"",applicant:r.data.collector.applicant||"",id:r.data.collector.id||null};M(R)}r.data.application_status==="Fee Challan"&&P(4)}).catch(r=>{console.error("Error:",r)})},ta=async n=>{var J,c,E,R;console.log("Submitted values",n),g(!0);const r=new FormData;if(r.append("first_name",n.firstName),r.append("last_name",n.lastName),r.append("applicant_designation",n.applicantDesignation),r.append("gender",n.gender),r.append("cnic",n.cnic),r.append("email",n.email),r.append("mobile_no",n.phoneNumber),u.id>0&&u.id!==0){try{const x=await L.patch(`/pmc/applicant-detail/${u.id}/`,r,{headers:{"Content-Type":"multipart/form-data"}});console.log("Post successful:",x.data);const A=x.data.id,z={...n,id:A};h(z),g(!1),q()}catch(x){console.error("Error in POST request:",x.response||x.message),g(!1);const A={status:(J=x.response)==null?void 0:J.status,data:(c=x.response)==null?void 0:c.data,message:x.message};s("/error",{state:{error:A}})}q()}else try{const x=await L.post("/pmc/applicant-detail/",r,{headers:{"Content-Type":"multipart/form-data"}});console.log("Post successful:",x.data);const A=x.data.id,z={...n,id:A,applicationStatus:"Created"};console.log("updatedValues:",z),h(z),g(!1),q()}catch(x){console.error("Error in POST request:",x.response||x.message),g(!1);const A={status:(E=x.response)==null?void 0:E.status,data:(R=x.response)==null?void 0:R.data,message:x.message};s("/error",{state:{error:A}})}q()},sa=async n=>{var J,c,E,R;const r=new FormData;if(r.append("entity_type",n.businessEntityType),r.append("applicant",u.id.toString()),console.log("Submitted values",n),console.log("updated business entity1:",re),Q(n),console.log("updated business entity2:",re),te.includes("businessDetail")&&(o(n),r.append("business_name",n.businessName),r.append("district",n.district),r.append("tehsil",n.tehsil),r.append("city_town_village",n.city),r.append("postal_address",n.postalAddress),r.append("mobile_no",n.mobileNumber)),te.includes("businessDetailIndividual")&&(O(n),r.append("name",n.name),r.append("district",n.district),r.append("tehsil",n.tehsil),r.append("city_town_village",n.city),r.append("postal_address",n.postalAddress)),g(!0),f.id>0||$.id>0){const x=f.id||$.id;try{const A=await L.patch(`/pmc/business-profiles/${x}/`,r,{headers:{"Content-Type":"multipart/form-data"}});console.log("Put successful:",A.data),g(!1)}catch(A){console.error("Error in POST request:",A.response||A.message),g(!1);const z={status:(J=A.response)==null?void 0:J.status,data:(c=A.response)==null?void 0:c.data,message:A.message};s("/error",{state:{error:z}})}}else try{const x=await L.post("/pmc/business-profiles/",r,{headers:{"Content-Type":"multipart/form-data"}});console.log("Post successful:",x.data),O({...n,id:x.data.id}),g(!1)}catch(x){console.error("Error in POST request:",x.response||x.message),g(!1);const A={status:(E=x.response)==null?void 0:E.status,data:(R=x.response)==null?void 0:R.data,message:x.message};s("/error",{state:{error:A}})}g(!1),q()},ia=async n=>{var r,J;try{if(te.includes("licenseDetailProducer")){const c=new FormData;if(c.append("tracking_number",n.tracking_number||""),console.log("number_of_machines:",n.number_of_machines),c.append("registration_required_for",JSON.stringify(n.registration_required_for||[])),c.append("registration_required_for_other",JSON.stringify(n.registration_required_for_other||[])),c.append("plain_plastic_sheets_for_food_wrapping",JSON.stringify(n.plain_plastic_Sheets_for_food_wrapping||[])),c.append("packaging_items",JSON.stringify(n.PackagingItems||[])),c.append("number_of_machines",n.number_of_machines||""),c.append("total_capacity_value",n.total_capacity_value||""),c.append("date_of_setting_up",n.date_of_setting_up||""),c.append("total_waste_generated_value",n.total_waste_generated_value||""),c.append("has_waste_storage_capacity",n.has_waste_storage_capacity||""),c.append("waste_disposal_provision",n.waste_disposal_provision||""),c.append("registration_required_for_other_other_text",n.registration_required_for_other_other_text||""),c.append("applicant",u.id.toString()),Ie.id){const A=await L.patch(`/pmc/producers/${Ie.id}/`,c,{headers:{"Content-Type":"multipart/form-data"}});console.log("Post successful:",A.data),we({...n,id:A.data.id})}else{const A=await L.post("/pmc/producers/",c,{headers:{"Content-Type":"multipart/form-data"}});console.log("Post successful:",A.data),we({...n,id:A.data.id})}const E=new FormData;E.append("registration_for","Producer"),E.append("applicant",u.id.toString());const R=await L.patch(`/pmc/applicant-detail/${u.id}/`,E,{headers:{"Content-Type":"multipart/form-data"}});console.log("Post successful:",R.data),h({registration_for:"Producer"})}if(te.includes("licenseDetailConsumer")){console.log("values:",n);const c=new FormData;if(c.append("registration_required_for",JSON.stringify(n.registration_required_for||[])),c.append("registration_required_for_other",JSON.stringify(n.registration_required_for_other||[])),c.append("plain_plastic_sheets_for_food_wrapping",JSON.stringify(n.plain_plastic_Sheets_for_food_wrapping||[])),c.append("packaging_items",JSON.stringify(n.PackagingItems||[])),c.append("consumption",(n.consumption||"").toString()),c.append("provision_waste_disposal_bins",n.provision_waste_disposal_bins||"No"),n.no_of_waste_disposible_bins&&c.append("no_of_waste_disposable_bins",n.no_of_waste_disposible_bins.toString()),c.append("segregated_plastics_handed_over_to_registered_recyclers",n.segregated_plastics_handed_over_to_registered_recyclers||"No"),c.append("applicant",u.id.toString()),c.append("registration_required_for_other_other_text",n.registration_required_for_other_other_text||""),Ee.id){const A=await L.patch(`/pmc/consumers/${Ee.id}/`,c,{headers:{"Content-Type":"multipart/form-data"}});se({...n,id:A.data.id})}else{const A=await L.post("/pmc/consumers/",c,{headers:{"Content-Type":"multipart/form-data"}});se({...n,id:A.data.id})}const E=new FormData;E.append("registration_for","Consumer"),E.append("applicant",u.id.toString());const R=await L.patch(`/pmc/applicant-detail/${u.id}/`,E,{headers:{"Content-Type":"multipart/form-data"}});console.log("Post successful:",R.data),h({registration_for:"Consumer"})}if(te.includes("licenseDetailCollector")){console.log("values:",n);const c=new FormData;if(c.append("registration_required_for",JSON.stringify(n.registration_required_for||[])),c.append("registration_required_for_other",JSON.stringify(n.registration_required_for_other||[])),c.append("selected_categories",JSON.stringify(n.selectedCategoriesCollector||[])),c.append("total_capacity_value",(n.total_capacity_value_collector||"").toString()),c.append("number_of_vehicles",(n.number_of_vehicles||"").toString()),c.append("number_of_persons",(n.number_of_persons||"").toString()),c.append("applicant",u.id.toString()),c.append("registration_required_for_other_other_text",n.registration_required_for_other_other_text||""),Me.id){const A=await L.patch(`/pmc/collectors/${Me.id}/`,c,{headers:{"Content-Type":"multipart/form-data"}});M({...n,id:A.data.id})}else{const A=await L.post("/pmc/collectors/",c,{headers:{"Content-Type":"multipart/form-data"}});M({...n,id:A.data.id})}const E=new FormData;E.append("registration_for","Collector"),E.append("applicant",u.id.toString());const R=await L.patch(`/pmc/applicant-detail/${u.id}/`,E,{headers:{"Content-Type":"multipart/form-data"}});console.log("Applicant Detail Update successful:",R.data),h({registration_for:"Collector"})}if(console.log("completedSections",te),te.includes("licenseDetailRecycler")){const c=new FormData;if(c.append("selected_categories",JSON.stringify(n.selectedCategories||[])),c.append("plastic_waste_acquired_through",JSON.stringify(n.plastic_waste_acquired_through||[])),c.append("has_adequate_pollution_control_systems",n.has_adequate_pollution_control_systems||"No"),n.has_adequate_pollution_control_systems==="Yes"&&c.append("pollution_control_details",n.pollution_control_details||""),c.append("applicant",u.id.toString()),c.append("registration_required_for_other_other_text",n.registration_required_for_other_other_text||""),Le.id){const A=await L.patch(`/pmc/recyclers/${Le.id}/`,c,{headers:{"Content-Type":"multipart/form-data"}});Pe({...n,id:A.data.id})}else{const A=await L.post("/pmc/recyclers/",c,{headers:{"Content-Type":"multipart/form-data"}});Pe({...n,id:A.data.id})}const E=new FormData;E.append("registration_for","Recycler"),E.append("applicant",u.id.toString());const R=await L.patch(`/pmc/applicant-detail/${u.id}/`,E,{headers:{"Content-Type":"multipart/form-data"}});console.log("Post successful:",R.data),h({registration_for:"Consumer"})}g(!1),console.log("Submitted values LicenseDetail:",n),q()}catch(c){console.error("Error in POST request:",c.response||c.message),g(!1);const E={status:(r=c.response)==null?void 0:r.status,data:(J=c.response)==null?void 0:J.data,message:c.message};s("/error",{state:{error:E}})}},ra=async n=>{var J,c,E,R;console.log("Submitted values LicenseDetail:",n);const r=new FormData;if(n.flow_diagram2){r.append("document",n.flow_diagram2),r.append("document_description","Identity Document - 2"),r.append("applicant",u.id.toString());try{const x=await L.post("/pmc/applicant-documents/",r,{headers:{"Content-Type":"multipart/form-data"}});console.log("Post successful:",x.data)}catch(x){console.error("Error in POST request:",x.response||x.message);const A={status:(J=x.response)==null?void 0:J.status,data:(c=x.response)==null?void 0:c.data,message:x.message};s("/error",{state:{error:A}})}}if(n.flow_diagram){r.append("document",n.flow_diagram),r.append("document_description","Identity Document"),r.append("applicant",u.id.toString());try{const x=await L.post("/pmc/applicant-documents/",r,{headers:{"Content-Type":"multipart/form-data"}});console.log("Post successful:",x.data)}catch(x){console.error("Error in POST request:",x.response||x.message);const A={status:(E=x.response)==null?void 0:E.status,data:(R=x.response)==null?void 0:R.data,message:x.message};s("/error",{state:{error:A}})}q()}else u.has_identity_document&&q()},na=()=>{y(!1),pa.push(e.jsx(ma,{type:"success",children:"Customer discard!"}),{placement:"top-center"}),s("/concepts/customers/customer-list")},ce=()=>{y(!0)},de=()=>{b(!0)},ue=()=>{y(!1),b(!1)},la=()=>{b(!1),I()},Ve=async n=>{var J,c,E,R,x,A;g(!0);const r=new FormData;if(r.append("chalan_image",n.flow_diagram),r.append("ApplicantId",u.id.toString()),n.flow_diagram){const z=new FormData;z.append("document",n.flow_diagram),z.append("document_description","Fee Challan"),z.append("applicant",u.id.toString());try{const W=await L.post("/pmc/applicant-documents/",z,{headers:{"Content-Type":"multipart/form-data"}});console.log("Post successful:",W.data)}catch(W){console.error("Error in POST request:",W.response||W.message);const ne={status:(J=W.response)==null?void 0:J.status,data:(c=W.response)==null?void 0:c.data,message:W.message};s("/error",{state:{error:ne}})}}if(console.log("values.existingFileId",n.existingFileId),n.existingFileId==="true"||n.flow_diagram){console.log("its in if of existingField");const z=new FormData;z.append("application_status","Submitted");try{const W=await L.patch(`/pmc/applicant-detail/${u.id}/`,z,{headers:{"Content-Type":"multipart/form-data"}})}catch(W){console.error("Error in POST request:",W.response||W.message);const ne={status:(E=W.response)==null?void 0:E.status,data:(R=W.response)==null?void 0:R.data,message:W.message};s("/error",{state:{error:ne}})}h({applicationStatus:"Submitted"});try{const W=await L.get(`/pmc/receipt-pdf?ApplicantId=${u.id}`,{responseType:"blob"}),ne=window.URL.createObjectURL(new Blob([W.data])),_e=document.createElement("a");_e.href=ne,_e.setAttribute("download","Recipt.pdf"),document.body.appendChild(_e),_e.click(),document.body.removeChild(_e),g(!1),j(!0),_("Application is submitted successfully!"),N("success")}catch(W){console.error("Error in POST request:",W.response||W.message);const ne={status:(x=W.response)==null?void 0:x.status,data:(A=W.response)==null?void 0:A.data,message:W.message};s("/error",{state:{error:ne}})}}Re(u.id),g(!1)},oa=ve(),Be=Y(),ye=()=>{j(!1),u.applicationStatus==="Submitted"&&s("/home")};return e.jsxs(e.Fragment,{children:[e.jsxs(me,{current:i,className:"mb-5",children:[e.jsx(me.Item,{title:"Applicant Detail"}),e.jsx(me.Item,{title:"Business Detail"}),e.jsx(me.Item,{title:"License Detail"}),e.jsx(me.Item,{title:"Documents"}),e.jsx(me.Item,{title:"Payment & Submission of Application"})]}),i===0&&e.jsx(_a,{newCustomer:!0,defaultValues:u,onFormSubmit:ta,readOnly:oe&&he,children:e.jsx(Z,{children:e.jsxs("div",{className:"flex items-center justify-between px-8",children:[e.jsx("span",{}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(G,{className:"ltr:mr-3 rtl:ml-3",type:"button",customColorClass:()=>"border-error ring-1 ring-error text-error hover:border-error hover:ring-error hover:text-error bg-transparent",icon:e.jsx(pe,{}),onClick:ce,children:"Discard"}),e.jsx(G,{icon:e.jsx(Ce,{}),className:"ltr:mr-3 rtl:ml-3",variant:"solid",type:"button",loading:B,disabled:i===0,onClick:u.applicationStatus==="Created"||U?de:I,children:"Back"}),e.jsx(G,{icon:u.applicationStatus==="Created"||U?e.jsx(le,{}):e.jsx(De,{}),variant:"solid",type:u.applicationStatus==="Created"||U?"submit":"button",loading:B,onClick:u.applicationStatus==="Created"||U?null:q,children:u.applicationStatus==="Created"||U?"Save & Next":"View & Next"})]})]})})}),i===1&&e.jsx(ya,{newCustomer:!0,defaultValues:oa,onFormSubmit:sa,readOnly:oe&&he,readOnlyDistrict:oe,children:e.jsx(Z,{children:e.jsxs("div",{className:"flex items-center justify-between px-8",children:[e.jsx("span",{}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(G,{className:"ltr:mr-3 rtl:ml-3",type:"button",customColorClass:()=>"border-error ring-1 ring-error text-error hover:border-error hover:ring-error hover:text-error bg-transparent",icon:e.jsx(pe,{}),onClick:ce,children:"Discard"}),e.jsx(G,{icon:e.jsx(Ce,{}),className:"ltr:mr-3 rtl:ml-3",variant:"solid",type:"button",loading:B,disabled:i===0,onClick:u.applicationStatus==="Created"||U?de:I,children:"Back"}),e.jsx(G,{icon:u.applicationStatus==="Created"||U?e.jsx(le,{}):e.jsx(De,{}),variant:"solid",type:u.applicationStatus==="Created"||U?"submit":"button",loading:B,onClick:u.applicationStatus==="Created"||U?null:q,children:u.applicationStatus==="Created"||U?"Save & Next":"View & Next"})]})]})})}),i===2&&e.jsx(Ma,{newCustomer:!0,defaultValues:Be,onFormSubmit:ia,readOnly:oe,children:e.jsx(Z,{children:e.jsxs("div",{className:"flex items-center justify-between px-8",children:[e.jsx("span",{}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(G,{className:"ltr:mr-3 rtl:ml-3",type:"button",customColorClass:()=>"border-error ring-1 ring-error text-error hover:border-error hover:ring-error hover:text-error bg-transparent",icon:e.jsx(pe,{}),onClick:ce,children:"Discard"}),e.jsx(G,{icon:e.jsx(Ce,{}),className:"ltr:mr-3 rtl:ml-3",variant:"solid",type:"button",loading:B,disabled:i===0,onClick:u.applicationStatus==="Created"||U?de:I,children:"Back"}),e.jsx(G,{icon:u.applicationStatus==="Created"||U?e.jsx(le,{}):e.jsx(De,{}),variant:"solid",type:u.applicationStatus==="Created"||U?"submit":"button",loading:B,onClick:u.applicationStatus==="Created"||U?null:q,children:u.applicationStatus==="Created"||U?"Save & Next":"View & Next"})]})]})})}),i===3&&e.jsx(Va,{newCustomer:!0,defaultValues:Be,onFormSubmit:ra,readOnly:oe&&he,children:e.jsx(Z,{children:e.jsxs("div",{className:"flex items-center justify-between px-8",children:[e.jsx("span",{}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(G,{className:"ltr:mr-3 rtl:ml-3",type:"button",customColorClass:()=>"border-error ring-1 ring-error text-error hover:border-error hover:ring-error hover:text-error bg-transparent",icon:e.jsx(pe,{}),onClick:ce,children:"Discard"}),e.jsx(G,{icon:e.jsx(Ce,{}),className:"ltr:mr-3 rtl:ml-3",variant:"solid",type:"button",loading:B,disabled:i===0,onClick:u.applicationStatus==="Created"||U?de:I,children:"Back"}),e.jsx(G,{icon:u.applicationStatus==="Created"||U?e.jsx(le,{}):e.jsx(De,{}),variant:"solid",type:u.applicationStatus==="Created"||U?"submit":"button",loading:B,onClick:u.applicationStatus==="Created"||U?null:q,children:u.applicationStatus==="Created"||U?"Save & Next":"View & Next"})]})]})})}),i===4&&e.jsx(Ga,{newCustomer:!0,defaultValues:Be,onFormSubmit:Ve,readOnly:u.applicationStatus==="Submitted"&&he,children:e.jsx(Z,{children:e.jsxs("div",{className:"flex items-center justify-between px-8",children:[e.jsx("span",{}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(G,{className:"ltr:mr-3 rtl:ml-3",type:"button",customColorClass:()=>"border-error ring-1 ring-error text-error hover:border-error hover:ring-error hover:text-error bg-transparent",icon:e.jsx(pe,{}),onClick:ce,children:"Discard"}),e.jsx(G,{icon:e.jsx(We,{}),className:"ltr:mr-3 rtl:ml-3",variant:"solid",type:"button",loading:B,disabled:i===0,onClick:de,children:"Back"}),e.jsx(G,{icon:e.jsx(le,{}),variant:"solid",type:"submit",loading:B,disabled:oe&&he&&u.applicationStatus!=="Fee Challan",children:"Submit Application"})]})]})})}),i===6&&e.jsx(Oa,{onFormSubmit:Ve,children:e.jsx(Z,{children:e.jsxs("div",{className:"flex items-center justify-between px-8",children:[e.jsx("span",{}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(G,{className:"ltr:mr-3 rtl:ml-3",type:"button",customColorClass:()=>"border-error ring-1 ring-error text-error hover:border-error hover:ring-error hover:text-error bg-transparent",icon:e.jsx(pe,{}),onClick:ce,children:"Discard"}),e.jsx(G,{icon:e.jsx(We,{}),className:"ltr:mr-3 rtl:ml-3",variant:"solid",type:"button",loading:B,disabled:i===0,onClick:de,children:"Back"}),e.jsx(G,{icon:e.jsx(le,{}),variant:"solid",type:"button",loading:B,children:"Save"})]})]})})}),e.jsx(Ae,{isOpen:C,type:l,title:"Notification",onClose:ye,onRequestClose:ye,onConfirm:ye,onCancel:ye,children:e.jsx("p",{children:T})}),e.jsx(Ae,{isOpen:m,type:"danger",title:"Discard changes",onClose:ue,onRequestClose:ue,onCancel:ue,onConfirm:na,children:e.jsx("p",{children:"Are you sure you want discard this?"})}),e.jsx(Ae,{isOpen:D,type:"danger",title:"Go Back",onClose:ue,onRequestClose:ue,onCancel:ue,onConfirm:la,children:e.jsx("p",{children:"There are unsaved changes on this step, Are you sure you want to go back step?"})})]})};export{gt as default};
