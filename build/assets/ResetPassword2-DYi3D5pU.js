import{r as f,j as r,A as j,u as b}from"./index-BsYDAXCC.js";import{L as g}from"./Logo-yK_3f7_q.js";import{u as y,A as v}from"./useTimeOutMessage-ChKTenmh.js";import{u as N,F as C,a as l,C as w}from"./index.esm-BVHTDXRZ.js";import{P as u}from"./PasswordInput-cX8eTRsx.js";import{B as S}from"./Button-sjCdSx89.js";import{z as i,t as R}from"./index-CQfQtXrg.js";import"./StatusIcon-Bwo-NE6b.js";import"./CloseButton-CYhaG6oc.js";import"./proxy-BxEzEj2u.js";import"./classNames-DROoAvQn.js";import"./index-BW7mxXGV.js";import"./Input-DzbR-l7X.js";const A=i.object({currentPassword:i.string().min(1,"Current password is required"),newPassword:i.string().min(3,"Password must be at least 3 characters"),confirmPassword:i.string().min(3,"Password must be at least 3 characters")}).refine(t=>t.newPassword===t.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]}),B=({disableSubmit:t=!1,setMessage:s})=>{var p,x,P;const[a,n]=f.useState(!1),{handleSubmit:c,formState:{errors:e},control:m}=N({resolver:R(A),defaultValues:{currentPassword:"",newPassword:"",confirmPassword:""}}),h=async o=>{if(!t){n(!0),s==null||s(null);try{const d=await j.post("/accounts/reset-password2/",{current_password:o.currentPassword,new_password:o.newPassword});s==null||s(d.data.message||"Password reset successfully.")}catch(d){console.log(d.response.data.detail),s==null||s(d.response.data.detail||"An error occurred.")}finally{n(!1)}}};return r.jsxs(C,{onSubmit:c(h),children:[r.jsx(l,{label:"Current Password",invalid:!!e.currentPassword,errorMessage:(p=e.currentPassword)==null?void 0:p.message,children:r.jsx(w,{name:"currentPassword",control:m,render:({field:o})=>r.jsx(u,{...o,placeholder:"Current Password"})})}),r.jsx(l,{label:"New Password",invalid:!!e.newPassword,errorMessage:(x=e.newPassword)==null?void 0:x.message,children:r.jsx(w,{name:"newPassword",control:m,render:({field:o})=>r.jsx(u,{...o,placeholder:"New Password"})})}),r.jsx(l,{label:"Confirm Password",invalid:!!e.confirmPassword,errorMessage:(P=e.confirmPassword)==null?void 0:P.message,children:r.jsx(w,{name:"confirmPassword",control:m,render:({field:o})=>r.jsx(u,{...o,placeholder:"Confirm Password"})})}),r.jsx(S,{type:"submit",block:!0,loading:a,disabled:a,variant:"solid",children:a?"Updating...":"Reset Password"})]})},F=({backToDashboardUrl:t="/dashboard",disableSubmit:s})=>{const[a,n]=y(),c=b(e=>e.mode);return r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:r.jsxs("div",{className:"w-full max-w-md p-6 bg-white shadow-lg rounded-lg",children:[r.jsx("div",{className:"mb-6",children:r.jsx(g,{type:"streamline",mode:c,imgClass:"mx-auto",logoWidth:60})}),r.jsx("h2",{className:"text-2xl font-bold text-center text-gray-800",children:"Reset Your Password"}),r.jsx("p",{className:"mt-2 mb-6 text-center text-gray-600",children:"Enter your current password and a new password to proceed."}),a&&r.jsx(v,{showIcon:!0,className:"mb-4",type:a.toLowerCase().includes("success")?"success":"danger",children:r.jsx("span",{className:"break-all",children:a})}),r.jsx(B,{disableSubmit:s,setMessage:n}),r.jsx("div",{className:"mt-6 text-center",children:r.jsx("a",{href:t,className:"text-blue-500 hover:underline font-semibold",children:"Back to Dashboard"})})]})})},Y=()=>r.jsx(F,{});export{F as ResetPasswordBase,Y as default};
