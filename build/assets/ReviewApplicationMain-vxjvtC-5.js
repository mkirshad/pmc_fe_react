import{r as s,j as e,Z as Xe,y as lt,l as Pt,Y as Ft,A as Ge,av as Mt,W as It,a2 as qt}from"./index-CP8CvPel.js";import{B as rt}from"./Button-DUtQ8NIU.js";import{t as $t,N as Wt}from"./toast-DcE2yin6.js";import{C as nt}from"./ConfirmDialog-CpMnlirq.js";import{f as Yt}from"./index-CjsgbpFz.js";import{B as zt}from"./index-H4dL_Z8T.js";import{e as Gt}from"./index-Cwg7YpAG.js";import{u as Nt}from"./supidStore-CZFhBHir.js";import{I as H}from"./Input-CfqkujbT.js";import{u as Kt,a as q}from"./index.esm-CDzj6gke.js";import{s as Ut}from"./index-B1wGT9B4.js";import{a as Vt,c as ft,o as Ht,f as Jt,s as Qt,p as Xt}from"./floating-ui.dom-CrKScG7J.js";import{T as je,F as ht,C as _t}from"./FormControlLabel-CNy78OOX.js";import{g as At,e as Dt,u as Et,s as kt,a as Ot,f as Tt}from"./DefaultPropsProvider-DiKrf8TX.js";import{P as Zt,o as gt,T as ea}from"./TextField-BDGJ4CPA.js";import{B as ta}from"./Box-D4Shd8l0.js";import{D as aa}from"./Divider-eRPV6GL3.js";import"./classNames-C5bikH69.js";import"./StatusIcon-DdrsYP-P.js";import"./isNil-B_p1jSR0.js";import"./CloseButton-B4RMdFQJ.js";import"./index-CMmn6TCn.js";import"./index-BOYaanX9.js";import"./index-BRuOwh_7.js";import"./Modal-Dymb2e6x.js";import"./emotion-element-f0de968e.browser.esm-BHWu9ckK.js";import"./setPrototypeOf-C3V6guyq.js";import"./assertThisInitialized-Bqh4UtBb.js";function sa(o){return At("MuiCard",o)}Dt("MuiCard",["root"]);const oa=o=>{const{classes:r}=o;return Tt({root:["root"]},sa,r)},ra=kt(Zt,{name:"MuiCard",slot:"Root",overridesResolver:(o,r)=>r.root})({overflow:"hidden"}),Ce=s.forwardRef(function(r,C){const y=Et({props:r,name:"MuiCard"}),{className:E,raised:N=!1,...$}=y,m={...y,raised:N},A=oa(m);return e.jsx(ra,{className:Ot(A.root,E),elevation:N?8:void 0,ref:C,ownerState:m,...$})});function ia(o){return At("MuiCardContent",o)}Dt("MuiCardContent",["root"]);const la=o=>{const{classes:r}=o;return Tt({root:["root"]},ia,r)},na=kt("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(o,r)=>r.root})({padding:16,"&:last-child":{paddingBottom:24}}),Se=s.forwardRef(function(r,C){const y=Et({props:r,name:"MuiCardContent"}),{className:E,component:N="div",...$}=y,m={...y,component:N},A=la(m);return e.jsx(na,{as:N,className:Ot(A.root,E),ownerState:m,ref:C,...$})});var vt={};const ca="react-tooltip-core-styles",da="react-tooltip-base-styles",yt={core:!1,base:!1};function bt({css:o,id:r=da,type:C="base",ref:y}){var E,N;if(!o||typeof document>"u"||yt[C]||C==="core"&&typeof process<"u"&&(!((E=process==null?void 0:vt)===null||E===void 0)&&E.REACT_TOOLTIP_DISABLE_CORE_STYLES)||C!=="base"&&typeof process<"u"&&(!((N=process==null?void 0:vt)===null||N===void 0)&&N.REACT_TOOLTIP_DISABLE_BASE_STYLES))return;C==="core"&&(r=ca),y||(y={});const{insertAt:$}=y;if(document.getElementById(r))return;const m=document.head||document.getElementsByTagName("head")[0],A=document.createElement("style");A.id=r,A.type="text/css",$==="top"&&m.firstChild?m.insertBefore(A,m.firstChild):m.appendChild(A),A.styleSheet?A.styleSheet.cssText=o:A.appendChild(document.createTextNode(o)),yt[C]=!0}const xt=async({elementReference:o=null,tooltipReference:r=null,tooltipArrowReference:C=null,place:y="top",offset:E=10,strategy:N="absolute",middlewares:$=[Ht(Number(E)),Jt({fallbackAxisSideDirection:"start"}),Qt({padding:5})],border:m})=>{if(!o)return{tooltipStyles:{},tooltipArrowStyles:{},place:y};if(r===null)return{tooltipStyles:{},tooltipArrowStyles:{},place:y};const A=$;return C?(A.push(Xt({element:C,padding:5})),ft(o,r,{placement:y,strategy:N,middleware:A}).then(({x:b,y:G,placement:X,middlewareData:ve})=>{var le,ne;const re={left:`${b}px`,top:`${G}px`,border:m},{x:pe,y:Z}=(le=ve.arrow)!==null&&le!==void 0?le:{x:0,y:0},ye=(ne={top:"bottom",right:"left",bottom:"top",left:"right"}[X.split("-")[0]])!==null&&ne!==void 0?ne:"bottom",W=m&&{borderBottom:m,borderRight:m};let ee=0;if(m){const be=`${m}`.match(/(\d+)px/);ee=be!=null&&be[1]?Number(be[1]):1}return{tooltipStyles:re,tooltipArrowStyles:{left:pe!=null?`${pe}px`:"",top:Z!=null?`${Z}px`:"",right:"",bottom:"",...W,[ye]:`-${4+ee}px`},place:X}})):ft(o,r,{placement:"bottom",strategy:N,middleware:A}).then(({x:b,y:G,placement:X})=>({tooltipStyles:{left:`${b}px`,top:`${G}px`},tooltipArrowStyles:{},place:X}))},wt=(o,r)=>!("CSS"in window&&"supports"in window.CSS)||window.CSS.supports(o,r),jt=(o,r,C)=>{let y=null;const E=function(...N){const $=()=>{y=null};!y&&(o.apply(this,N),y=setTimeout($,r))};return E.cancel=()=>{y&&(clearTimeout(y),y=null)},E},Ct=o=>o!==null&&!Array.isArray(o)&&typeof o=="object",ct=(o,r)=>{if(o===r)return!0;if(Array.isArray(o)&&Array.isArray(r))return o.length===r.length&&o.every((E,N)=>ct(E,r[N]));if(Array.isArray(o)!==Array.isArray(r))return!1;if(!Ct(o)||!Ct(r))return o===r;const C=Object.keys(o),y=Object.keys(r);return C.length===y.length&&C.every(E=>ct(o[E],r[E]))},ua=o=>{if(!(o instanceof HTMLElement||o instanceof SVGElement))return!1;const r=getComputedStyle(o);return["overflow","overflow-x","overflow-y"].some(C=>{const y=r.getPropertyValue(C);return y==="auto"||y==="scroll"})},St=o=>{if(!o)return null;let r=o.parentElement;for(;r;){if(ua(r))return r;r=r.parentElement}return document.scrollingElement||document.documentElement},pa=typeof window<"u"?s.useLayoutEffect:s.useEffect,Ne=o=>{o.current&&(clearTimeout(o.current),o.current=null)},ma="DEFAULT_TOOLTIP_ID",fa={anchorRefs:new Set,activeAnchor:{current:null},attach:()=>{},detach:()=>{},setActiveAnchor:()=>{}},ha=s.createContext({getTooltipData:()=>fa});function Rt(o=ma){return s.useContext(ha).getTooltipData(o)}var et={tooltip:"core-styles-module_tooltip__3vRRp",fixed:"core-styles-module_fixed__pcSol",arrow:"core-styles-module_arrow__cvMwQ",noArrow:"core-styles-module_noArrow__xock6",clickable:"core-styles-module_clickable__ZuTTB",show:"core-styles-module_show__Nt9eE",closing:"core-styles-module_closing__sGnxF"},it={tooltip:"styles-module_tooltip__mnnfp",arrow:"styles-module_arrow__K0L3T",dark:"styles-module_dark__xNqje",light:"styles-module_light__Z6W-X",success:"styles-module_success__A2AKt",warning:"styles-module_warning__SCK0X",error:"styles-module_error__JvumD",info:"styles-module_info__BWdHW"};const _a=({forwardRef:o,id:r,className:C,classNameArrow:y,variant:E="dark",anchorId:N,anchorSelect:$,place:m="top",offset:A=10,events:b=["hover"],openOnClick:G=!1,positionStrategy:X="absolute",middlewares:ve,wrapper:le,delayShow:ne=0,delayHide:re=0,float:pe=!1,hidden:Z=!1,noArrow:ye=!1,clickable:W=!1,closeOnEsc:ee=!1,closeOnScroll:be=!1,closeOnResize:Ve=!1,openEvents:J,closeEvents:p,globalCloseEvents:Ae,imperativeModeOnly:Pe,style:se,position:Fe,afterShow:Me,afterHide:ie,disableTooltip:De,content:me,contentWrapperRef:fe,isOpen:Y,defaultIsOpen:Ee=!1,setIsOpen:xe,activeAnchor:F,setActiveAnchor:Oe,border:Ie,opacity:qe,arrowColor:He,role:Ze="tooltip"})=>{var f;const K=s.useRef(null),x=s.useRef(null),te=s.useRef(null),he=s.useRef(null),oe=s.useRef(null),[we,$e]=s.useState({tooltipStyles:{},tooltipArrowStyles:{},place:m}),[ae,Te]=s.useState(!1),[c,t]=s.useState(!1),[i,D]=s.useState(null),Re=s.useRef(!1),z=s.useRef(null),{anchorRefs:S,setActiveAnchor:v}=Rt(r),ke=s.useRef(!1),[Be,ce]=s.useState([]),We=s.useRef(!1),Le=G||b.includes("click"),Je=Le||(J==null?void 0:J.click)||(J==null?void 0:J.dblclick)||(J==null?void 0:J.mousedown),Ye=J?{...J}:{mouseover:!0,focus:!0,mouseenter:!1,click:!1,dblclick:!1,mousedown:!1};!J&&Le&&Object.assign(Ye,{mouseenter:!1,focus:!1,mouseover:!1,click:!0});const Ke=p?{...p}:{mouseout:!0,blur:!0,mouseleave:!1,click:!1,dblclick:!1,mouseup:!1};!p&&Le&&Object.assign(Ke,{mouseleave:!1,blur:!1,mouseout:!1});const de=Ae?{...Ae}:{escape:ee||!1,scroll:be||!1,resize:Ve||!1,clickOutsideAnchor:Je||!1};Pe&&(Object.assign(Ye,{mouseenter:!1,focus:!1,click:!1,dblclick:!1,mousedown:!1}),Object.assign(Ke,{mouseleave:!1,blur:!1,click:!1,dblclick:!1,mouseup:!1}),Object.assign(de,{escape:!1,scroll:!1,resize:!1,clickOutsideAnchor:!1})),pa(()=>(We.current=!0,()=>{We.current=!1}),[]);const L=a=>{We.current&&(a&&t(!0),setTimeout(()=>{We.current&&(xe==null||xe(a),Y===void 0&&Te(a))},10))};s.useEffect(()=>{if(Y===void 0)return()=>null;Y&&t(!0);const a=setTimeout(()=>{Te(Y)},10);return()=>{clearTimeout(a)}},[Y]),s.useEffect(()=>{if(ae!==Re.current)if(Ne(oe),Re.current=ae,ae)Me==null||Me();else{const a=(d=>{const _=d.match(/^([\d.]+)(ms|s)$/);if(!_)return 0;const[,M,V]=_;return Number(M)*(V==="ms"?1:1e3)})(getComputedStyle(document.body).getPropertyValue("--rt-transition-show-delay"));oe.current=setTimeout(()=>{t(!1),D(null),ie==null||ie()},a+25)}},[ae]);const Qe=a=>{$e(d=>ct(d,a)?d:a)},Ue=(a=ne)=>{Ne(te),c?L(!0):te.current=setTimeout(()=>{L(!0)},a)},u=(a=re)=>{Ne(he),he.current=setTimeout(()=>{ke.current||L(!1)},a)},w=a=>{var d;if(!a)return;const _=(d=a.currentTarget)!==null&&d!==void 0?d:a.target;if(!(_!=null&&_.isConnected))return Oe(null),void v({current:null});ne?Ue():L(!0),Oe(_),v({current:_}),Ne(he)},n=()=>{W?u(re||100):re?u():L(!1),Ne(te)},k=({x:a,y:d})=>{var _;const M={getBoundingClientRect:()=>({x:a,y:d,width:0,height:0,top:d,left:a,right:a,bottom:d})};xt({place:(_=i==null?void 0:i.place)!==null&&_!==void 0?_:m,offset:A,elementReference:M,tooltipReference:K.current,tooltipArrowReference:x.current,strategy:X,middlewares:ve,border:Ie}).then(V=>{Qe(V)})},U=a=>{if(!a)return;const d=a,_={x:d.clientX,y:d.clientY};k(_),z.current=_},P=a=>{var d;if(!ae)return;const _=a.target;_.isConnected&&(!((d=K.current)===null||d===void 0)&&d.contains(_)||[document.querySelector(`[id='${N}']`),...Be].some(M=>M==null?void 0:M.contains(_))||(L(!1),Ne(te)))},ue=jt(w,50),O=jt(n,50),I=a=>{O.cancel(),ue(a)},l=()=>{ue.cancel(),O()},h=s.useCallback(()=>{var a,d;const _=(a=i==null?void 0:i.position)!==null&&a!==void 0?a:Fe;_?k(_):pe?z.current&&k(z.current):F!=null&&F.isConnected&&xt({place:(d=i==null?void 0:i.place)!==null&&d!==void 0?d:m,offset:A,elementReference:F,tooltipReference:K.current,tooltipArrowReference:x.current,strategy:X,middlewares:ve,border:Ie}).then(M=>{We.current&&Qe(M)})},[ae,F,me,se,m,i==null?void 0:i.place,A,X,Fe,i==null?void 0:i.position,pe]);s.useEffect(()=>{var a,d;const _=new Set(S);Be.forEach(T=>{De!=null&&De(T)||_.add({current:T})});const M=document.querySelector(`[id='${N}']`);M&&!(De!=null&&De(M))&&_.add({current:M});const V=()=>{L(!1)},_e=St(F),ge=St(K.current);de.scroll&&(window.addEventListener("scroll",V),_e==null||_e.addEventListener("scroll",V),ge==null||ge.addEventListener("scroll",V));let Q=null;de.resize?window.addEventListener("resize",V):F&&K.current&&(Q=Vt(F,K.current,h,{ancestorResize:!0,elementResize:!0,layoutShift:!0}));const g=T=>{T.key==="Escape"&&L(!1)};de.escape&&window.addEventListener("keydown",g),de.clickOutsideAnchor&&window.addEventListener("click",P);const B=[],tt=T=>{ae&&(T==null?void 0:T.target)===F||w(T)},Bt=T=>{ae&&(T==null?void 0:T.target)===F&&n()},dt=["mouseover","mouseout","mouseenter","mouseleave","focus","blur"],ut=["click","dblclick","mousedown","mouseup"];Object.entries(Ye).forEach(([T,ze])=>{ze&&(dt.includes(T)?B.push({event:T,listener:I}):ut.includes(T)&&B.push({event:T,listener:tt}))}),Object.entries(Ke).forEach(([T,ze])=>{ze&&(dt.includes(T)?B.push({event:T,listener:l}):ut.includes(T)&&B.push({event:T,listener:Bt}))}),pe&&B.push({event:"pointermove",listener:U});const pt=()=>{ke.current=!0},mt=()=>{ke.current=!1,n()};return W&&!Je&&((a=K.current)===null||a===void 0||a.addEventListener("mouseenter",pt),(d=K.current)===null||d===void 0||d.addEventListener("mouseleave",mt)),B.forEach(({event:T,listener:ze})=>{_.forEach(st=>{var at;(at=st.current)===null||at===void 0||at.addEventListener(T,ze)})}),()=>{var T,ze;de.scroll&&(window.removeEventListener("scroll",V),_e==null||_e.removeEventListener("scroll",V),ge==null||ge.removeEventListener("scroll",V)),de.resize?window.removeEventListener("resize",V):Q==null||Q(),de.clickOutsideAnchor&&window.removeEventListener("click",P),de.escape&&window.removeEventListener("keydown",g),W&&!Je&&((T=K.current)===null||T===void 0||T.removeEventListener("mouseenter",pt),(ze=K.current)===null||ze===void 0||ze.removeEventListener("mouseleave",mt)),B.forEach(({event:st,listener:at})=>{_.forEach(Lt=>{var ot;(ot=Lt.current)===null||ot===void 0||ot.removeEventListener(st,at)})})}},[F,h,c,S,Be,J,p,Ae,Le,ne,re]),s.useEffect(()=>{var a,d;let _=(d=(a=i==null?void 0:i.anchorSelect)!==null&&a!==void 0?a:$)!==null&&d!==void 0?d:"";!_&&r&&(_=`[data-tooltip-id='${r.replace(/'/g,"\\'")}']`);const M=new MutationObserver(V=>{const _e=[],ge=[];V.forEach(Q=>{if(Q.type==="attributes"&&Q.attributeName==="data-tooltip-id"&&(Q.target.getAttribute("data-tooltip-id")===r?_e.push(Q.target):Q.oldValue===r&&ge.push(Q.target)),Q.type==="childList"){if(F){const g=[...Q.removedNodes].filter(B=>B.nodeType===1);if(_)try{ge.push(...g.filter(B=>B.matches(_))),ge.push(...g.flatMap(B=>[...B.querySelectorAll(_)]))}catch{}g.some(B=>{var tt;return!!(!((tt=B==null?void 0:B.contains)===null||tt===void 0)&&tt.call(B,F))&&(t(!1),L(!1),Oe(null),Ne(te),Ne(he),!0)})}if(_)try{const g=[...Q.addedNodes].filter(B=>B.nodeType===1);_e.push(...g.filter(B=>B.matches(_))),_e.push(...g.flatMap(B=>[...B.querySelectorAll(_)]))}catch{}}}),(_e.length||ge.length)&&ce(Q=>[...Q.filter(g=>!ge.includes(g)),..._e])});return M.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-tooltip-id"],attributeOldValue:!0}),()=>{M.disconnect()}},[r,$,i==null?void 0:i.anchorSelect,F]),s.useEffect(()=>{h()},[h]),s.useEffect(()=>{if(!(fe!=null&&fe.current))return()=>null;const a=new ResizeObserver(()=>{setTimeout(()=>h())});return a.observe(fe.current),()=>{a.disconnect()}},[me,fe==null?void 0:fe.current]),s.useEffect(()=>{var a;const d=document.querySelector(`[id='${N}']`),_=[...Be,d];F&&_.includes(F)||Oe((a=Be[0])!==null&&a!==void 0?a:d)},[N,Be,F]),s.useEffect(()=>(Ee&&L(!0),()=>{Ne(te),Ne(he)}),[]),s.useEffect(()=>{var a;let d=(a=i==null?void 0:i.anchorSelect)!==null&&a!==void 0?a:$;if(!d&&r&&(d=`[data-tooltip-id='${r.replace(/'/g,"\\'")}']`),d)try{const _=Array.from(document.querySelectorAll(d));ce(_)}catch{ce([])}},[r,$,i==null?void 0:i.anchorSelect]),s.useEffect(()=>{te.current&&(Ne(te),Ue(ne))},[ne]);const R=(f=i==null?void 0:i.content)!==null&&f!==void 0?f:me,j=ae&&Object.keys(we.tooltipStyles).length>0;return s.useImperativeHandle(o,()=>({open:a=>{if(a!=null&&a.anchorSelect)try{document.querySelector(a.anchorSelect)}catch{return void console.warn(`[react-tooltip] "${a.anchorSelect}" is not a valid CSS selector`)}D(a??null),a!=null&&a.delay?Ue(a.delay):L(!0)},close:a=>{a!=null&&a.delay?u(a.delay):L(!1)},activeAnchor:F,place:we.place,isOpen:!!(c&&!Z&&R&&j)})),c&&!Z&&R?Xe.createElement(le,{id:r,role:Ze,className:lt("react-tooltip",et.tooltip,it.tooltip,it[E],C,`react-tooltip__place-${we.place}`,et[j?"show":"closing"],j?"react-tooltip__show":"react-tooltip__closing",X==="fixed"&&et.fixed,W&&et.clickable),onTransitionEnd:a=>{Ne(oe),ae||a.propertyName!=="opacity"||(t(!1),D(null),ie==null||ie())},style:{...se,...we.tooltipStyles,opacity:qe!==void 0&&j?qe:void 0},ref:K},R,Xe.createElement(le,{className:lt("react-tooltip-arrow",et.arrow,it.arrow,y,ye&&et.noArrow),style:{...we.tooltipArrowStyles,background:He?`linear-gradient(to right bottom, transparent 50%, ${He} 50%)`:void 0},ref:x})):null},ga=({content:o})=>Xe.createElement("span",{dangerouslySetInnerHTML:{__html:o}}),va=Xe.forwardRef(({id:o,anchorId:r,anchorSelect:C,content:y,html:E,render:N,className:$,classNameArrow:m,variant:A="dark",place:b="top",offset:G=10,wrapper:X="div",children:ve=null,events:le=["hover"],openOnClick:ne=!1,positionStrategy:re="absolute",middlewares:pe,delayShow:Z=0,delayHide:ye=0,float:W=!1,hidden:ee=!1,noArrow:be=!1,clickable:Ve=!1,closeOnEsc:J=!1,closeOnScroll:p=!1,closeOnResize:Ae=!1,openEvents:Pe,closeEvents:se,globalCloseEvents:Fe,imperativeModeOnly:Me=!1,style:ie,position:De,isOpen:me,defaultIsOpen:fe=!1,disableStyleInjection:Y=!1,border:Ee,opacity:xe,arrowColor:F,setIsOpen:Oe,afterShow:Ie,afterHide:qe,disableTooltip:He,role:Ze="tooltip"},f)=>{const[K,x]=s.useState(y),[te,he]=s.useState(E),[oe,we]=s.useState(b),[$e,ae]=s.useState(A),[Te,c]=s.useState(G),[t,i]=s.useState(Z),[D,Re]=s.useState(ye),[z,S]=s.useState(W),[v,ke]=s.useState(ee),[Be,ce]=s.useState(X),[We,Le]=s.useState(le),[Je,Ye]=s.useState(re),[Ke,de]=s.useState(null),[L,Qe]=s.useState(null),Ue=s.useRef(Y),{anchorRefs:u,activeAnchor:w}=Rt(o),n=O=>O==null?void 0:O.getAttributeNames().reduce((I,l)=>{var h;return l.startsWith("data-tooltip-")&&(I[l.replace(/^data-tooltip-/,"")]=(h=O==null?void 0:O.getAttribute(l))!==null&&h!==void 0?h:null),I},{}),k=O=>{const I={place:l=>{var h;we((h=l)!==null&&h!==void 0?h:b)},content:l=>{x(l??y)},html:l=>{he(l??E)},variant:l=>{var h;ae((h=l)!==null&&h!==void 0?h:A)},offset:l=>{c(l===null?G:Number(l))},wrapper:l=>{var h;ce((h=l)!==null&&h!==void 0?h:X)},events:l=>{const h=l==null?void 0:l.split(" ");Le(h??le)},"position-strategy":l=>{var h;Ye((h=l)!==null&&h!==void 0?h:re)},"delay-show":l=>{i(l===null?Z:Number(l))},"delay-hide":l=>{Re(l===null?ye:Number(l))},float:l=>{S(l===null?W:l==="true")},hidden:l=>{ke(l===null?ee:l==="true")},"class-name":l=>{de(l)}};Object.values(I).forEach(l=>l(null)),Object.entries(O).forEach(([l,h])=>{var R;(R=I[l])===null||R===void 0||R.call(I,h)})};s.useEffect(()=>{x(y)},[y]),s.useEffect(()=>{he(E)},[E]),s.useEffect(()=>{we(b)},[b]),s.useEffect(()=>{ae(A)},[A]),s.useEffect(()=>{c(G)},[G]),s.useEffect(()=>{i(Z)},[Z]),s.useEffect(()=>{Re(ye)},[ye]),s.useEffect(()=>{S(W)},[W]),s.useEffect(()=>{ke(ee)},[ee]),s.useEffect(()=>{Ye(re)},[re]),s.useEffect(()=>{Ue.current!==Y&&console.warn("[react-tooltip] Do not change `disableStyleInjection` dynamically.")},[Y]),s.useEffect(()=>{typeof window<"u"&&window.dispatchEvent(new CustomEvent("react-tooltip-inject-styles",{detail:{disableCore:Y==="core",disableBase:Y}}))},[]),s.useEffect(()=>{var O;const I=new Set(u);let l=C;if(!l&&o&&(l=`[data-tooltip-id='${o.replace(/'/g,"\\'")}']`),l)try{document.querySelectorAll(l).forEach(d=>{I.add({current:d})})}catch{console.warn(`[react-tooltip] "${l}" is not a valid CSS selector`)}const h=document.querySelector(`[id='${r}']`);if(h&&I.add({current:h}),!I.size)return()=>null;const R=(O=L??h)!==null&&O!==void 0?O:w.current,j=new MutationObserver(d=>{d.forEach(_=>{var M;if(!R||_.type!=="attributes"||!(!((M=_.attributeName)===null||M===void 0)&&M.startsWith("data-tooltip-")))return;const V=n(R);k(V)})}),a={attributes:!0,childList:!1,subtree:!1};if(R){const d=n(R);k(d),j.observe(R,a)}return()=>{j.disconnect()}},[u,w,L,r,C]),s.useEffect(()=>{ie!=null&&ie.border&&console.warn("[react-tooltip] Do not set `style.border`. Use `border` prop instead."),Ee&&!wt("border",`${Ee}`)&&console.warn(`[react-tooltip] "${Ee}" is not a valid \`border\`.`),ie!=null&&ie.opacity&&console.warn("[react-tooltip] Do not set `style.opacity`. Use `opacity` prop instead."),xe&&!wt("opacity",`${xe}`)&&console.warn(`[react-tooltip] "${xe}" is not a valid \`opacity\`.`)},[]);let U=ve;const P=s.useRef(null);if(N){const O=N({content:(L==null?void 0:L.getAttribute("data-tooltip-content"))||K||null,activeAnchor:L});U=O?Xe.createElement("div",{ref:P,className:"react-tooltip-content-wrapper"},O):null}else K&&(U=K);te&&(U=Xe.createElement(ga,{content:te}));const ue={forwardRef:f,id:o,anchorId:r,anchorSelect:C,className:lt($,Ke),classNameArrow:m,content:U,contentWrapperRef:P,place:oe,variant:$e,offset:Te,wrapper:Be,events:We,openOnClick:ne,positionStrategy:Je,middlewares:pe,delayShow:t,delayHide:D,float:z,hidden:v,noArrow:be,clickable:Ve,closeOnEsc:J,closeOnScroll:p,closeOnResize:Ae,openEvents:Pe,closeEvents:se,globalCloseEvents:Fe,imperativeModeOnly:Me,style:ie,position:De,isOpen:me,defaultIsOpen:fe,border:Ee,opacity:xe,arrowColor:F,setIsOpen:Oe,afterShow:Ie,afterHide:qe,disableTooltip:He,activeAnchor:L,setActiveAnchor:O=>Qe(O),role:Ze};return Xe.createElement(_a,{...ue})});typeof window<"u"&&window.addEventListener("react-tooltip-inject-styles",o=>{o.detail.disableCore||bt({css:":root{--rt-color-white:#fff;--rt-color-dark:#222;--rt-color-success:#8dc572;--rt-color-error:#be6464;--rt-color-warning:#f0ad4e;--rt-color-info:#337ab7;--rt-opacity:0.9;--rt-transition-show-delay:0.15s;--rt-transition-closing-delay:0.15s}.core-styles-module_tooltip__3vRRp{position:absolute;top:0;left:0;pointer-events:none;opacity:0;will-change:opacity}.core-styles-module_fixed__pcSol{position:fixed}.core-styles-module_arrow__cvMwQ{position:absolute;background:inherit}.core-styles-module_noArrow__xock6{display:none}.core-styles-module_clickable__ZuTTB{pointer-events:auto}.core-styles-module_show__Nt9eE{opacity:var(--rt-opacity);transition:opacity var(--rt-transition-show-delay)ease-out}.core-styles-module_closing__sGnxF{opacity:0;transition:opacity var(--rt-transition-closing-delay)ease-in}",type:"core"}),o.detail.disableBase||bt({css:`
.styles-module_tooltip__mnnfp{padding:8px 16px;border-radius:3px;font-size:90%;width:max-content}.styles-module_arrow__K0L3T{width:8px;height:8px}[class*='react-tooltip__place-top']>.styles-module_arrow__K0L3T{transform:rotate(45deg)}[class*='react-tooltip__place-right']>.styles-module_arrow__K0L3T{transform:rotate(135deg)}[class*='react-tooltip__place-bottom']>.styles-module_arrow__K0L3T{transform:rotate(225deg)}[class*='react-tooltip__place-left']>.styles-module_arrow__K0L3T{transform:rotate(315deg)}.styles-module_dark__xNqje{background:var(--rt-color-dark);color:var(--rt-color-white)}.styles-module_light__Z6W-X{background-color:var(--rt-color-white);color:var(--rt-color-dark)}.styles-module_success__A2AKt{background-color:var(--rt-color-success);color:var(--rt-color-white)}.styles-module_warning__SCK0X{background-color:var(--rt-color-warning);color:var(--rt-color-white)}.styles-module_error__JvumD{background-color:var(--rt-color-error);color:var(--rt-color-white)}.styles-module_info__BWdHW{background-color:var(--rt-color-info);color:var(--rt-color-white)}`,type:"base"})});const ya=({groupList:o,children:r,setMovementDirection:C})=>{var Ye,Ke,de,L,Qe,Ue;const[y,E]=s.useState(o!==void 0&&o.length>1?o[1].value:""),[N,$]=s.useState({previousStage:!1,nextStage:!1}),[m,A]=s.useState({}),[b,G]=s.useState({latitude:"",longitude:""}),[X,ve]=s.useState(!1),[le,ne]=s.useState(!1),[re,pe]=s.useState(""),[Z,ye]=s.useState("Fee Verification from Treasury/District Accounts Office"),W=()=>ve(!0),ee=()=>ve(!1),be=u=>{ye(u.target.value)},Ve=u=>{u.target.files&&u.target.files[0]&&S(u.target.files[0],Z)},J=["verifiedFeeAmount"],{applicantDetail:p,businessDetailIndividual:Ae,businessEntity:Pe,licenseDetail:se,licenseDetailProducer:Fe,licenseDetailConsumer:Me,licenseDetailCollector:ie,licenseDetailRecycler:De,updateApplicantDetail:me,completedSections:fe}=Nt(),Y=Pt(u=>u.user.authority)||[],Ee=Y.some(u=>u===p.assignedGroup),xe=Y.some(u=>u==="DO"),F=Y.some(u=>u==="LSM"),Oe=Y.some(u=>u==="LSM2"),Ie=Y.some(u=>u==="DEO"),qe=Y.some(u=>u==="DG"),{control:He,handleSubmit:Ze,formState:{errors:f}}=Kt({defaultValues:{firstName:""}}),[K]=Ft();K.get("group");const x=!xe,te=!F&&!Oe,[he,oe]=s.useState(!1),[we,$e]=s.useState([]),[ae,Te]=s.useState([]),c=u=>we.includes(u);s.useEffect(()=>{E(o!==void 0&&o.length>1?o[1].value:"")},[o]),s.useEffect(()=>{console.log("its in effect of review application "),console.log(p),p.id&&i(p.id)},[p.id]),s.useEffect(()=>{console.log("fieldResponses",m),me({fieldResponses:m,readOnly:x})},[m]),console.log("fieldResponses",m),s.useEffect(()=>{me({manualFields:b,readOnly:x})},[b]),s.useEffect(()=>{(b==null?void 0:b.labor_dept_registration_status)==="Yes"?oe(!0):oe(!1)},[b.labor_dept_registration_status]);const t=u=>{pe(u.target.value);const w={remarks:u.target.value};me(w)},i=async u=>{try{const w=p.field_responses.reduce((n,k)=>(n[k.field_key]={response:k.response,comment:k.comment},n),{});A(w),p.manual_fields?G(p.manual_fields):G({})}finally{}},D=(u,w)=>{A(n=>{var k;return{...n,[u]:{...n[u],response:w,comment:w==="No"?((k=n[u])==null?void 0:k.comment)||"":null}}})},Re=(u,w)=>{A(n=>({...n,[u]:{...n[u],comment:w}}))},z=u=>{var O,I;const{name:w,checked:n}=u.target;C(null);const k={previousStage:w==="previousStage"?n:!1,nextStage:w==="nextStage"?n:!1};let U="",P=null,ue={};if(w==="previousStage"&&n){P=(O=o[0])==null?void 0:O.value,ue={assignedGroup2:P},U="As per the verification, please proceed to the previous stage for preliminary scrutiny/data entry, etc.";const l=Object.entries(p).concat(Object.entries(Pe)).concat(Object.entries(Ae)).concat(Object.entries(se)).concat(Object.entries(ie)).filter(([j,a])=>ke[j]&&!J.includes(j)&&a!==null&&a!==void 0&&a!=="").map(([j,a])=>j),h=l.filter(j=>!m[j]||!m[j].response),R=l.filter(j=>{var a,d;return((a=m[j])==null?void 0:a.response)==="No"&&!((d=m[j])!=null&&d.comment)});if($e(h),Te(R),h.length>0){alert("Please select Yes or No for all fields before proceeding. For: "+h.join(", "));return}if(R.length>0){alert("For all fields where 'No' is selected, comments are required.");return}C("backward")}else if(w==="nextStage"&&n){P=(I=o[2])==null?void 0:I.value,ue={assignedGroup2:P},U=Ie?"As per the verification, all codal formalities for the issuance of the license have been fulfilled.":qe?"Approved. License has been issued.":"As per the verification, please proceed for issuance of the license.";const l=Object.entries(p).concat(Object.entries(Pe)).concat(Object.entries(Ae)).concat(Object.entries(se)).concat(Object.entries(Fe)).concat(Object.entries(Me)).concat(Object.entries(ie)).concat(Object.entries(De)).filter(([j,a])=>ke[j]&&!J.includes(j)&&a!==null&&a!==void 0&&a!=="").map(([j,a])=>j),h=l.filter(j=>!m[j]||!m[j].response),R=l.filter(j=>{var a,d;return((a=m[j])==null?void 0:a.response)==="No"&&!((d=m[j])!=null&&d.comment)});if($e(h),Te(R),h.length>0){alert("Please select Yes or No for all fields before proceeding. For: "+h.join(", "));return}if(R.length>0){alert("For all fields where 'No' is selected, comments are required.");return}C("forward")}else C(null);$(k),n&&(E(P),me(ue),pe(U))},S=async(u,w)=>{const n=new FormData;n.append("document",u),n.append("document_description",w),n.append("applicant",p.id.toString());try{const k=await Ge.post("/pmc/applicant-documents/",n,{headers:{"Content-Type":"multipart/form-data"}});me({applicationdocument:[...p.applicationdocument||[],k.data]}),alert(Z+" is uploaded")}catch(k){console.error("Error in POST request:",k.response||k.message),navigate("/error")}},v=(u,w)=>{G(n=>({...n,[u]:w}))};console.log(p);const ke={firstName:"First Name",lastName:"Last Name",applicantDesignation:"Designation",gender:"Gender",cnic:"CNIC",email:"Email",phoneNumber:"Mobile Number",trackingNumber:"Tracking Number",businessEntityType:"Business Entity Type",name:"Business Name",district:"District",tehsil:"Tehsil",city:"City",postalAddress:"Postal Address",registration_required_for:"Categories of Single Use Plastics",registration_required_for_other:"Categories for Other Plastics",registration_required_for_other_other_text:"Other",plain_plastic_Sheets_for_food_wrapping:"Additional Options for Packaging",PackagingItems:"Packging Item Other List",number_of_machines:"Number of machines",total_capacity_value:"Average Production Capacity (Kg per day)",date_of_setting_up:"Date of Business Setting Up",total_waste_generated_value:"Average Waste Generated (Kg per day)",has_waste_storage_capacity:"Has Waste Storage Capacity?",waste_disposal_provision:"Waste Disposal Provision",consumption:"Average Sale (Kg per day)",provision_waste_disposal_bins:"Provision of Waste Disposal Bins",no_of_waste_disposible_bins:"No. of Waste Disposibal Bins",segregated_plastics_handed_over_to_registered_recyclers:"Whether Segregated Plastics are being handed over to registered Re-Cyclers or Collectors?",selectedCategoriesCollector:"Source of Disposal",total_capacity_value_collector:"Average Collection (Kg per day)",number_of_vehicles:"Number of vehicles",number_of_persons:"Number of persons",selectedCategories:"Categories of plastic collected for recycling (Waste Disposal and Waste Collection in Kg per day)",plastic_waste_acquired_through:"Plastic waste acquired through",has_adequate_pollution_control_systems:"Has adequate pollution control systems or equipment to meet the standards of emission or effluent?",pollution_control_details:"Polution control details",licenseType:"License Type",totalFeeAmount:"Total Fee Amount",verifiedFeeAmount:"Verified Fee Amount"},Be=(u,w)=>e.jsx(Ce,{className:"mb-4",children:e.jsxs(Se,{children:[e.jsx(je,{variant:"h6",className:"font-bold mb-4",children:u}),Array.isArray(w)&&w.length>0?w.map((n,k)=>e.jsx("div",{className:"border-b border-gray-300 last:border-none",children:Object.entries(n).map(([U,P])=>P!==""?e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-bold mr-2 capitalize",children:[U.replace(/_/g," "),":"]}),e.jsx("span",{className:"text-normal break-words",children:typeof P=="object"&&P!==null?JSON.stringify(P,null,2):P})]},U):null)},k)):e.jsx(je,{variant:"body2",className:"text-gray-600",children:"No PSID Tracking records available."})]})}),ce=(u,w)=>e.jsx(Ce,{className:"mb-4",children:e.jsxs(Se,{children:[e.jsx(je,{variant:"h6",className:"font-bold mb-4",children:u}),Object.entries(w||{}).map(([n,k])=>{var U,P,ue,O,I,l,h,R,j;return k!==""&&n!=="applicationassignment"&&n!=="applicationdocument"&&n in ke?e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-4",children:[e.jsxs("div",{className:"w-full md:flex-[5] flex flex-col md:flex-row items-start md:items-center mb-2 md:mb-0",children:[e.jsxs("span",{className:"font-bold mr-2",children:[ke[n]||n,":"]}),e.jsx("span",{className:"text-normal break-words",children:JSON.stringify(k,null,2)})]}),!J.includes(n)&&e.jsxs("div",{className:"w-full md:flex-[3] flex items-center justify-center space-x-4 mt-2 md:mt-0",style:{border:c(n)?"2px solid red":"",padding:c(n)?"5px":"",borderRadius:c(n)?"6px":""},children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:`response-${n}`,value:"Yes",checked:((U=m[n])==null?void 0:U.response)==="Yes",disabled:x,onChange:()=>{D(n,"Yes")}}),e.jsx("span",{children:"Yes"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:`response-${n}`,value:"No",checked:((P=m[n])==null?void 0:P.response)==="No",disabled:x,onChange:()=>{D(n,"No")}}),e.jsx("span",{children:"No"})]})]}),e.jsx("div",{className:"w-full md:flex-[5]",children:(((ue=m[n])==null?void 0:ue.response)==="Yes"||((O=m[n])==null?void 0:O.response)==="No")&&e.jsxs("div",{children:[e.jsx(H,{type:"textarea",placeholder:"Add comment",value:((I=m[n])==null?void 0:I.comment)||"",onChange:a=>Re(n,a.target.value),className:`w-full border ${((l=m[n])==null?void 0:l.response)==="No"&&!((h=m[n])!=null&&h.comment)?"border-red-500":"border-gray-300"} rounded-lg p-2`,readOnly:x}),((R=m[n])==null?void 0:R.response)==="No"&&!((j=m[n])!=null&&j.comment)&&e.jsx("span",{className:"text-red-500 text-sm",children:"Comment is required for 'No'"})]})})]},n):null})]})}),We=u=>e.jsx(Ce,{sx:{marginBottom:"20px"},children:e.jsxs(Se,{children:[e.jsx(je,{variant:"h6",sx:{fontWeight:"bold",marginBottom:"10px"},children:"Documents"}),e.jsx("ul",{children:u.map(w=>e.jsx("li",{children:e.jsxs("a",{href:w.document,target:"_blank",rel:"noopener noreferrer",children:[w.document_description," ",w.created_at.substring(0,19)]})},w.id))})]})}),Le={backgroundColor:"#f0f8ff",border:"1px solid #007bff",padding:"10px",borderRadius:"4px",marginBottom:"15px"},Je=()=>{var u,w,n,k,U,P,ue,O,I,l,h,R,j,a,d,_,M,V,_e,ge,Q;return e.jsxs(e.Fragment,{children:[e.jsx(Ce,{sx:Le,children:e.jsxs(Se,{children:[e.jsx(je,{variant:"h6",sx:{color:"#007bff",marginBottom:"10px"},children:"Information to be provided by District Incharge"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(q,{label:"Latitude",invalid:!!f.latitude,errorMessage:(u=f.latitude)==null?void 0:u.message,children:e.jsx(H,{type:"number",placeholder:"Enter Latitude",value:b.latitude||"",onChange:g=>v("latitude",g.target.value),readOnly:x})}),e.jsx(q,{label:"Longitude",invalid:!!f.longitude,errorMessage:(w=f.longitude)==null?void 0:w.message,children:e.jsx(H,{type:"number",placeholder:"Enter Longitude",value:b.longitude||"",onChange:g=>v("longitude",g.target.value),readOnly:x})})]}),se.licenseType==="Producer"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(q,{label:"List of Products",invalid:!!f.listOfProducts,errorMessage:(n=f.listOfProducts)==null?void 0:n.message,children:e.jsx(H,{type:"text",autoComplete:"off",placeholder:"List of Products",value:b.list_of_products||"",onChange:g=>v("list_of_products",g.target.value),readOnly:x})}),e.jsx(q,{label:"List of By Products",invalid:!!f.listOfByProducts,errorMessage:(k=f.listOfByProducts)==null?void 0:k.message,children:e.jsx(H,{type:"text",autoComplete:"off",placeholder:"List of By Products",value:b.list_of_by_products||"",onChange:g=>v("list_of_by_products",g.target.value),readOnly:x})}),e.jsx(q,{label:"List and Quantity of Raw Material Imported",invalid:!!f.rawMaterialImported,errorMessage:(U=f.rawMaterialImported)==null?void 0:U.message,children:e.jsx(H,{type:"text",autoComplete:"off",placeholder:"List and Quantity of Raw Material Imported",value:b.raw_material_imported||"",onChange:g=>v("raw_material_imported",g.target.value),readOnly:x})}),e.jsx(q,{label:"If raw material is bought, then Name of Seller",invalid:!!f.sellerNameIfRawMaterialBought,errorMessage:(P=f.sellerNameIfRawMaterialBought)==null?void 0:P.message,children:e.jsx(H,{type:"text",autoComplete:"off",placeholder:"If raw material is bought then Name of seller",value:b.seller_name_if_raw_material_bought||"",onChange:g=>v("seller_name_if_raw_material_bought",g.target.value),readOnly:x})}),e.jsx(q,{label:"If self import, provide details",invalid:!!f.selfImportDetails,errorMessage:(ue=f.selfImportDetails)==null?void 0:ue.message,children:e.jsx(H,{type:"text",autoComplete:"off",placeholder:"If self import, provide details",value:b.self_import_details||"",onChange:g=>v("self_import_details",g.target.value),readOnly:x})}),e.jsx(q,{label:"Quantity of Raw Material Utilized",invalid:!!f.rawMaterialUtilized,errorMessage:(O=f.rawMaterialUtilized)==null?void 0:O.message,children:e.jsx(H,{type:"text",autoComplete:"off",placeholder:"Quantity of raw material utilized",value:b.raw_material_utilized||"",onChange:g=>v("raw_material_utilized",g.target.value),readOnly:x})})]}),e.jsx("div",{className:"grid md:grid-cols-1 gap-4",children:e.jsx("div",{className:"mb-4",children:e.jsx(aa,{textAlign:"left"})})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(q,{label:"Status of compliance with – Thickness 75 micron",invalid:!!f.complianceThickness75,errorMessage:(I=f.complianceThickness75)==null?void 0:I.message,children:e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"complianceThickness75",value:"Yes",checked:b.compliance_thickness_75==="Yes",onChange:()=>v("compliance_thickness_75","Yes"),disabled:x}),e.jsx("span",{children:"Yes"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"complianceThickness75",value:"No",checked:b.compliance_thickness_75==="No",onChange:()=>v("compliance_thickness_75","No"),disabled:x}),e.jsx("span",{children:"No"})]})]})}),e.jsx(q,{label:"Does the unit have a valid consent/permit under the building and construction by-laws?",invalid:!!f.validConsentPermitBuildingBylaws,errorMessage:(l=f.validConsentPermitBuildingBylaws)==null?void 0:l.message,children:e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"validConsentPermitBuildingBylaws",value:"Yes",checked:b.valid_consent_permit_building_bylaws==="Yes",onChange:()=>v("valid_consent_permit_building_bylaws","Yes"),disabled:x}),e.jsx("span",{children:"Yes, please attach a copy"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"validConsentPermitBuildingBylaws",value:"No",checked:b.valid_consent_permit_building_bylaws==="No",onChange:()=>v("valid_consent_permit_building_bylaws","No"),disabled:x}),e.jsx("span",{children:"No"})]})]})}),e.jsx(q,{label:"Copy of consent/permit under the building and construction by-laws",invalid:!!f.consentPermitFile,errorMessage:(h=f.consentPermitFile)==null?void 0:h.message,children:e.jsx(H,{type:"file",accept:".pdf,.png,.jpg",onChange:g=>v("consent_permit_file",g.target.files[0]),disabled:x})}),e.jsx(q,{label:"Flow Diagram",invalid:!!f.flowDiagramFile,errorMessage:(R=f.flowDiagramFile)==null?void 0:R.message,children:e.jsx(H,{type:"file",accept:".pdf,.png,.jpg",onChange:g=>v("flow_diagram_file",g.target.files[0]),disabled:x})}),e.jsx(q,{label:e.jsxs("p",{children:[e.jsx("p",{children:"Action Plan (in accordance with the Section 6 of the Regulations)"}),e.jsx("span",{"data-tip":!0,"data-for":"info-tooltip",className:"absolute top-0 right-0 mt-2 mr-2 cursor-pointer",onClick:W,onMouseEnter:()=>ve(!0),children:e.jsx(Ut,{className:"text-blue-500"})})]}),invalid:!!f.actionPlanFile,errorMessage:(j=f.actionPlanFile)==null?void 0:j.message,children:e.jsx(H,{type:"file",accept:".pdf,.png,.jpg",onChange:g=>v("action_plan_file",g.target.files[0]),disabled:x})}),e.jsx(q,{label:"List of Stockist/Distributor/Supplier to whom the products will be supplied",invalid:!!f.stockistDistributorList,errorMessage:(a=f.stockistDistributorList)==null?void 0:a.message,children:e.jsx(H,{type:"text",autoComplete:"off",placeholder:"List of Stockist/Distributor/Supplier",value:b.stockist_distributor_list||"",onChange:g=>v("stockist_distributor_list",g.target.value),readOnly:x})})]})]}),se.licenseType==="Consumer"&&e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:e.jsx(q,{label:"Average Sales (Kg per day)",invalid:!!f.procurementPerDay,errorMessage:(d=f.procurementPerDay)==null?void 0:d.message,children:e.jsx(H,{type:"text",placeholder:"Average Sales",value:b.procurement_per_day||"",onChange:g=>v("procurement_per_day",g.target.value),readOnly:x})})}),se.licenseType==="Recycler"&&e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(q,{label:"No. of workers (including contract labour)",invalid:!!f.noOfWorkers,errorMessage:(_=f.noOfWorkers)==null?void 0:_.message,children:e.jsx(H,{type:"text",autoComplete:"off",placeholder:"No. of workers (including contract labour)",style:{padding:"5px",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:"#f9f9f9"},value:b.no_of_workers||"",onChange:g=>v("no_of_workers",g.target.value),readOnly:x})}),e.jsx(q,{label:"Whether registered with Labor Dept.? If Yes, provide details?",invalid:!!f.laborDeptRegistrationStatus,errorMessage:(M=f.laborDeptRegistrationStatus)==null?void 0:M.message,children:e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"labor_dept_registration_status",value:"Yes",checked:b.labor_dept_registration_status==="Yes",onChange:()=>{v("labor_dept_registration_status","Yes"),oe(!0)},disabled:x}),e.jsx("span",{children:"Yes, please provide details"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"labor_dept_registration_status",value:"No",checked:b.labor_dept_registration_status==="No",onChange:()=>{v("labor_dept_registration_status","No"),oe(!1)},disabled:x}),e.jsx("span",{children:"No"})]})]})}),e.jsx(q,{label:"Occupational safety and health aspects (Please provide details of facilities)",invalid:!!f.occupationalSafetyAndHealthFacilities,errorMessage:(V=f.occupationalSafetyAndHealthFacilities)==null?void 0:V.message,children:e.jsx(H,{type:"text",autoComplete:"off",placeholder:"Occupational safety and health facilities",style:{padding:"5px",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:"#f9f9f9"},value:b.occupational_safety_and_health_facilities||"",onChange:g=>v("occupational_safety_and_health_facilities",g.target.value),readOnly:x})}),e.jsx(q,{label:"Whether conditions exist or are likely to exist for the material being handled or processed to pose adverse impacts on the environment?",invalid:!!f.adverseEnvironmentalImpacts,errorMessage:(_e=f.adverseEnvironmentalImpacts)==null?void 0:_e.message,children:e.jsx(H,{type:"text",autoComplete:"off",placeholder:"Adverse environmental impacts details",style:{padding:"5px",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:"#f9f9f9"},value:b.adverse_environmental_impacts||"",onChange:g=>v("adverse_environmental_impacts",g.target.value),readOnly:x})})]}),(xe||!te)&&he&&e.jsx(Ce,{sx:Le,children:e.jsxs(Se,{children:[e.jsx(je,{variant:"h6",sx:{color:"#007bff",marginBottom:"10px"},children:"Upload 'Registration with Labor Department' Document"}),e.jsx(q,{label:"Registration with Labor Department",invalid:!!f.registrationWithLaborDept,errorMessage:(ge=f.registrationWithLaborDept)==null?void 0:ge.message,children:e.jsx(H,{type:"file",accept:".pdf,.png,.jpg",onChange:g=>S(g.target.files[0],"Registration with Labor Deparment"),disabled:te&&!xe})})]})})]})}),!te&&e.jsx(Ce,{sx:Le,children:e.jsxs(Se,{children:[e.jsx(je,{variant:"h6",sx:{color:"#007bff",marginBottom:"10px"},children:"Information to be provided by License Support Manager"}),e.jsxs("div",{className:"grid md:grid-cols-1 gap-4",children:[e.jsxs("div",{className:"flex flex-col mb-4",children:[e.jsx("label",{className:"mb-2 font-semibold",children:"Select Document Type:"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"documentType",value:"Fee Verification from Treasury/District Accounts Office",checked:Z==="Fee Verification from Treasury/District Accounts Office",onChange:be,className:"mr-2"}),"Fee Verification from Treasury/District Accounts Office"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"documentType",value:"Identity Document",checked:Z==="Identity Document",onChange:be,className:"mr-2"}),"Identity Document"]})]})]}),e.jsx(q,{label:"Fee Verification from Treasury/District Accounts Office / Identity Document",invalid:!!f.consentPermitFile,errorMessage:(Q=f.consentPermitFile)==null?void 0:Q.message,children:e.jsx(H,{type:"file",accept:".pdf,.png,.jpg",onChange:Ve,disabled:te})})]})]})})]})};return e.jsxs("div",{className:"p-4",style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"20px"},children:[e.jsx(va,{id:"my-tooltip"}),e.jsxs("div",{children:[e.jsx(je,{variant:"h4",sx:{fontWeight:"bold",marginBottom:"20px"},children:"Review Information"}),!x&&e.jsx(Ce,{className:"mb-4",children:e.jsx(Se,{children:e.jsx(je,{variant:"h7",sx:{fontWeight:"bold",marginBottom:"20px"},children:'Please review the information provided by the applicant. This information is not editable and it is for your review only. Please click "Yes" if information is found correct and "No" if information is not correct. In case of "No" pleae add your comments too.'})})}),x&&e.jsx(Ce,{className:"mb-4",children:e.jsx(Se,{children:e.jsx(je,{variant:"h7",sx:{fontWeight:"bold",marginBottom:"20px"},children:"Please review the information provided by the applicant and District Incharge."})})}),fe.includes("applicantDetail")&&ce("Applicant Details",p),fe.includes("businessEntity")&&ce("Business Entity",Pe),fe.includes("businessDetailIndividual")&&ce("Business Details",Ae),fe.includes("licenseDetail")&&ce("License Details",se),se.licenseType==="Producer"&&ce("Producer Details",Fe),se.licenseType==="Consumer"&&ce("Consumer Details",Me),se.licenseType==="Collector"&&ce("Collector Details",ie),se.licenseType==="Recycler"&&ce("Recycler Details",De),((Ye=p==null?void 0:p.applicationdocument)==null?void 0:Ye.length)>0&&We(p.applicationdocument),((Ke=p==null?void 0:p.psid_tracking)==null?void 0:Ke.length)>0&&Be("PSID Tracking",p.psid_tracking),Je(),Ee&&e.jsxs(e.Fragment,{children:[e.jsx(Ce,{sx:{marginBottom:"20px"},children:e.jsx(Se,{children:e.jsx(gt,{fullWidth:!0,children:e.jsx(ea,{id:"Remarks",label:"Remarks",variant:"outlined",value:re,onChange:t})})})}),e.jsx(Ce,{children:e.jsx(Se,{children:e.jsxs(gt,{children:[e.jsxs(ta,{sx:{backgroundColor:"#fff3cd",color:"#856404",padding:"10px 12px",borderRadius:"4px",marginBottom:"16px",border:"1px solid #ffeeba"},children:[e.jsx(je,{variant:"subtitle2",fontWeight:"bold",children:"Note:"}),e.jsx(je,{variant:"body2",children:"Please select any of the below actions:"})]}),e.jsx(ht,{control:e.jsx(_t,{name:"nextStage",checked:N.nextStage,onChange:z}),label:Ie?"Yes - As per the remarks and verification, all codal formalities for the issuance of the license have been fulfilled.":qe?"Yes - Approved. License has been issued.":`Yes - As per the remarks and verification, please proceed for issuance of the license ${((de=o[1])==null?void 0:de.label)==="DO"?"":"("+((L=o[2])==null?void 0:L.label)+")"}`}),e.jsx(ht,{control:e.jsx(_t,{name:"previousStage",checked:N.previousStage,onChange:z}),label:`No - As per the remarks and verification, please proceed to the previous stage for preliminary scrutiny/data entry, etc. ${((Qe=o[1])==null?void 0:Qe.label)==="DO"?"":"("+((Ue=o[0])==null?void 0:Ue.label)+")"}`})]})})})]})]}),e.jsx("div",{children:e.jsx(Ce,{children:e.jsx(Se,{children:e.jsx("div",{children:p!=null&&p.applicationassignment?e.jsx("div",{children:e.jsx("div",{children:p.applicationassignment},"abc123")},"abc123"):null})})})}),Ee&&e.jsx(Ce,{children:e.jsx(Se,{children:r})}),e.jsx("div",{}),(X||le)&&e.jsx("div",{className:"modal",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("span",{className:"close",onClick:ee,children:"×"}),e.jsx("h2",{children:"Modal Title"}),e.jsx("p",{children:"This is the modal content."})]})}),e.jsx(nt,{isOpen:X||le,title:"Responsibilities of the producer.-",onClose:ee,onRequestClose:ee,onCancel:ee,onConfirm:ee,children:e.jsxs("p",{children:["The producer shall:",e.jsxs("ol",{className:"list-decimal pl-6",children:[e.jsx("li",{children:"establish a system for collection of the plastic waste generated due to his products within a period of six months from the commencement of the regulations;"}),e.jsx("li",{children:"ensure that the minimum requirement of twenty percent mixing of recycled material shall be met in production of single-use plastic product along with virgin material;"}),e.jsx("li",{children:"carry out awareness campaigns regarding proper disposal of single-use plastic product which may include, but not limited to, displaying educative slogans, or messages, etc.; and"}),e.jsx("li",{children:"perform other function as notified by the Agency for implementation of the regulations."})]})]})})]})},Va=()=>{var $e,ae,Te;const{id:o}=Mt(),r=It(),[C,y]=s.useState(0),[E,N]=s.useState(!1),[$,m]=s.useState(!1),[A,b]=s.useState(!1),[G,X]=s.useState(null),ve=c=>{if(c===3){y(6);return}if(c===5){y(2);return}c<0?y(0):c>6?y(6):y(c)},le=()=>ve(C-1);s.useEffect(()=>{console.log("its here1"),o?re(o):(Pe(),Me(),me(),Ee())},[o]);const ne=c=>e.jsxs("div",{children:[e.jsx("h5",{children:"Application Assignments"}),c.map((t,i)=>e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsxs("strong",{children:[i+1,") Assigned By:"]})," ",t.created_by," (",t.created_by_group,")"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Assigned Group:"})," ",t.assigned_group]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Remarks:"})," ",t.remarks||"No remarks"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Updated Date/Time:"})," ",new Date(t.created_at).toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})]})]},t.id))]}),re=c=>{Ge.get(`/pmc/applicant-detail/${c}/`,{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{var D,Re;console.log("Data:",t.data);const i={trackingNumber:t.data.tracking_number,firstName:t.data.first_name,lastName:t.data.last_name,applicantDesignation:t.data.applicant_designation,gender:t.data.gender,cnic:t.data.cnic,email:t.data.email,phoneNumber:t.data.mobile_no,id:t.data.id,has_identity_document:t.data.has_identity_document,has_fee_challan:t.data.has_fee_challan,applicationStatus:t.data.application_status,assignedGroup:t.data.assigned_group,applicationassignment:ne(t.data.applicationassignment),applicationdocument:t.data.applicationdocument,field_responses:t.data.field_responses,manual_fields:t.data.manual_fields,psid_tracking:t.data.psid_tracking};if(Ae(i),t.data.businessprofile){if(t.data.businessprofile.entity_type==="Company"){const z={applicant:t.data.id,businessName:t.data.businessprofile.business_name,district:t.data.businessprofile.district,tehsil:t.data.businessprofile.tehsil,city:t.data.businessprofile.city_town_village,postalAddress:t.data.businessprofile.postal_address,mobileNumber:t.data.businessprofile.mobile_no,id:t.data.businessprofile.id};Fe(z)}{const z={applicant:t.data.id,name:t.data.businessprofile.name,district:t.data.businessprofile.district_name,tehsil:t.data.businessprofile.tehsil_name,city:t.data.businessprofile.city_town_village,postalAddress:t.data.businessprofile.postal_address,mobileNumber:t.data.businessprofile.mobile_no,id:t.data.businessprofile.id};De(z)}Y({businessEntityType:t.data.businessprofile.entity_type})}if(qe({licenseType:t.data.registration_for}),t.data.producer&&t.data.registration_for==="Producer"){const z={tracking_number:t.data.producer.tracking_number||"",registration_required_for:t.data.producer.registration_required_for||[],registration_required_for_other:t.data.producer.registration_required_for_other||[],registration_required_for_other_other_text:t.data.producer.registration_required_for_other_other_text||"",plain_plastic_Sheets_for_food_wrapping:t.data.producer.plain_plastic_sheets_for_food_wrapping||[],PackagingItems:t.data.producer.packaging_items||[],number_of_machines:t.data.producer.number_of_machines||"",total_capacity_value:((D=t.data.producer.total_capacity_value)==null?void 0:D.toString())||"",date_of_setting_up:t.data.producer.date_of_setting_up||"",total_waste_generated_value:((Re=t.data.producer.total_waste_generated_value)==null?void 0:Re.toString())||"",has_waste_storage_capacity:t.data.producer.has_waste_storage_capacity||"",waste_disposal_provision:t.data.producer.waste_disposal_provision||"",applicant:t.data.producer.applicant||"",totalFeeAmount:t.data.applicantfees?t.data.applicantfees.reduce((S,v)=>S+parseFloat(v.fee_amount||0),0):0,verifiedFeeAmount:t.data.applicantfees?t.data.applicantfees.filter(S=>S.is_settled).reduce((S,v)=>S+parseFloat(v.fee_amount||0),0):0};f(z)}if(t.data.consumer&&t.data.registration_for==="Consumer"){const z={registration_required_for:t.data.consumer.registration_required_for||[],registration_required_for_other:t.data.consumer.registration_required_for_other||[],registration_required_for_other_other_text:t.data.consumer.registration_required_for_other_other_text||"",plain_plastic_Sheets_for_food_wrapping:t.data.consumer.plain_plastic_sheets_for_food_wrapping||[],PackagingItems:t.data.consumer.packaging_items||[],consumption:t.data.consumer.consumption||"",provision_waste_disposal_bins:t.data.consumer.provision_waste_disposal_bins||"No",no_of_waste_disposible_bins:t.data.consumer.no_of_waste_disposable_bins||"",segregated_plastics_handed_over_to_registered_recyclers:t.data.consumer.segregated_plastics_handed_over_to_registered_recyclers||"No",applicant:t.data.consumer.applicant||"",totalFeeAmount:t.data.applicantfees?t.data.applicantfees.reduce((S,v)=>S+parseFloat(v.fee_amount||0),0):0,verifiedFeeAmount:t.data.applicantfees?t.data.applicantfees.filter(S=>S.is_settled).reduce((S,v)=>S+parseFloat(v.fee_amount||0),0):0};Ze(z)}if(t.data.recycler&&t.data.registration_for==="Recycler"){const z={selectedCategories:t.data.recycler.selected_categories||[],plastic_waste_acquired_through:t.data.recycler.plastic_waste_acquired_through||[],has_adequate_pollution_control_systems:t.data.recycler.has_adequate_pollution_control_systems||"No",pollution_control_details:t.data.recycler.pollution_control_details||"",applicant:t.data.recycler.applicant||"",registration_required_for_other_other_text:t.data.recycler.registration_required_for_other_other_text||"",totalFeeAmount:t.data.applicantfees?t.data.applicantfees.reduce((S,v)=>S+parseFloat(v.fee_amount||0),0):0,verifiedFeeAmount:t.data.applicantfees?t.data.applicantfees.filter(S=>S.is_settled).reduce((S,v)=>S+parseFloat(v.fee_amount||0),0):0};K(z)}if(t.data.collector&&t.data.registration_for==="Collector"){const z={registration_required_for:t.data.collector.registration_required_for||[],registration_required_for_other:t.data.collector.registration_required_for_other||[],registration_required_for_other_other_text:t.data.collector.registration_required_for_other_other_text||"",selectedCategoriesCollector:t.data.collector.selected_categories||[],total_capacity_value_collector:t.data.collector.total_capacity_value||"",number_of_vehicles:t.data.collector.number_of_vehicles||"",number_of_persons:t.data.collector.number_of_persons||"",applicant:t.data.collector.applicant||"",totalFeeAmount:t.data.applicantfees?t.data.applicantfees.reduce((S,v)=>S+parseFloat(v.fee_amount||0),0):0,verifiedFeeAmount:t.data.applicantfees?t.data.applicantfees.filter(S=>S.is_settled).reduce((S,v)=>S+parseFloat(v.fee_amount||0),0):0};He(z)}t.data.application_status==="Fee Challan"&&y(4)}).catch(t=>{console.error("Error:",t)})},pe=()=>{N(!1),$t.push(e.jsx(Wt,{type:"success",children:"Customer discard!"}),{placement:"top-center"}),r("/concepts/customers/customer-list")},Z=()=>{N(!0)},ye=()=>{m(!0)},W=()=>{N(!1),m(!1)},ee=()=>{m(!1),le()},be=async()=>{if(!p.readOnly){console.log("readOnly",p.readOnly);const c=Object.entries(p.fieldResponses).map(([t,i])=>({field_key:t,response:i.response,comment:i.comment,applicant:p.id}));try{const t=await Ge.post("/pmc/field-responses/",c,{headers:{"Content-Type":"application/json"}});console.log("Responses submitted:",t.data)}catch(t){console.error("Error submitting responses:",t),r("/error")}}},Ve=async()=>{const{manualFields:c}=p,t=new FormData;if(t.append("applicant",p.id),t.append("latitude",c.latitude?parseFloat(c.latitude).toFixed(6):""),t.append("longitude",c.longitude?parseFloat(c.longitude).toFixed(6):""),t.append("list_of_products",c.list_of_products||""),t.append("list_of_by_products",c.list_of_by_products||""),t.append("raw_material_imported",c.raw_material_imported||""),t.append("seller_name_if_raw_material_bought",c.seller_name_if_raw_material_bought||""),t.append("self_import_details",c.self_import_details||""),t.append("raw_material_utilized",c.raw_material_utilized||""),t.append("compliance_thickness_75",c.compliance_thickness_75||""),t.append("valid_consent_permit_building_bylaws",c.valid_consent_permit_building_bylaws||""),t.append("stockist_distributor_list",c.stockist_distributor_list||""),t.append("procurement_per_day",c.procurement_per_day||""),t.append("no_of_workers",c.no_of_workers||""),t.append("labor_dept_registration_status",c.labor_dept_registration_status||""),t.append("occupational_safety_and_health_facilities",c.occupational_safety_and_health_facilities||""),t.append("adverse_environmental_impacts",c.adverse_environmental_impacts||""),c.consent_permit_file){const i=new FormData;i.append("document",c.consent_permit_file),i.append("document_description","Consent Permit"),i.append("applicant",p.id.toString());try{const D=await Ge.post("/pmc/applicant-documents/",i,{headers:{"Content-Type":"multipart/form-data"}});console.log("Post successful:",D.data)}catch(D){console.error("Error in POST request:",D.response||D.message),r("/error")}}if(c.flow_diagram_file){const i=new FormData;i.append("document",c.flow_diagram_file),i.append("document_description","Flow Diagram"),i.append("applicant",p.id.toString());try{const D=await Ge.post("/pmc/applicant-documents/",i,{headers:{"Content-Type":"multipart/form-data"}});console.log("Post successful:",D.data)}catch(D){console.error("Error in POST request:",D.response||D.message),r("/error")}}if(c.action_plan_file){const i=new FormData;i.append("document",c.action_plan_file),i.append("document_description","Action Plan"),i.append("applicant",p.id.toString());try{const D=await Ge.post("/pmc/applicant-documents/",i,{headers:{"Content-Type":"multipart/form-data"}});console.log("Post successful:",D.data)}catch(D){console.error("Error in POST request:",D.response||D.message),r("/error")}}if(c.id)try{const i=await Ge.patch(`/pmc/manual-fields/${c.id}/`,t,{headers:{"Content-Type":"multipart/form-data"}});alert("Data is saved!"),console.log("PATCH success:",i.data)}catch(i){console.error("Error PATCHing manual fields:",i),r("/error")}else try{const i=await Ge.post("/pmc/manual-fields/",t,{headers:{"Content-Type":"multipart/form-data"}});console.log("POST success:",i.data),alert("Data is saved!")}catch(i){console.error("Error POSTing manual fields:",i),r("/error")}},J=async()=>{var c,t;if(b(!0),p.assignedGroup2!==""&&p.assignedGroup2!==void 0)try{const i=new FormData;i.append("applicant",p.id.toString()),i.append("assigned_group",p.assignedGroup2),i.append("remarks",p.remarks),console.log(p.remarks),await Ge.post("/pmc/application-assignment/",i,{headers:{"Content-Type":"multipart/form-data"}}),r("/home")}catch(i){const D={status:(c=i.response)==null?void 0:c.status,data:(t=i.response)==null?void 0:t.data,message:i.message};r("/error",{state:{error:D}})}be(),Ve(),b(!1)},{applicantDetail:p,updateApplicantDetail:Ae,resetApplicantDetail:Pe,businessDetail:se,updateBusinessDetail:Fe,resetBusinessDetail:Me,businessDetailIndividual:ie,updateBusinessDetailIndividual:De,resetBusinessDetailIndividual:me,businessEntity:fe,updateBusinessEntity:Y,resetBusinessEntity:Ee,resetAll:xe,completedSections:F,getValuesFromStateBusinessEntity:Oe,getValuesFromLicenseDetail:Ie,updateLicenseDetail:qe,updateLicenseDetailCollector:He,updateLicenseDetailConsumer:Ze,updateLicenseDetailProducer:f,updateLicenseDetailRecycler:K,resetLicenseDetail:x,resetLicenseDetailProducer:te}=Nt();Oe(),Ie();const he=["APPLICANT","LSO","LSM","DO","LSM2","TL","DEO","DG","Download License"],oe=we(p.assignedGroup);console.log("assignedGroup:",p.assignedGroup),console.log("groupList",oe);function we(c){console.log(c);const t=he.indexOf(c);return he.slice(Math.max(0,t-1),t+2).map(D=>({value:D,label:D}))}return e.jsxs(e.Fragment,{children:[e.jsx(ya,{groupList:oe,setMovementDirection:X,children:e.jsx(qt,{children:e.jsxs("div",{className:"flex items-center justify-between px-8",children:[e.jsx("span",{}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(rt,{className:"ltr:mr-3 rtl:ml-3",type:"button",customColorClass:()=>"border-error ring-1 ring-error text-error hover:border-error hover:ring-error hover:text-error bg-transparent",icon:e.jsx(Yt,{}),onClick:Z,children:"Discard"}),e.jsx(rt,{icon:e.jsx(Gt,{}),className:"ltr:mr-3 rtl:ml-3",variant:"solid",type:"button",loading:A,disabled:C===0,onClick:ye,children:"Back"}),e.jsx(rt,{icon:e.jsx(zt,{}),variant:"solid",type:"button",onClick:J,loading:A,disabled:!G,children:G==="forward"&&(($e=oe[2])==null?void 0:$e.label)==="Download License"?"License has been issued":G==="forward"?`Forward to "${((ae=oe[2])==null?void 0:ae.label)||"Next Stage"}"`:G==="backward"?`Backward to "${((Te=oe[0])==null?void 0:Te.label)||"Previous Stage"}"`:"Select any of above options"})]})]})})}),e.jsx(nt,{isOpen:E,type:"danger",title:"Discard changes",onClose:W,onRequestClose:W,onCancel:W,onConfirm:pe,children:e.jsx("p",{children:"Are you sure you want discard this?"})}),e.jsx(nt,{isOpen:$,type:"danger",title:"Go Back",onClose:W,onRequestClose:W,onCancel:W,onConfirm:ee,children:e.jsx("p",{children:"There are unsaved changes on this step, Are you sure you want to go back step?"})})]})};export{Va as default};
