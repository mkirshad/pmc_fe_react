import{C as _r,P as Br,ae as de,j as J,y as Pr,r as hr,T as nr,Z as F}from"./index-D4QAXRqy.js";import{F as Wr,d as Hr,u as $r,e as qr}from"./Button-7o7uDro5.js";import{c as lr}from"./classNames-x-G1GcBF.js";import{A as zr}from"./index-C6gd6nQo.js";import{m as Zr}from"./CloseButton-1OxGvMRc.js";const mr=e=>{const{controlSize:t}=_r(),{children:r,className:i,labelWidth:n=100,layout:u=de.VERTICAL,size:c=Br.MD}=e,y={labelWidth:n,layout:u,size:c||t};return J.jsx(Wr,{value:y,children:J.jsx(Hr,{children:v=>J.jsx("div",{className:Pr("form-container",v==null?void 0:v.layout,i),children:r})})})};mr.displayName="FormContainer";const Kr=hr.forwardRef((e,t)=>{const{children:r,containerClassName:i,labelWidth:n,layout:u,size:c,...y}=e;return J.jsx("form",{ref:t,...y,children:J.jsx(mr,{className:i,labelWidth:n,layout:u,size:c,children:r})})});Kr.displayName="Form";const Yr=hr.forwardRef((e,t)=>{const{asterisk:r,children:i,className:n,errorMessage:u,extra:c,htmlFor:y,invalid:v,label:A,labelClass:S,labelWidth:b,layout:O,style:D,size:I}=e,C=$r(),{controlSize:H}=_r(),Y=I||(C==null?void 0:C.size)||H,w=b||(C==null?void 0:C.labelWidth),$=O||(C==null?void 0:C.layout)||"vertical",G=()=>{switch($){case de.HORIZONTAL:return A?`${nr[Y].h} ${A&&"ltr:pr-2 rtl:pl-2"}`:"ltr:pr-2 rtl:pl-2";case de.VERTICAL:return"mb-2";case de.INLINE:return`${nr[Y].h} ${A&&"ltr:pr-2 rtl:pl-2"}`;default:return""}},N=lr("form-item",$,n,v?"invalid":""),_=lr("form-label",A&&G(),S),h=()=>$===de.HORIZONTAL?{...D,minWidth:w}:{...D},x={opacity:1,marginTop:3,bottom:-21},L={opacity:0,marginTop:-10},U=L;return J.jsx(qr,{value:{invalid:v},children:J.jsxs("div",{ref:t,className:N,children:[J.jsxs("label",{htmlFor:y,className:_,style:h(),children:[r&&J.jsx("span",{className:"text-red-500 ltr:mr-1 rtl:ml-1",children:"*"}),A,c&&J.jsx("span",{children:c}),A&&$!=="vertical"&&":"]}),J.jsxs("div",{className:$===de.HORIZONTAL?"w-full flex flex-col justify-center relative":"",children:[i,J.jsx(zr,{mode:"wait",children:v&&J.jsx(Zr.div,{className:"form-explain",initial:U,animate:x,exit:L,transition:{duration:.15,type:"tween"},children:u})})]})]})})});Yr.displayName="FormItem";var be=e=>e.type==="checkbox",oe=e=>e instanceof Date,Z=e=>e==null;const vr=e=>typeof e=="object";var R=e=>!Z(e)&&!Array.isArray(e)&&vr(e)&&!oe(e),br=e=>R(e)&&e.target?be(e.target)?e.target.checked:e.target.value:e,Gr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Fr=(e,t)=>e.has(Gr(t)),Jr=e=>{const t=e.constructor&&e.constructor.prototype;return R(t)&&t.hasOwnProperty("isPrototypeOf")},ze=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function B(e){let t;const r=Array.isArray(e),i=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(ze&&(e instanceof Blob||i))&&(r||R(e)))if(t=r?[]:{},!r&&!Jr(e))t=e;else for(const n in e)e.hasOwnProperty(n)&&(t[n]=B(e[n]));else return e;return t}var Fe=e=>Array.isArray(e)?e.filter(Boolean):[],T=e=>e===void 0,d=(e,t,r)=>{if(!t||!R(e))return r;const i=Fe(t.split(/[,[\].]+?/)).reduce((n,u)=>Z(n)?n:n[u],e);return T(i)||i===e?T(e[t])?r:e[t]:i},X=e=>typeof e=="boolean",Ze=e=>/^\w*$/.test(e),Ar=e=>Fe(e.replace(/["|']|\]/g,"").split(/\.|\[/)),k=(e,t,r)=>{let i=-1;const n=Ze(t)?[t]:Ar(t),u=n.length,c=u-1;for(;++i<u;){const y=n[i];let v=r;if(i!==c){const A=e[y];v=R(A)||Array.isArray(A)?A:isNaN(+n[i+1])?{}:[]}if(y==="__proto__"||y==="constructor"||y==="prototype")return;e[y]=v,e=e[y]}return e};const xe={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ee={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ie={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Qr=F.createContext(null),we=()=>F.useContext(Qr);var xr=(e,t,r,i=!0)=>{const n={defaultValues:t._defaultValues};for(const u in e)Object.defineProperty(n,u,{get:()=>{const c=u;return t._proxyFormState[c]!==ee.all&&(t._proxyFormState[c]=!i||ee.all),r&&(r[c]=!0),e[c]}});return n},z=e=>R(e)&&!Object.keys(e).length,Vr=(e,t,r,i)=>{r(e);const{name:n,...u}=e;return z(u)||Object.keys(u).length>=Object.keys(t).length||Object.keys(u).find(c=>t[c]===(!i||ee.all))},K=e=>Array.isArray(e)?e:[e],pr=(e,t,r)=>!e||!t||e===t||K(e).some(i=>i&&(r?i===t:i.startsWith(t)||t.startsWith(i)));function De(e){const t=F.useRef(e);t.current=e,F.useEffect(()=>{const r=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{r&&r.unsubscribe()}},[e.disabled])}function Xr(e){const t=we(),{control:r=t.control,disabled:i,name:n,exact:u}=e||{},[c,y]=F.useState(r._formState),v=F.useRef(!0),A=F.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),S=F.useRef(n);return S.current=n,De({disabled:i,next:b=>v.current&&pr(S.current,b.name,u)&&Vr(b,A.current,r._updateFormState)&&y({...r._formState,...b}),subject:r._subjects.state}),F.useEffect(()=>(v.current=!0,A.current.isValid&&r._updateValid(!0),()=>{v.current=!1}),[r]),F.useMemo(()=>xr(c,r,A.current,!1),[c,r])}var se=e=>typeof e=="string",Sr=(e,t,r,i,n)=>se(e)?(i&&t.watch.add(e),d(r,e,n)):Array.isArray(e)?e.map(u=>(i&&t.watch.add(u),d(r,u))):(i&&(t.watchAll=!0),r);function et(e){const t=we(),{control:r=t.control,name:i,defaultValue:n,disabled:u,exact:c}=e||{},y=F.useRef(i);y.current=i,De({disabled:u,subject:r._subjects.values,next:S=>{pr(y.current,S.name,c)&&A(B(Sr(y.current,r._names,S.values||r._formValues,!1,n)))}});const[v,A]=F.useState(r._getWatch(i,n));return F.useEffect(()=>r._removeUnmounted()),v}function rt(e){const t=we(),{name:r,disabled:i,control:n=t.control,shouldUnregister:u}=e,c=Fr(n._names.array,r),y=et({control:n,name:r,defaultValue:d(n._formValues,r,d(n._defaultValues,r,e.defaultValue)),exact:!0}),v=Xr({control:n,name:r,exact:!0}),A=F.useRef(n.register(r,{...e.rules,value:y,...X(e.disabled)?{disabled:e.disabled}:{}})),S=F.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!d(v.errors,r)},isDirty:{enumerable:!0,get:()=>!!d(v.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!d(v.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!d(v.validatingFields,r)},error:{enumerable:!0,get:()=>d(v.errors,r)}}),[v,r]),b=F.useMemo(()=>({name:r,value:y,...X(i)||v.disabled?{disabled:v.disabled||i}:{},onChange:O=>A.current.onChange({target:{value:br(O),name:r},type:xe.CHANGE}),onBlur:()=>A.current.onBlur({target:{value:d(n._formValues,r),name:r},type:xe.BLUR}),ref:O=>{const D=d(n._fields,r);D&&O&&(D._f.ref={focus:()=>O.focus(),select:()=>O.select(),setCustomValidity:I=>O.setCustomValidity(I),reportValidity:()=>O.reportValidity()})}}),[r,n._formValues,i,v.disabled,y,n._fields]);return F.useEffect(()=>{const O=n._options.shouldUnregister||u,D=(I,C)=>{const H=d(n._fields,I);H&&H._f&&(H._f.mount=C)};if(D(r,!0),O){const I=B(d(n._options.defaultValues,r));k(n._defaultValues,r,I),T(d(n._formValues,r))&&k(n._formValues,r,I)}return!c&&n.register(r),()=>{(c?O&&!n._state.action:O)?n.unregister(r):D(r,!1)}},[r,n,c,u]),F.useEffect(()=>{n._updateDisabledField({disabled:i,fields:n._fields,name:r})},[i,r,n]),F.useMemo(()=>({field:b,formState:v,fieldState:S}),[b,v,S])}const xt=e=>e.render(rt(e));var tt=(e,t,r,i,n)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[i]:n||!0}}:{},ne=()=>{const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},Te=(e,t,r={})=>r.shouldFocus||T(r.shouldFocus)?r.focusName||`${e}.${T(r.focusIndex)?t:r.focusIndex}.`:"",ve=e=>({isOnSubmit:!e||e===ee.onSubmit,isOnBlur:e===ee.onBlur,isOnChange:e===ee.onChange,isOnAll:e===ee.all,isOnTouch:e===ee.onTouched}),He=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const fe=(e,t,r,i)=>{for(const n of r||Object.keys(e)){const u=d(e,n);if(u){const{_f:c,...y}=u;if(c){if(c.refs&&c.refs[0]&&t(c.refs[0],n)&&!i)return!0;if(c.ref&&t(c.ref,c.name)&&!i)return!0;if(fe(y,t))break}else if(R(y)&&fe(y,t))break}}};var wr=(e,t,r)=>{const i=K(d(e,r));return k(i,"root",t[r]),k(e,r,i),e},Ke=e=>e.type==="file",te=e=>typeof e=="function",Ve=e=>{if(!ze)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Ae=e=>se(e),Ye=e=>e.type==="radio",pe=e=>e instanceof RegExp;const ur={value:!1,isValid:!1},or={value:!0,isValid:!0};var Dr=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!T(e[0].attributes.value)?T(e[0].value)||e[0].value===""?or:{value:e[0].value,isValid:!0}:or:ur}return ur};const cr={isValid:!1,value:null};var Er=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,cr):cr;function dr(e,t,r="validate"){if(Ae(e)||Array.isArray(e)&&e.every(Ae)||X(e)&&!e)return{type:r,message:Ae(e)?e:"",ref:t}}var ce=e=>R(e)&&!pe(e)?e:{value:e,message:""},$e=async(e,t,r,i,n,u)=>{const{ref:c,refs:y,required:v,maxLength:A,minLength:S,min:b,max:O,pattern:D,validate:I,name:C,valueAsNumber:H,mount:Y}=e._f,w=d(r,C);if(!Y||t.has(C))return{};const $=y?y[0]:c,G=p=>{n&&$.reportValidity&&($.setCustomValidity(X(p)?"":p||""),$.reportValidity())},N={},_=Ye(c),h=be(c),x=_||h,L=(H||Ke(c))&&T(c.value)&&T(w)||Ve(c)&&c.value===""||w===""||Array.isArray(w)&&!w.length,U=tt.bind(null,C,i,N),ue=(p,E,j,q=ie.maxLength,re=ie.minLength)=>{const Q=p?E:j;N[C]={type:p?q:re,message:Q,ref:c,...U(p?q:re,Q)}};if(u?!Array.isArray(w)||!w.length:v&&(!x&&(L||Z(w))||X(w)&&!w||h&&!Dr(y).isValid||_&&!Er(y).isValid)){const{value:p,message:E}=Ae(v)?{value:!!v,message:v}:ce(v);if(p&&(N[C]={type:ie.required,message:E,ref:$,...U(ie.required,E)},!i))return G(E),N}if(!L&&(!Z(b)||!Z(O))){let p,E;const j=ce(O),q=ce(b);if(!Z(w)&&!isNaN(w)){const re=c.valueAsNumber||w&&+w;Z(j.value)||(p=re>j.value),Z(q.value)||(E=re<q.value)}else{const re=c.valueAsDate||new Date(w),Q=_e=>new Date(new Date().toDateString()+" "+_e),ye=c.type=="time",ge=c.type=="week";se(j.value)&&w&&(p=ye?Q(w)>Q(j.value):ge?w>j.value:re>new Date(j.value)),se(q.value)&&w&&(E=ye?Q(w)<Q(q.value):ge?w<q.value:re<new Date(q.value))}if((p||E)&&(ue(!!p,j.message,q.message,ie.max,ie.min),!i))return G(N[C].message),N}if((A||S)&&!L&&(se(w)||u&&Array.isArray(w))){const p=ce(A),E=ce(S),j=!Z(p.value)&&w.length>+p.value,q=!Z(E.value)&&w.length<+E.value;if((j||q)&&(ue(j,p.message,E.message),!i))return G(N[C].message),N}if(D&&!L&&se(w)){const{value:p,message:E}=ce(D);if(pe(p)&&!w.match(p)&&(N[C]={type:ie.pattern,message:E,ref:c,...U(ie.pattern,E)},!i))return G(E),N}if(I){if(te(I)){const p=await I(w,r),E=dr(p,$);if(E&&(N[C]={...E,...U(ie.validate,E.message)},!i))return G(E.message),N}else if(R(I)){let p={};for(const E in I){if(!z(p)&&!i)break;const j=dr(await I[E](w,r),$,E);j&&(p={...j,...U(E,j.message)},G(j.message),i&&(N[C]=p))}if(!z(p)&&(N[C]={ref:$,...p},!i))return N}}return G(!0),N},Ne=(e,t)=>[...e,...K(t)],Oe=e=>Array.isArray(e)?e.map(()=>{}):void 0;function Re(e,t,r){return[...e.slice(0,t),...K(r),...e.slice(t)]}var Ie=(e,t,r)=>Array.isArray(e)?(T(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],Ue=(e,t)=>[...K(t),...K(e)];function st(e,t){let r=0;const i=[...e];for(const n of t)i.splice(n-r,1),r++;return Fe(i).length?i:[]}var Me=(e,t)=>T(t)?[]:st(e,K(t).sort((r,i)=>r-i)),je=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]};function it(e,t){const r=t.slice(0,-1).length;let i=0;for(;i<r;)e=T(e)?i++:e[t[i++]];return e}function at(e){for(const t in e)if(e.hasOwnProperty(t)&&!T(e[t]))return!1;return!0}function M(e,t){const r=Array.isArray(t)?t:Ze(t)?[t]:Ar(t),i=r.length===1?e:it(e,r),n=r.length-1,u=r[n];return i&&delete i[u],n!==0&&(R(i)&&z(i)||Array.isArray(i)&&at(i))&&M(e,r.slice(0,-1)),e}var fr=(e,t,r)=>(e[t]=r,e);function Vt(e){const t=we(),{control:r=t.control,name:i,keyName:n="id",shouldUnregister:u,rules:c}=e,[y,v]=F.useState(r._getFieldArray(i)),A=F.useRef(r._getFieldArray(i).map(ne)),S=F.useRef(y),b=F.useRef(i),O=F.useRef(!1);b.current=i,S.current=y,r._names.array.add(i),c&&r.register(i,c),De({next:({values:_,name:h})=>{if(h===b.current||!h){const x=d(_,b.current);Array.isArray(x)&&(v(x),A.current=x.map(ne))}},subject:r._subjects.array});const D=F.useCallback(_=>{O.current=!0,r._updateFieldArray(i,_)},[r,i]),I=(_,h)=>{const x=K(B(_)),L=Ne(r._getFieldArray(i),x);r._names.focus=Te(i,L.length-1,h),A.current=Ne(A.current,x.map(ne)),D(L),v(L),r._updateFieldArray(i,L,Ne,{argA:Oe(_)})},C=(_,h)=>{const x=K(B(_)),L=Ue(r._getFieldArray(i),x);r._names.focus=Te(i,0,h),A.current=Ue(A.current,x.map(ne)),D(L),v(L),r._updateFieldArray(i,L,Ue,{argA:Oe(_)})},H=_=>{const h=Me(r._getFieldArray(i),_);A.current=Me(A.current,_),D(h),v(h),!Array.isArray(d(r._fields,i))&&k(r._fields,i,void 0),r._updateFieldArray(i,h,Me,{argA:_})},Y=(_,h,x)=>{const L=K(B(h)),U=Re(r._getFieldArray(i),_,L);r._names.focus=Te(i,_,x),A.current=Re(A.current,_,L.map(ne)),D(U),v(U),r._updateFieldArray(i,U,Re,{argA:_,argB:Oe(h)})},w=(_,h)=>{const x=r._getFieldArray(i);je(x,_,h),je(A.current,_,h),D(x),v(x),r._updateFieldArray(i,x,je,{argA:_,argB:h},!1)},$=(_,h)=>{const x=r._getFieldArray(i);Ie(x,_,h),Ie(A.current,_,h),D(x),v(x),r._updateFieldArray(i,x,Ie,{argA:_,argB:h},!1)},G=(_,h)=>{const x=B(h),L=fr(r._getFieldArray(i),_,x);A.current=[...L].map((U,ue)=>!U||ue===_?ne():A.current[ue]),D(L),v([...L]),r._updateFieldArray(i,L,fr,{argA:_,argB:x},!0,!1)},N=_=>{const h=K(B(_));A.current=h.map(ne),D([...h]),v([...h]),r._updateFieldArray(i,[...h],x=>x,{},!0,!1)};return F.useEffect(()=>{if(r._state.action=!1,He(i,r._names)&&r._subjects.state.next({...r._formState}),O.current&&(!ve(r._options.mode).isOnSubmit||r._formState.isSubmitted))if(r._options.resolver)r._executeSchema([i]).then(_=>{const h=d(_.errors,i),x=d(r._formState.errors,i);(x?!h&&x.type||h&&(x.type!==h.type||x.message!==h.message):h&&h.type)&&(h?k(r._formState.errors,i,h):M(r._formState.errors,i),r._subjects.state.next({errors:r._formState.errors}))});else{const _=d(r._fields,i);_&&_._f&&!(ve(r._options.reValidateMode).isOnSubmit&&ve(r._options.mode).isOnSubmit)&&$e(_,r._names.disabled,r._formValues,r._options.criteriaMode===ee.all,r._options.shouldUseNativeValidation,!0).then(h=>!z(h)&&r._subjects.state.next({errors:wr(r._formState.errors,h,i)}))}r._subjects.values.next({name:i,values:{...r._formValues}}),r._names.focus&&fe(r._fields,(_,h)=>{if(r._names.focus&&h.startsWith(r._names.focus)&&_.focus)return _.focus(),1}),r._names.focus="",r._updateValid(),O.current=!1},[y,i,r]),F.useEffect(()=>(!d(r._formValues,i)&&r._updateFieldArray(i),()=>{(r._options.shouldUnregister||u)&&r.unregister(i)}),[i,r,n,u]),{swap:F.useCallback(w,[D,i,r]),move:F.useCallback($,[D,i,r]),prepend:F.useCallback(C,[D,i,r]),append:F.useCallback(I,[D,i,r]),remove:F.useCallback(H,[D,i,r]),insert:F.useCallback(Y,[D,i,r]),update:F.useCallback(G,[D,i,r]),replace:F.useCallback(N,[D,i,r]),fields:F.useMemo(()=>y.map((_,h)=>({..._,[n]:A.current[h]||ne()})),[y,n])}}var Be=()=>{let e=[];return{get observers(){return e},next:n=>{for(const u of e)u.next&&u.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(u=>u!==n)}}),unsubscribe:()=>{e=[]}}},qe=e=>Z(e)||!vr(e);function le(e,t){if(qe(e)||qe(t))return e===t;if(oe(e)&&oe(t))return e.getTime()===t.getTime();const r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(const n of r){const u=e[n];if(!i.includes(n))return!1;if(n!=="ref"){const c=t[n];if(oe(u)&&oe(c)||R(u)&&R(c)||Array.isArray(u)&&Array.isArray(c)?!le(u,c):u!==c)return!1}}return!0}var kr=e=>e.type==="select-multiple",nt=e=>Ye(e)||be(e),Pe=e=>Ve(e)&&e.isConnected,Cr=e=>{for(const t in e)if(te(e[t]))return!0;return!1};function Se(e,t={}){const r=Array.isArray(e);if(R(e)||r)for(const i in e)Array.isArray(e[i])||R(e[i])&&!Cr(e[i])?(t[i]=Array.isArray(e[i])?[]:{},Se(e[i],t[i])):Z(e[i])||(t[i]=!0);return t}function Lr(e,t,r){const i=Array.isArray(e);if(R(e)||i)for(const n in e)Array.isArray(e[n])||R(e[n])&&!Cr(e[n])?T(t)||qe(r[n])?r[n]=Array.isArray(e[n])?Se(e[n],[]):{...Se(e[n])}:Lr(e[n],Z(t)?{}:t[n],r[n]):r[n]=!le(e[n],t[n]);return r}var he=(e,t)=>Lr(e,t,Se(t)),Tr=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:i})=>T(e)?e:t?e===""?NaN:e&&+e:r&&se(e)?new Date(e):i?i(e):e;function We(e){const t=e.ref;return Ke(t)?t.files:Ye(t)?Er(e.refs).value:kr(t)?[...t.selectedOptions].map(({value:r})=>r):be(t)?Dr(e.refs).value:Tr(T(t.value)?e.ref.value:t.value,e)}var lt=(e,t,r,i)=>{const n={};for(const u of e){const c=d(t,u);c&&k(n,u,c._f)}return{criteriaMode:r,names:[...e],fields:n,shouldUseNativeValidation:i}},me=e=>T(e)?e:pe(e)?e.source:R(e)?pe(e.value)?e.value.source:e.value:e;const yr="AsyncFunction";var ut=e=>!!e&&!!e.validate&&!!(te(e.validate)&&e.validate.constructor.name===yr||R(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===yr)),ot=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function gr(e,t,r){const i=d(e,r);if(i||Ze(r))return{error:i,name:r};const n=r.split(".");for(;n.length;){const u=n.join("."),c=d(t,u),y=d(e,u);if(c&&!Array.isArray(c)&&r!==u)return{name:r};if(y&&y.type)return{name:u,error:y};n.pop()}return{name:r}}var ct=(e,t,r,i,n)=>n.isOnAll?!1:!r&&n.isOnTouch?!(t||e):(r?i.isOnBlur:n.isOnBlur)?!e:(r?i.isOnChange:n.isOnChange)?e:!0,dt=(e,t)=>!Fe(d(e,t)).length&&M(e,t);const ft={mode:ee.onSubmit,reValidateMode:ee.onChange,shouldFocusError:!0};function yt(e={}){let t={...ft,...e},r={submitCount:0,isDirty:!1,isLoading:te(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},i={},n=R(t.defaultValues)||R(t.values)?B(t.defaultValues||t.values)||{}:{},u=t.shouldUnregister?{}:B(n),c={action:!1,mount:!1,watch:!1},y={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},v,A=0;const S={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},b={values:Be(),array:Be(),state:Be()},O=ve(t.mode),D=ve(t.reValidateMode),I=t.criteriaMode===ee.all,C=s=>a=>{clearTimeout(A),A=setTimeout(s,a)},H=async s=>{if(!t.disabled&&(S.isValid||s)){const a=t.resolver?z((await x()).errors):await U(i,!0);a!==r.isValid&&b.state.next({isValid:a})}},Y=(s,a)=>{!t.disabled&&(S.isValidating||S.validatingFields)&&((s||Array.from(y.mount)).forEach(l=>{l&&(a?k(r.validatingFields,l,a):M(r.validatingFields,l))}),b.state.next({validatingFields:r.validatingFields,isValidating:!z(r.validatingFields)}))},w=(s,a=[],l,g,f=!0,o=!0)=>{if(g&&l&&!t.disabled){if(c.action=!0,o&&Array.isArray(d(i,s))){const m=l(d(i,s),g.argA,g.argB);f&&k(i,s,m)}if(o&&Array.isArray(d(r.errors,s))){const m=l(d(r.errors,s),g.argA,g.argB);f&&k(r.errors,s,m),dt(r.errors,s)}if(S.touchedFields&&o&&Array.isArray(d(r.touchedFields,s))){const m=l(d(r.touchedFields,s),g.argA,g.argB);f&&k(r.touchedFields,s,m)}S.dirtyFields&&(r.dirtyFields=he(n,u)),b.state.next({name:s,isDirty:p(s,a),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else k(u,s,a)},$=(s,a)=>{k(r.errors,s,a),b.state.next({errors:r.errors})},G=s=>{r.errors=s,b.state.next({errors:r.errors,isValid:!1})},N=(s,a,l,g)=>{const f=d(i,s);if(f){const o=d(u,s,T(l)?d(n,s):l);T(o)||g&&g.defaultChecked||a?k(u,s,a?o:We(f._f)):q(s,o),c.mount&&H()}},_=(s,a,l,g,f)=>{let o=!1,m=!1;const V={name:s};if(!t.disabled){const P=!!(d(i,s)&&d(i,s)._f&&d(i,s)._f.disabled);if(!l||g){S.isDirty&&(m=r.isDirty,r.isDirty=V.isDirty=p(),o=m!==V.isDirty);const W=P||le(d(n,s),a);m=!!(!P&&d(r.dirtyFields,s)),W||P?M(r.dirtyFields,s):k(r.dirtyFields,s,!0),V.dirtyFields=r.dirtyFields,o=o||S.dirtyFields&&m!==!W}if(l){const W=d(r.touchedFields,s);W||(k(r.touchedFields,s,l),V.touchedFields=r.touchedFields,o=o||S.touchedFields&&W!==l)}o&&f&&b.state.next(V)}return o?V:{}},h=(s,a,l,g)=>{const f=d(r.errors,s),o=S.isValid&&X(a)&&r.isValid!==a;if(t.delayError&&l?(v=C(()=>$(s,l)),v(t.delayError)):(clearTimeout(A),v=null,l?k(r.errors,s,l):M(r.errors,s)),(l?!le(f,l):f)||!z(g)||o){const m={...g,...o&&X(a)?{isValid:a}:{},errors:r.errors,name:s};r={...r,...m},b.state.next(m)}},x=async s=>{Y(s,!0);const a=await t.resolver(u,t.context,lt(s||y.mount,i,t.criteriaMode,t.shouldUseNativeValidation));return Y(s),a},L=async s=>{const{errors:a}=await x(s);if(s)for(const l of s){const g=d(a,l);g?k(r.errors,l,g):M(r.errors,l)}else r.errors=a;return a},U=async(s,a,l={valid:!0})=>{for(const g in s){const f=s[g];if(f){const{_f:o,...m}=f;if(o){const V=y.array.has(o.name),P=f._f&&ut(f._f);P&&S.validatingFields&&Y([g],!0);const W=await $e(f,y.disabled,u,I,t.shouldUseNativeValidation&&!a,V);if(P&&S.validatingFields&&Y([g]),W[o.name]&&(l.valid=!1,a))break;!a&&(d(W,o.name)?V?wr(r.errors,W,o.name):k(r.errors,o.name,W[o.name]):M(r.errors,o.name))}!z(m)&&await U(m,a,l)}}return l.valid},ue=()=>{for(const s of y.unMount){const a=d(i,s);a&&(a._f.refs?a._f.refs.every(l=>!Pe(l)):!Pe(a._f.ref))&&Ee(s)}y.unMount=new Set},p=(s,a)=>!t.disabled&&(s&&a&&k(u,s,a),!le(Ge(),n)),E=(s,a,l)=>Sr(s,y,{...c.mount?u:T(a)?n:se(s)?{[s]:a}:a},l,a),j=s=>Fe(d(c.mount?u:n,s,t.shouldUnregister?d(n,s,[]):[])),q=(s,a,l={})=>{const g=d(i,s);let f=a;if(g){const o=g._f;o&&(!o.disabled&&k(u,s,Tr(a,o)),f=Ve(o.ref)&&Z(a)?"":a,kr(o.ref)?[...o.ref.options].forEach(m=>m.selected=f.includes(m.value)):o.refs?be(o.ref)?o.refs.length>1?o.refs.forEach(m=>(!m.defaultChecked||!m.disabled)&&(m.checked=Array.isArray(f)?!!f.find(V=>V===m.value):f===m.value)):o.refs[0]&&(o.refs[0].checked=!!f):o.refs.forEach(m=>m.checked=m.value===f):Ke(o.ref)?o.ref.value="":(o.ref.value=f,o.ref.type||b.values.next({name:s,values:{...u}})))}(l.shouldDirty||l.shouldTouch)&&_(s,f,l.shouldTouch,l.shouldDirty,!0),l.shouldValidate&&_e(s)},re=(s,a,l)=>{for(const g in a){const f=a[g],o=`${s}.${g}`,m=d(i,o);(y.array.has(s)||R(f)||m&&!m._f)&&!oe(f)?re(o,f,l):q(o,f,l)}},Q=(s,a,l={})=>{const g=d(i,s),f=y.array.has(s),o=B(a);k(u,s,o),f?(b.array.next({name:s,values:{...u}}),(S.isDirty||S.dirtyFields)&&l.shouldDirty&&b.state.next({name:s,dirtyFields:he(n,u),isDirty:p(s,o)})):g&&!g._f&&!Z(o)?re(s,o,l):q(s,o,l),He(s,y)&&b.state.next({...r}),b.values.next({name:c.mount?s:void 0,values:{...u}})},ye=async s=>{c.mount=!0;const a=s.target;let l=a.name,g=!0;const f=d(i,l),o=()=>a.type?We(f._f):br(s),m=V=>{g=Number.isNaN(V)||oe(V)&&isNaN(V.getTime())||le(V,d(u,l,V))};if(f){let V,P;const W=o(),ae=s.type===xe.BLUR||s.type===xe.FOCUS_OUT,Ur=!ot(f._f)&&!t.resolver&&!d(r.errors,l)&&!f._f.deps||ct(ae,d(r.touchedFields,l),r.isSubmitted,D,O),Ce=He(l,y,ae);k(u,l,W),ae?(f._f.onBlur&&f._f.onBlur(s),v&&v(0)):f._f.onChange&&f._f.onChange(s);const Le=_(l,W,ae,!1),Mr=!z(Le)||Ce;if(!ae&&b.values.next({name:l,type:s.type,values:{...u}}),Ur)return S.isValid&&(t.mode==="onBlur"&&ae?H():ae||H()),Mr&&b.state.next({name:l,...Ce?{}:Le});if(!ae&&Ce&&b.state.next({...r}),t.resolver){const{errors:ir}=await x([l]);if(m(W),g){const jr=gr(r.errors,i,l),ar=gr(ir,i,jr.name||l);V=ar.error,l=ar.name,P=z(ir)}}else Y([l],!0),V=(await $e(f,y.disabled,u,I,t.shouldUseNativeValidation))[l],Y([l]),m(W),g&&(V?P=!1:S.isValid&&(P=await U(i,!0)));g&&(f._f.deps&&_e(f._f.deps),h(l,P,V,Le))}},ge=(s,a)=>{if(d(r.errors,a)&&s.focus)return s.focus(),1},_e=async(s,a={})=>{let l,g;const f=K(s);if(t.resolver){const o=await L(T(s)?s:f);l=z(o),g=s?!f.some(m=>d(o,m)):l}else s?(g=(await Promise.all(f.map(async o=>{const m=d(i,o);return await U(m&&m._f?{[o]:m}:m)}))).every(Boolean),!(!g&&!r.isValid)&&H()):g=l=await U(i);return b.state.next({...!se(s)||S.isValid&&l!==r.isValid?{}:{name:s},...t.resolver||!s?{isValid:l}:{},errors:r.errors}),a.shouldFocus&&!g&&fe(i,ge,s?f:y.mount),g},Ge=s=>{const a={...c.mount?u:n};return T(s)?a:se(s)?d(a,s):s.map(l=>d(a,l))},Je=(s,a)=>({invalid:!!d((a||r).errors,s),isDirty:!!d((a||r).dirtyFields,s),error:d((a||r).errors,s),isValidating:!!d(r.validatingFields,s),isTouched:!!d((a||r).touchedFields,s)}),Nr=s=>{s&&K(s).forEach(a=>M(r.errors,a)),b.state.next({errors:s?r.errors:{}})},Qe=(s,a,l)=>{const g=(d(i,s,{_f:{}})._f||{}).ref,f=d(r.errors,s)||{},{ref:o,message:m,type:V,...P}=f;k(r.errors,s,{...P,...a,ref:g}),b.state.next({name:s,errors:r.errors,isValid:!1}),l&&l.shouldFocus&&g&&g.focus&&g.focus()},Or=(s,a)=>te(s)?b.values.subscribe({next:l=>s(E(void 0,a),l)}):E(s,a,!0),Ee=(s,a={})=>{for(const l of s?K(s):y.mount)y.mount.delete(l),y.array.delete(l),a.keepValue||(M(i,l),M(u,l)),!a.keepError&&M(r.errors,l),!a.keepDirty&&M(r.dirtyFields,l),!a.keepTouched&&M(r.touchedFields,l),!a.keepIsValidating&&M(r.validatingFields,l),!t.shouldUnregister&&!a.keepDefaultValue&&M(n,l);b.values.next({values:{...u}}),b.state.next({...r,...a.keepDirty?{isDirty:p()}:{}}),!a.keepIsValid&&H()},Xe=({disabled:s,name:a,field:l,fields:g})=>{(X(s)&&c.mount||s||y.disabled.has(a))&&(s?y.disabled.add(a):y.disabled.delete(a),_(a,We(l?l._f:d(g,a)._f),!1,!1,!0))},ke=(s,a={})=>{let l=d(i,s);const g=X(a.disabled)||X(t.disabled);return k(i,s,{...l||{},_f:{...l&&l._f?l._f:{ref:{name:s}},name:s,mount:!0,...a}}),y.mount.add(s),l?Xe({field:l,disabled:X(a.disabled)?a.disabled:t.disabled,name:s}):N(s,!0,a.value),{...g?{disabled:a.disabled||t.disabled}:{},...t.progressive?{required:!!a.required,min:me(a.min),max:me(a.max),minLength:me(a.minLength),maxLength:me(a.maxLength),pattern:me(a.pattern)}:{},name:s,onChange:ye,onBlur:ye,ref:f=>{if(f){ke(s,a),l=d(i,s);const o=T(f.value)&&f.querySelectorAll&&f.querySelectorAll("input,select,textarea")[0]||f,m=nt(o),V=l._f.refs||[];if(m?V.find(P=>P===o):o===l._f.ref)return;k(i,s,{_f:{...l._f,...m?{refs:[...V.filter(Pe),o,...Array.isArray(d(n,s))?[{}]:[]],ref:{type:o.type,name:s}}:{ref:o}}}),N(s,!1,void 0,o)}else l=d(i,s,{}),l._f&&(l._f.mount=!1),(t.shouldUnregister||a.shouldUnregister)&&!(Fr(y.array,s)&&c.action)&&y.unMount.add(s)}}},er=()=>t.shouldFocusError&&fe(i,ge,y.mount),Rr=s=>{X(s)&&(b.state.next({disabled:s}),fe(i,(a,l)=>{const g=d(i,l);g&&(a.disabled=g._f.disabled||s,Array.isArray(g._f.refs)&&g._f.refs.forEach(f=>{f.disabled=g._f.disabled||s}))},0,!1))},rr=(s,a)=>async l=>{let g;l&&(l.preventDefault&&l.preventDefault(),l.persist&&l.persist());let f=B(u);if(y.disabled.size)for(const o of y.disabled)k(f,o,void 0);if(b.state.next({isSubmitting:!0}),t.resolver){const{errors:o,values:m}=await x();r.errors=o,f=m}else await U(i);if(M(r.errors,"root"),z(r.errors)){b.state.next({errors:{}});try{await s(f,l)}catch(o){g=o}}else a&&await a({...r.errors},l),er(),setTimeout(er);if(b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:z(r.errors)&&!g,submitCount:r.submitCount+1,errors:r.errors}),g)throw g},Ir=(s,a={})=>{d(i,s)&&(T(a.defaultValue)?Q(s,B(d(n,s))):(Q(s,a.defaultValue),k(n,s,B(a.defaultValue))),a.keepTouched||M(r.touchedFields,s),a.keepDirty||(M(r.dirtyFields,s),r.isDirty=a.defaultValue?p(s,B(d(n,s))):p()),a.keepError||(M(r.errors,s),S.isValid&&H()),b.state.next({...r}))},tr=(s,a={})=>{const l=s?B(s):n,g=B(l),f=z(s),o=f?n:g;if(a.keepDefaultValues||(n=l),!a.keepValues){if(a.keepDirtyValues){const m=new Set([...y.mount,...Object.keys(he(n,u))]);for(const V of Array.from(m))d(r.dirtyFields,V)?k(o,V,d(u,V)):Q(V,d(o,V))}else{if(ze&&T(s))for(const m of y.mount){const V=d(i,m);if(V&&V._f){const P=Array.isArray(V._f.refs)?V._f.refs[0]:V._f.ref;if(Ve(P)){const W=P.closest("form");if(W){W.reset();break}}}}i={}}u=t.shouldUnregister?a.keepDefaultValues?B(n):{}:B(o),b.array.next({values:{...o}}),b.values.next({values:{...o}})}y={mount:a.keepDirtyValues?y.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},c.mount=!S.isValid||!!a.keepIsValid||!!a.keepDirtyValues,c.watch=!!t.shouldUnregister,b.state.next({submitCount:a.keepSubmitCount?r.submitCount:0,isDirty:f?!1:a.keepDirty?r.isDirty:!!(a.keepDefaultValues&&!le(s,n)),isSubmitted:a.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:f?{}:a.keepDirtyValues?a.keepDefaultValues&&u?he(n,u):r.dirtyFields:a.keepDefaultValues&&s?he(n,s):a.keepDirty?r.dirtyFields:{},touchedFields:a.keepTouched?r.touchedFields:{},errors:a.keepErrors?r.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},sr=(s,a)=>tr(te(s)?s(u):s,a);return{control:{register:ke,unregister:Ee,getFieldState:Je,handleSubmit:rr,setError:Qe,_executeSchema:x,_getWatch:E,_getDirty:p,_updateValid:H,_removeUnmounted:ue,_updateFieldArray:w,_updateDisabledField:Xe,_getFieldArray:j,_reset:tr,_resetDefaultValues:()=>te(t.defaultValues)&&t.defaultValues().then(s=>{sr(s,t.resetOptions),b.state.next({isLoading:!1})}),_updateFormState:s=>{r={...r,...s}},_disableForm:Rr,_subjects:b,_proxyFormState:S,_setErrors:G,get _fields(){return i},get _formValues(){return u},get _state(){return c},set _state(s){c=s},get _defaultValues(){return n},get _names(){return y},set _names(s){y=s},get _formState(){return r},set _formState(s){r=s},get _options(){return t},set _options(s){t={...t,...s}}},trigger:_e,register:ke,handleSubmit:rr,watch:Or,setValue:Q,getValues:Ge,reset:sr,resetField:Ir,clearErrors:Nr,unregister:Ee,setError:Qe,setFocus:(s,a={})=>{const l=d(i,s),g=l&&l._f;if(g){const f=g.refs?g.refs[0]:g.ref;f.focus&&(f.focus(),a.shouldSelect&&te(f.select)&&f.select())}},getFieldState:Je}}function pt(e={}){const t=F.useRef(void 0),r=F.useRef(void 0),[i,n]=F.useState({isDirty:!1,isValidating:!1,isLoading:te(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:te(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...yt(e),formState:i});const u=t.current.control;return u._options=e,De({subject:u._subjects.state,next:c=>{Vr(c,u._proxyFormState,u._updateFormState,!0)&&n({...u._formState})}}),F.useEffect(()=>u._disableForm(e.disabled),[u,e.disabled]),F.useEffect(()=>{if(u._proxyFormState.isDirty){const c=u._getDirty();c!==i.isDirty&&u._subjects.state.next({isDirty:c})}},[u,i.isDirty]),F.useEffect(()=>{e.values&&!le(e.values,r.current)?(u._reset(e.values,u._options.resetOptions),r.current=e.values,n(c=>({...c}))):u._resetDefaultValues()},[e.values,u]),F.useEffect(()=>{e.errors&&u._setErrors(e.errors)},[e.errors,u]),F.useEffect(()=>{u._state.mount||(u._updateValid(),u._state.mount=!0),u._state.watch&&(u._state.watch=!1,u._subjects.state.next({...u._formState})),u._removeUnmounted()}),F.useEffect(()=>{e.shouldUnregister&&u._subjects.values.next({values:u._getWatch()})},[e.shouldUnregister,u]),t.current.formState=xr(i,u),t.current}export{xt as C,Kr as F,Yr as a,et as b,tt as c,Vt as d,d as g,k as s,pt as u};
